/*! Cheetah Grid v0.9.0 | license MIT */
!function(){"use strict";function set(t,e,n,r){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var o,i=_superPropBase(t,e);if(i){if((o=Object.getOwnPropertyDescriptor(i,e)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,e)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,e,o)}else _defineProperty(r,e,n);return!0})(t,e,n,r)}function _set(t,e,n,r,o){if(!set(t,e,n,r||t)&&o)throw new Error("failed to set property");return n}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_superPropBase(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(){!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports.cheetahGrid=e():t.cheetahGrid=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===_typeof(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=60)}([function(t,e,n){(function(e){var n,r,o={get find(){return n||(n=Array.prototype.find?function(t,e){return Array.prototype.find.call(t,e)}:function(t,e){var n=o.findIndex(t,e);return n>=0?t[n]:void 0})},get findIndex(){return r||(r=Array.prototype.findIndex?function(t,e){return Array.prototype.findIndex.call(t,e)}:function(t,e){for(var n=t.length,r=0;r<n;r++){if(e(t[r],r,t))return r}return-1})}};function i(t){return null!==t&&void 0!==t}var a=window.navigator.userAgent.toLowerCase(),l=a.match(/(msie)/)||a.match(/trident/),s=a.indexOf("chrome")>-1&&-1===a.indexOf("edge"),c=a.indexOf("firefox")>-1;function u(t,e){for(var n=t,r=0;r<(arguments.length<=2?0:arguments.length-2)&&i(n);r++)n=e(n,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return n}var h=function(t){return t&&"function"==typeof t.then};t.exports={isDef:i,browser:{IE:l,Chrome:s,Firefox:c,heightLimit:s?33554431:c?17895588:10737433},extend:function(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(e){var n=function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0,enumerable:!0})};for(var r in e)n(r)}),t},isDescendantElement:function(t,e){for(;e.parentElement;){var n=e.parentElement;if(t===n)return!0;e=n}return!1},getChainSafe:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u.apply(void 0,[t,function(t,e){return t[e]}].concat(n))},applyChainSafe:u,getOrApply:function(t){if("function"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}return t},getIgnoreCase:function(t,e){if(t[e])return t[e];var n=e.toLowerCase();if(t[n])return t[n];var r=e.toLowerCase();if(t[r])return t[r];for(var o in t)if(o.toLowerCase()===n)return t[o]},isPromise:h,then:function(t,e){return h(t)?t.then(function(t){return e(t)}):e(t)},array:o,obj:{setReadonly:function(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,value:n})},each:function(t,e){for(var n in t)e(t[n],n,t)},isObject:function(t){return t===Object(t)}},str:{endsWith:function(t,e,n){var r=t.toString();("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>r.length)&&(n=r.length),n-=e.length;var o=r.lastIndexOf(e,n);return-1!==o&&o===n},genChars:function(t){var e=/([\uD800-\uDBFF][\uDC00-\uDFFF]|\r\n|[^\uD800-\uDFFF])([\u180B-\u180D]|[\uFE00-\uFE0F]|\uDB40[\uDD00-\uDDEF])?/g;return{next:function(){var n=e.exec(t);return null!==n?n[0]:null}}},genWords:function(t){var e=/[!-~]+|[^!-~\s]+|\s+/g;return{next:function(){var n=e.exec(t);return null!==n?n[0]:null}}}},event:{getMouseButtons:function(t){return i(t.buttons)?t.buttons:i(t.which)?3===t.which?4:2===t.which?4:t.which:0===t.button||1===t.button?1:2===t.button?2:0},getKeyCode:function(t){return t.keyCode||t.which},isTouchEvent:function(t){return!!t.changedTouches},cancel:function(t){t.preventDefault(),t.stopPropagation()}},style:{toBoxArray:function(t){return e(t)?3===t.length?[t[0],t[1],t[2],t[1]]:2===t.length?[t[0],t[1],t[0],t[1]]:1===t.length?[t[0],t[0],t[0],t[0]]:t:[t,t,t,t]}},emptyFn:function(){}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=window.Symbol?window.Symbol:function(){function t(){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",e=t.length,n="",r=0;r<10;r++)n+=t[Math.floor(Math.random()*e)];return n}return function(e){return e?"#".concat(e,"_").concat(t()):"#_".concat(t())}}(),o={};t.exports={get:function(t){return t?o[t]?o[t]:o[t]=r(t):r()},get PROTECTED_SYMBOL(){return this.get("protected")},get CHECK_COLUMN_STATE_ID(){return this.get("chkcol.stateID")},get BUTTON_COLUMN_STATE_ID(){return this.get("btncol.stateID")},get COLUMN_FADEIN_STATE_ID(){return this.get("col.fadein_stateID")},get BRANCH_GRAPH_COLUMN_STATE_ID(){return this.get("branch_graph_col.stateID")},get SMALL_DIALOG_INPUT_EDITOR_STATE_ID(){return this.get("small_dialog_input_editor.stateID")},get INLINE_INPUT_EDITOR_STATE_ID(){return this.get("inline_input_editor.stateID")},get INLINE_MENU_EDITOR_STATE_ID(){return this.get("inline_menu_editor.stateID")}}},function(t,e,n){t.exports={Array_isArray:window.Array.isArray}},function(t,e,n){var r,o=n(20),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._color=n.color,t._font=n.font,t._padding=n.padding,t._textOverflow=n.textOverflow||"clip",t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.doChangeStyle()}},{key:"font",get:function(){return this._font},set:function(t){this._font=t,this.doChangeStyle()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=t,this.doChangeStyle()}},{key:"textOverflow",get:function(){return this._textOverflow},set:function(t){this._textOverflow=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r=n(0).obj.each,o=1,i=function(){function t(){_classCallCheck(this,t),this._listeners={}}return _createClass(t,[{key:"on",value:function(t,e,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];t.addEventListener&&t.addEventListener.apply(t,[e,n].concat(i));var l={target:t,type:e,listener:n,options:i},s=o++;return this._listeners[s]=l,s}},{key:"tryWithOffEvents",value:function(t,e,n){var o=[];try{r(this._listeners,function(n){if(n.target===t&&n.type===e){var r;if(n.target.removeEventListener)(r=n.target).removeEventListener.apply(r,[n.type,n.listener].concat(_toConsumableArray(n.options)));o.push(n)}}),n()}finally{o.forEach(function(t){var e;t.target.addEventListener&&(e=t.target).addEventListener.apply(e,[t.type,t.listener].concat(_toConsumableArray(t.options)))})}}},{key:"off",value:function(t){if(t){var e,n=this._listeners[t];if(n)if(delete this._listeners[t],n.target.removeEventListener)(e=n.target).removeEventListener.apply(e,[n.type,n.listener].concat(_toConsumableArray(n.options)))}}},{key:"fire",value:function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];r(this._listeners,function(n){var r;n.target===t&&n.type===e&&(r=n.listener).call.apply(r,[n.target].concat(o))})}},{key:"hasListener",value:function(t,e){var n=!1;return r(this._listeners,function(r){r.target===t&&r.type===e&&(n=!0)}),n}},{key:"clear",value:function(){r(this._listeners,function(t){var e;t.target.removeEventListener&&(e=t.target).removeEventListener.apply(e,[t.type,t.listener].concat(_toConsumableArray(t.options)))}),this._listeners={}}},{key:"dispose",value:function(){this.clear(),this._listeners=null}}]),t}();t.exports=i},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r={},o=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),i=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),a=null,l=0,s=[],c=n(65);function u(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=r[o.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](o.parts[a]);for(;a<o.parts.length;a++)i.parts.push(p(o.parts[a],e))}else{var l=[];for(a=0;a<o.parts.length;a++)l.push(p(o.parts[a],e));r[o.id]={id:o.id,refs:1,parts:l}}}}function h(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}function f(t,e){var n=i(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=s[s.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),s.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!==_typeof(t.insertAt)||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=i(t.insertAt.before,n);n.insertBefore(e,o)}}function d(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=s.indexOf(t);e>=0&&s.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return g(e,t.attrs),f(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function p(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var s=l++;n=a||(a=v(e)),r=y.bind(null,n,s,!1),o=y.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),f(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=c(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}.bind(null,n,e),o=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){d(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!==("undefined"==typeof document?"undefined":_typeof(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"===_typeof(e.attrs)?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return u(n,e),function(t){for(var o=[],i=0;i<n.length;i++){var a=n[i];(l=r[a.id]).refs--,o.push(l)}t&&u(h(t,e),e);for(i=0;i<o.length;i++){var l;if(0===(l=o[i]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete r[l.id]}}}};var _=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function y(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e,n){var r=n(0),o=r.isDef,i=r.browser,a=r.isDescendantElement,l=r.array,s=r.isPromise,c=r.event,u=c.isTouchEvent,h=c.getMouseButtons,f=c.getKeyCode,d=c.cancel,v=n(13),g=n(17),p=n(62),_=n(4),y=n(66),C=n(30),m=n(18),w=n(8).getFontSize,b=n(67),x=n(1).PROTECTED_SYMBOL;var k=35,E=36,I=37,L=38,S=39,T=40,R=67,A={CLICK_CELL:"click_cell",DBLCLICK_CELL:"dblclick_cell",DBLTAP_CELL:"dbltap_cell",MOUSEDOWN_CELL:"mousedown_cell",MOUSEUP_CELL:"mouseup_cell",SELECTED_CELL:"selected_cell",KEYDOWN:"keydown",MOUSEMOVE_CELL:"mousemove_cell",MOUSEENTER_CELL:"mouseenter_cell",MOUSELEAVE_CELL:"mouseleave_cell",MOUSEOVER_CELL:"mouseover_cell",MOUSEOUT_CELL:"mouseout_cell",INPUT_CELL:"input_cell",EDITABLEINPUT_CELL:"editableinput_cell",MODIFY_STATUS_EDITABLEINPUT_CELL:"modify_status_editableinput_cell",RESIZE_COLUMN:"resize_column",SCROLL:"scroll"};function O(t){navigator.vibrate&&u(t)&&navigator.vibrate(50)}function M(t,e){var n=t.getTargetRowAtInternal(e);if(o(n))return n;var r=Math.min(Math.ceil(e/t[x].defaultRowHeight),t.rowCount-1),i=q(t,0,r);return e>=i?function(n,r){for(var o=r-$(t,n),i=t[x].rowCount,a=n;a<i;a++){var l=o+$(t,a);if(o<=e&&e<l)return{top:o,row:a};o=l}return null}(r,i):function(n,r){for(var o=r,i=n;i>=0;i--){var a=o-$(t,i);if(a<=e&&e<o)return{top:a,row:i};o=a}return null}(r,i)}function P(t,e){for(var n=0,r=t[x].colCount,o=0;o<r;o++){var i=n+G(t,o);if(i>e)return{left:n,col:o};n=i}return null}function B(t,e){if(!t[x].frozenRowCount)return null;for(var n=t[x].scroll.top,r=t[x].frozenRowCount,o=0;o<r;o++){var i=n+$(t,o);if(i>e)return{top:n,row:o};n=i}return null}function D(t,e){if(!t[x].frozenColCount)return null;for(var n=t[x].scroll.left,r=t[x].frozenColCount,o=0;o<r;o++){var i=n+G(t,o);if(i>e)return{left:n,col:o};n=i}return null}function F(t){if(!t[x].frozenRowCount)return null;for(var e=t[x].scroll.top,n=0,r=t[x].frozenRowCount,o=0;o<r;o++)n+=$(t,o);return new g(t[x].scroll.left,e,t[x].canvas.width,n)}function z(t){if(!t[x].frozenColCount)return null;for(var e=t[x].scroll.left,n=0,r=t[x].frozenColCount,o=0;o<r;o++)n+=G(t,o);return new g(e,t[x].scroll.top,n,t[x].canvas.height)}function W(t,e,n,r,o,i,a,l,c,u,h,f){var d=new g(r-c.left,a-c.top,o,l),v=g.bounds(Math.max(r,h)-c.left,Math.max(a,u)-c.top,d.right,d.bottom);if(v.height>0&&v.width>0){e.save();try{var p=function(t,e,n){return t[x].drawCells[n]?t[x].drawCells[n][e]:null}(t,n,i);p&&p.cancel();var _=new ft(n,i,e,d,v,!!p,t[x].selection,f),y=t.onDrawCell(n,i,_);if(s(y)){!function(t,e,n,r){t[x].drawCells[n]||(t[x].drawCells[n]={}),t[x].drawCells[n][e]=r}(t,n,i,_);var C=n;_._delayMode(t,function(){!function(t,e,n){t[x].drawCells[n]&&(delete t[x].drawCells[n][e],0===Object.keys(t[x].drawCells[n]).length&&delete t[x].drawCells[n])}(t,C,i)}),y.then(function(){_.terminate()})}}finally{e.restore()}}}function U(t,e,n,r,o,i,a,l,s,c,u){var h=t[x].colCount,f=function(n,r){if(n>=h-1&&t[x].canvas.width>r-s.left){var o=r-s.left;e.save(),e.beginPath(),e.fillStyle=t.underlayBackgroundColor||"#F6F6F6",e.rect(o,a-s.top,t[x].canvas.width-o,l),e.fill(),e.restore()}},d=0;if(n){for(var v=n.left,g=t[x].frozenColCount,p=n.col;p<g;p++){var _=G(t,p);if(W(t,e,p,v,_,i,a,l,s,c,0,u),o<=(v+=_))return void f(p,v)}d=v}for(var y=r.left,C=r.col;C<h;C++){var m=G(t,C);if(W(t,e,C,y,m,i,a,l,s,c,d,u),o<=(y+=m))return void f(C,y)}f(h-1,y)}function N(t,e){var n=nt(t),r=t[x].rowCount,o=t._getInitContext(),i=M(t,Math.max(n.top,e.top))||{top:q(t,0,r-1),row:r},a=P(t,Math.max(n.left,e.left))||{left:Y(t,0,t[x].colCount-1),col:t[x].colCount},l=Math.min(n.bottom,e.bottom),s=Math.min(n.right,e.right),c=B(t,Math.max(n.top,e.top)),u=D(t,Math.max(n.left,e.left)),h=new ut,f=function(e,i){if(e>=r-1&&t[x].canvas.height>i-n.top){var a=i-n.top;o.save(),o.beginPath(),o.fillStyle=t.underlayBackgroundColor||"#F6F6F6",o.rect(0,a,t[x].canvas.width,t[x].canvas.height-a),o.fill(),o.restore()}},d=0;if(c){for(var v=c.top,g=t[x].frozenRowCount,p=c.row;p<g;p++){var _=$(t,p);if(U(t,o,u,a,s,p,v,_,n,0,h),l<=(v+=_))return f(p,v),void h.draw(o)}d=v}for(var y=i.top,C=i.row;C<r;C++){var m=$(t,C);if(U(t,o,u,a,s,C,y,m,n,d,h),l<=(y+=m))return f(C,y),void h.draw(o)}f(r-1,y),h.draw(o)}function H(t,e){return Math.round(m.toPx(e,t[x].calcWidthContext))}function V(t){return H(t,t.defaultColWidth)}function j(t,e,n){var r=t[x].colWidthsLimit[e];if(!r)return n;if(r.min){var o=H(t,r.min);if(o>n)return o}if(r.max){var i=H(t,r.max);if(i<n)return i}return n}function G(t,e){var n=t[x].colWidthsMap.get(e);return n?j(t,e,H(t,n)):V(t)}function K(t,e,n){t[x].colWidthsMap.put(e,n)}function Y(t,e,n){var r=n-e+1,o=V(t)*r;return t[x].colWidthsMap.each(e,n,function(e,n){o+=j(t,n,H(t,e))-V(t)}),o}function $(t,e){var n=t.getRowHeightInternal(e);if(o(n))return n;var r=t[x].rowHeightsMap.get(e);return r||t[x].defaultRowHeight}function q(t,e,n){var r=t.getRowsHeightInternal(e,n);if(o(r))return r;var i=n-e+1,a=t[x].defaultRowHeight*i;return t[x].rowHeightsMap.each(e,n,function(e){a+=e-t[x].defaultRowHeight}),a}function X(t){var e=V(t)*t[x].colCount;return t[x].colWidthsMap.eachAll(function(n,r){e+=j(t,r,H(t,n))-V(t)}),e}function Q(t,e){var n=t.getScrollHeightInternal(e);if(o(n))return n;var r=t[x].defaultRowHeight*t[x].rowCount;return t[x].rowHeightsMap.eachAll(function(e){r+=e-t[x].defaultRowHeight}),r}function Z(t,e,n,r){var o=t.getOffsetInvalidateCells();function i(t){return o>0&&(t.start.col-=o,t.start.row-=o,t.end.col+=o,t.end.row+=o),t}var a=i(t.selection.range),l=t.getCellsRect(a.start.col,a.start.row,a.end.col,a.end.row);t.selection._setFocusCell(e,n,r),t.makeVisibleCell(e,n),t.focusCell(e,n);var s=i(t.selection.range),c=t.getCellsRect(s.start.col,s.start.row,s.end.col,s.end.row);c.intersection(l)?N(t,g.max(c,l)):(N(t,l),N(t,c))}function J(t,e){u(e)&&(e=e.changedTouches[0]);var n=e.clientX||e.pageX+window.scrollX,r=e.clientY||e.pageY+window.scrollY,o=t[x].canvas.getBoundingClientRect();return o.right<=n?null:o.bottom<=r?null:{x:n-o.left+t[x].scroll.left,y:r-o.top+t[x].scroll.top}}function tt(t){var e=function(e){var n=J(t,e);if(!n)return{};var r=t.getCellAt(n.x,n.y);return r.col<0||r.row<0?{abstractPos:n,cell:r}:{abstractPos:n,cell:r,eventArgs:{col:r.col,row:r.row,event:e}}},n=function(e){var n=t[x].colWidthsLimit[e];return!(n&&n.min&&n.max)||n.max!==n.min};t[x].handler.on(t[x].element,"mousedown",function(r){var o=e(r),i=o.abstractPos,a=o.eventArgs;if(i){if(a){var s=t.fireListeners(A.MOUSEDOWN_CELL,a);if(l.findIndex(s,function(t){return!t})>=0)return}if(1===h(r)){var c=et(t,i.x,i.y);c>=0&&n(c)?t[x].columnResizer.start(c,r):t[x].cellSelector.start(r)}}});var r=null,i=null;function a(t){i&&(clearTimeout(i),i=null)}t[x].handler.on(t[x].element,"touchstart",function(o){if(r){var a=e(o).eventArgs;if(a&&a.col===r.col&&a.row===r.row&&t.fireListeners(A.DBLTAP_CELL,a),r=null,o.defaultPrevented)return}else r=e(o).eventArgs,setTimeout(function(){r=null},350);i=setTimeout(function(){i=null;var e=J(t,o);if(e){var r=et(t,e.x,e.y,15);r>=0&&n(r)?t[x].columnResizer.start(r,o):t[x].cellSelector.start(o)}},500)}),t[x].handler.on(t[x].element,"touchcancel",a),t[x].handler.on(t[x].element,"touchmove",a),t[x].handler.on(t[x].element,"touchend",function(e){i&&(clearTimeout(i),t[x].cellSelector.select(e),i=null)});var s=!1,c=null,u=null;function v(e){t.fireListeners(A.MOUSEENTER_CELL,e),c=e}function g(){var e=c;c=null,e&&t.fireListeners(A.MOUSELEAVE_CELL,{col:e.col,row:e.row})}function p(e){t.fireListeners(A.MOUSEOVER_CELL,e),u=e}function _(){var e=u;u=null,e&&t.fireListeners(A.MOUSEOUT_CELL,{col:e.col,row:e.row})}var y=t[x].scrollable.getElement();t[x].handler.on(y,"mouseover",function(t){s=!0}),t[x].handler.on(y,"mouseout",function(t){s=!1,_()}),t[x].handler.on(t[x].element,"mouseleave",function(t){g()}),t[x].handler.on(t[x].element,"mousemove",function(r){var o=e(r),i=o.abstractPos,a=o.eventArgs;if(a){var l=c;if(l)if(t.fireListeners(A.MOUSEMOVE_CELL,a),l.col!==a.col||l.row!==a.row){_(),g();var h={col:a.col,row:a.row};v(h),s&&p(h)}else s&&!u&&p({col:a.col,row:a.row});else{var f={col:a.col,row:a.row};v(f),s&&p(f),t.fireListeners(A.MOUSEMOVE_CELL,a)}}else _(),g();if(!t[x].columnResizer.moving(r)&&!t[x].cellSelector.moving(r)){var d=t[x].element.style;if(i){var y=et(t,i.x,i.y);y>=0&&n(y)?d.cursor="col-resize":"col-resize"===d.cursor&&(d.cursor="")}else"col-resize"===d.cursor&&(d.cursor="")}}),t[x].handler.on(t[x].element,"click",function(n){if(!t[x].columnResizer.lastMoving(n)&&!t[x].cellSelector.lastMoving(n)&&t.hasListeners(A.CLICK_CELL)){var r=e(n).eventArgs;r&&t.fireListeners(A.CLICK_CELL,r)}}),t[x].handler.on(t[x].element,"dblclick",function(n){if(t.hasListeners(A.DBLCLICK_CELL)){var r=e(n).eventArgs;r&&t.fireListeners(A.DBLCLICK_CELL,r)}}),t[x].focusControl.listen("keydown",function(e,n){t.fireListeners(A.KEYDOWN,e,n)}),t[x].selection.listen(A.SELECTED_CELL,function(e){t.fireListeners(A.SELECTED_CELL,e,e.selected)}),t[x].scrollable.onScroll(function(e){!function(t,e){var n=t[x].scroll.left,r=t[x].scroll.top,o=t[x].scrollable.scrollLeft-n,i=t[x].scrollable.scrollTop-r;t[x].scroll={left:t[x].scrollable.scrollLeft,top:t[x].scrollable.scrollTop};var a=nt(t);if(Math.abs(o)>=a.width||Math.abs(i)>=a.height)N(t,a);else{if(t[x].context.drawImage(t[x].canvas,-o,-i),0!==o){var l=a.copy();if(o<0){if(l.width=-o,t[x].frozenColCount>0){var s=z(t);l.width+=s.width}}else o>0&&(l.left=l.right-o);N(t,l),o>0&&t[x].frozenColCount>0&&N(t,z(t))}if(0!==i){var c=a.copy();if(i<0){if(c.height=-i,t[x].frozenRowCount>0){var u=F(t);c.height+=u.height}}else i>0&&(c.top=c.bottom-i);N(t,c),i>0&&t[x].frozenRowCount>0&&N(t,F(t))}}}(t),t.fireListeners(A.SCROLL,{event:e})}),t[x].focusControl.onKeyDownMove(function(e){!function(t,e){var n=e.shiftKey,r=f(e),o=n?t.selection._focus:t.selection._sel;if(r===I){var i=t.getMoveLeftColByKeyDownInternal(o);if(i<0)return;Z(t,i,o.row,n),d(e)}else if(r===L){var a=t.getMoveUpRowByKeyDownInternal(o);if(a<0)return;Z(t,o.col,a,n),d(e)}else if(r===S){var l=t.getMoveRightColByKeyDownInternal(o);if(t.colCount<=l)return;Z(t,l,o.row,n),d(e)}else if(r===T){var s=t.getMoveDownRowByKeyDownInternal(o);if(t.rowCount<=s)return;Z(t,o.col,s,n),d(e)}else if(r===E)Z(t,0,e.ctrlKey?0:o.row,e.shiftKey),d(e);else if(r===k){var c=e.ctrlKey?t.rowCount-1:o.row;Z(t,t.colCount-1,c,n),d(e)}}(t,e)}),t.listen("copydata",function(e){for(var n="",r=e.start.row;r<=e.end.row;r++){for(var o=e.start.col;o<=e.end.col;o++){var i=t.getCopyCellValue(o,r);if(window.Promise&&i instanceof window.Promise);else{var a="".concat(i);a.match(/^\[object .*\]$/)||(n+=a)}o<e.end.col&&(n+="\t")}n+="\n"}return n}),t[x].focusControl.onCopy(function(e){return l.find(t.fireListeners("copydata",t[x].selection.range),o)}),t[x].focusControl.onInput(function(e){var n=t[x].selection.select,r=n.col,o=n.row;t.fireListeners(A.INPUT_CELL,{col:r,row:o,value:e})}),t.bindEventsInternal()}function et(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(t[x].frozenRowCount<=0)return-1;if(!F(t).inPoint(e,n))return-1;var o=t.getCellAt(e,n),i=t.getCellRect(o.col,o.row);return e<i.left+r?o.col-1:i.right-r<e?o.col:-1}function nt(t){return new g(t[x].scroll.left,t[x].scroll.top,t[x].canvas.width,t[x].canvas.height)}function rt(t,e){var n=e.copy(),r=nt(t);return n.offsetLeft(-r.left),n.offsetTop(-r.top),n}var ot=function(){function t(e){_classCallCheck(this,t),this._grid=e,this._handler=new _,this._events={},this._started=!1,this._moved=!1}return _createClass(t,[{key:"moving",value:function(t){return!!this._started}},{key:"lastMoving",value:function(t){if(this.moving(t))return!0;var e=this._mouseEndPoint;if(!e)return!1;var n=J(this._grid,t);return n.x===e.x&&n.y===e.y}},{key:"_bindMoveAndUp",value:function(t){var e=this;u(t)?(this._events.touchmove=this._handler.on(document.body,"touchmove",function(t){return e._mouseMove(t)},{passive:!1}),this._events.touchend=this._handler.on(document.body,"touchend",function(t){return e._mouseUp(t)}),this._events.touchcancel=this._handler.on(document.body,"touchcancel",function(t){return e._mouseUp(t)})):(this._events.mousemove=this._handler.on(document.body,"mousemove",function(t){return e._mouseMove(t)}),this._events.mouseup=this._handler.on(document.body,"mouseup",function(t){return e._mouseUp(t)})),this._started=!0,this._moved=!1}},{key:"_mouseMove",value:function(t){u(t)||1===h(t)?(this._moved=this._moveInternal(t)||this._moved,d(t)):this._mouseUp(t)}},{key:"_moveInternal",value:function(t){}},{key:"_mouseUp",value:function(t){var e=this;this._handler.off(this._events.mousemove),this._handler.off(this._events.touchmove),this._handler.off(this._events.mouseup),this._handler.off(this._events.touchend),this._handler.off(this._events.touchcancel),this._started=!1,this._upInternal(t),this._moved&&(this._mouseEndPoint=J(this._grid,t),setTimeout(function(){e._mouseEndPoint=null},10))}},{key:"_upInternal",value:function(t){}},{key:"dispose",value:function(){this._handler.dispose()}}]),t}(),it=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,ot),_createClass(e,[{key:"start",value:function(t){var e=this._getTargetCell(t);e&&(Z(this._grid,e.col,e.row,t.shiftKey),this._bindMoveAndUp(t),this._cell=e,d(t),O(t))}},{key:"select",value:function(t){var e=this._getTargetCell(t);e&&(Z(this._grid,e.col,e.row,t.shiftKey),this._cell=e)}},{key:"_moveInternal",value:function(t){var e=this,n=this._getTargetCell(t);if(!n||this._cell.col===n.col&&this._cell.row===n.row)return!1;Z(this._grid,n.col,n.row,!0);var r=n.col<e._cell.col&&0<n.col?n.col-1:e._cell.col<n.col&&n.col+1<e._grid.colCount?n.col+1:n.col,o=n.row<e._cell.row&&0<n.row?n.row-1:e._cell.row<n.row&&n.row+1<e._grid.rowCount?n.row+1:n.row;return r===n.col&&o===n.row||this._grid.makeVisibleCell(r,o),this._cell=n,!0}},{key:"_getTargetCell",value:function(t){var e=J(this._grid,t);if(!e)return null;var n=this._grid.getCellAt(e.x,e.y);return n.col<0||n.row<0?null:n}}]),e}(),at=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t)))._targetCol=-1,n}return _inherits(e,ot),_createClass(e,[{key:"start",value:function(t,e){var n;n=u(e)?e.changedTouches[0].pageX:e.pageX,this._x=n,this._preX=0,this._bindMoveAndUp(e),this._targetCol=t,this._invalidateAbsoluteLeft=Y(this._grid,0,t-1),d(e),O(e)}},{key:"_moveInternal",value:function(t){var e=(u(t)?t.changedTouches[0].pageX:t.pageX)-this._x,n=e-this._preX;this._preX=e;var r=this._grid.getColWidth(this._targetCol),o=j(this._grid,this._targetCol,r+n);o<10&&n<0&&(o=10),K(this._grid,this._targetCol,o);var i=nt(this._grid);return i.left=this._invalidateAbsoluteLeft,N(this._grid,i),this._grid.fireListeners(A.RESIZE_COLUMN,{col:this._targetCol}),!0}},{key:"_upInternal",value:function(t){var e=this._grid;e.updateScroll()&&e.invalidate()}}]),e}();function lt(t,e){var n=t.type;t.type="",t.value=e,n&&(t.type=n)}var st=function(t){function e(t,n,r){var s;_classCallCheck(this,e),(s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._grid=t,s._scrollable=r,s._handler=new _,s._input=document.createElement("input"),s._input.classList.add("grid-focus-control"),s._input.readOnly=!0,n.appendChild(s._input),s._handler.on(s._input,"compositionstart",function(e){s._input.classList.add("composition"),s._input.style.font=s._grid.font||"16px sans-serif",s._isComposition=!0,s._compositionEnd&&(clearTimeout(s._compositionEnd),delete s._compositionEnd),t.focus()});var c=function(){s._isComposition=!1,s._input.classList.remove("composition"),s._input.style.font="";var t=s._input.value;lt(s._input,""),s._input.readOnly||s.fireListeners("input",t),s._compositionEnd&&(clearTimeout(s._compositionEnd),delete s._compositionEnd)};s._handler.on(s._input,"compositionend",function(t){s._compositionEnd=setTimeout(c)}),s._handler.on(s._input,"keypress",function(t){s._isComposition||(!s._input.readOnly&&t.key&&1===t.key.length&&("c"===t.key&&(t.ctrlKey||t.metaKey)||(s.fireListeners("input",t.key),d(t))),lt(s._input,""))}),s._handler.on(s._input,"keydown",function(t){if(s._isComposition)s._compositionEnd&&(c(),d(t));else{var e=f(t);s.fireListeners("keydown",e,t),!s._input.readOnly&&s._input.value&&s.fireListeners("input",s._input.value),lt(s._input,"")}});var u=function(t){s._isComposition||lt(s._input,"")};return s._handler.on(s._input,"keyup",function(t){s._isComposition&&s._compositionEnd&&c(),u()}),s._handler.on(s._input,"input",u),s._handler.on(document,"keydown",function(t){i.IE&&(t.target===s._input&&f(t)===R&&t.ctrlKey&&(lt(s._input,"dummy"),s._input.select(),setTimeout(function(){lt(s._input,"")},100)))}),s._handler.on(document,"copy",function(t){if(!s._isComposition&&a(n,t.target)){lt(s._input,"");var e=l.find(s.fireListeners("copy"),o);o(e)&&(d(t),i.IE?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e))}}),s}return _inherits(e,v),_createClass(e,[{key:"onKeyDownMove",value:function(t){var e=this;this._handler.on(this._input,"keydown",function(n){if(!e._isComposition){var r=f(n);r!==I&&r!==L&&r!==S&&r!==T&&r!==E&&r!==k||t(n)}})}},{key:"onInput",value:function(t){return this.listen("input",t)}},{key:"onCopy",value:function(t){return this.listen("copy",t)}},{key:"focus",value:function(){this._input.focus()}},{key:"setFocusRect",value:function(t){var e=this._scrollable.calcTop(t.top);this._input.style.top="".concat((e-C.getScrollBarSize()).toFixed(),"px"),this._input.style.left="".concat(t.left.toFixed(),"px"),this._input.style.width="".concat(t.width.toFixed(),"px"),this._input.style.height="".concat(t.height.toFixed(),"px")}},{key:"resetInputStatus",value:function(){for(var t=this._input,e=t.classList.contains("composition"),n=t.attributes,r=[],o=0,i=n.length;o<i;o++){var a=n[o];this._inputStatus.hasOwnProperty(a.nodeName)||r.push(a.name)}for(var l in r.forEach(function(e){t.removeAttribute(e)}),this._inputStatus)t.setAttribute(l,this._inputStatus[l]);e?(t.classList.add("composition"),t.style.font=this._grid.font||"16px sans-serif"):t.classList.remove("composition")}},{key:"storeInputStatus",value:function(){var t=this._input;this._inputStatus={};for(var e=t.attributes,n=0,r=e.length;n<r;n++){var o=e[n];this._inputStatus[o.name]=o.value}}},{key:"setDefaultInputStatus",value:function(){}},{key:"dispose",value:function(){_get(_getPrototypeOf(e.prototype),"dispose",this).call(this),this._handler.dispose()}},{key:"editMode",set:function(t){this._input.readOnly=!t},get:function(){return!this._input.readOnly}},{key:"input",get:function(){return this._input}}]),e}(),ct=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._grid=t,n._sel={col:0,row:0},n._focus={col:0,row:0},n._start={col:0,row:0},n._end={col:0,row:0},n}return _inherits(e,v),_createClass(e,[{key:"_setSelectCell",value:function(t,e){var n=this;this._wrapFireSelectedEvent(function(){n._sel={col:t,row:e},n._start={col:t,row:e}})}},{key:"_setFocusCell",value:function(t,e,n){var r=this;this._wrapFireSelectedEvent(function(){n||r._setSelectCell(t,e),r._focus={col:t,row:e},r._end={col:t,row:e}})}},{key:"_wrapFireSelectedEvent",value:function(t){if(this._isWraped)t();else{this._isWraped=!0;try{var e={col:this._sel.col,row:this._sel.row,selected:!1};t();var n={col:this._sel.col,row:this._sel.row,selected:!0,before:{col:e.col,row:e.row}};e.after={col:n.col,row:n.row},this.fireListeners(A.SELECTED_CELL,e),this.fireListeners(A.SELECTED_CELL,n)}finally{this._isWraped=!1}}}},{key:"_updateGridRange",value:function(){for(var t=this._grid,e=t.rowCount,n=t.colCount,r=[this._sel,this._focus,this._start,this._end],o=!1,i=0;i<r.length;i++)if(n<=r[i].col||e<=r[i].row){o=!0;break}return!!o&&(this._wrapFireSelectedEvent(function(){r.forEach(function(t){t.col=Math.min(n-1,t.col),t.row=Math.min(e-1,t.row)})}),!0)}},{key:"range",get:function(){var t=Math.min(this._start.col,this._end.col),e=Math.min(this._start.row,this._end.row),n=Math.max(this._start.col,this._end.col),r=Math.max(this._start.row,this._end.row);return{start:{col:t,row:e},end:{col:n,row:r},inCell:function(o,i){return t<=o&&o<=n&&e<=i&&i<=r}}}},{key:"focus",get:function(){var t=this._focus;return{col:t.col,row:t.row}}},{key:"select",get:function(){var t=this._sel;return{col:t.col,row:t.row}},set:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._wrapFireSelectedEvent(function(){var n=e.col,r=void 0===n?0:n,o=e.row,i=void 0===o?0:o;t._setSelectCell(r,i),t._setFocusCell(r,i,!0)})}}]),e}(),ut=function(){function t(){_classCallCheck(this,t),this._layers={}}return _createClass(t,[{key:"addDraw",value:function(t,e){(this._layers[t]||(this._layers[t]=new ht(t))).addDraw(e)}},{key:"draw",value:function(t){var e=[];for(var n in this._layers)e.push(this._layers[n]);e.sort(function(t,e){return t.level-e.level}),e.forEach(function(e){return e.draw(t)})}}]),t}(),ht=function(){function t(e){_classCallCheck(this,t),this._level=e,this._list=[]}return _createClass(t,[{key:"addDraw",value:function(t){this._list.push(t)}},{key:"draw",value:function(t){this._list.forEach(function(e){t.save();try{e(t)}finally{t.restore()}})}},{key:"level",get:function(){return this._level}}]),t}(),ft=function(){function t(e,n,r,o,i,a,l,s){_classCallCheck(this,t),this._col=e,this._row=n,this._mode=0,this._ctx=r,this._rect=o,this._drawRect=i,this._drawing=a,this._selection=l,this._drawLayers=s,this._childContexts=[]}return _createClass(t,[{key:"cancel",value:function(){this._cancel=!0,this._childContexts.forEach(function(t){t.cancel()})}},{key:"getSelectState",value:function(){var t=this._selection.select;return{selected:t.col===this._col&&t.row===this._row,selection:this._selection.range.inCell(this._col,this._row)}}},{key:"getContext",value:function(){return 0===this._mode?this._ctx:this._grid._getInitContext()}},{key:"getRect",value:function(){return 0===this._mode?this._rect:this._rect?this._rect:this._grid.getCellRelativeRect(this._col,this._row)}},{key:"setRect",value:function(t){this._rect=t}},{key:"getDrawRect",value:function(){if(this._cancel)return null;if(0===this._mode)return this._drawRect;if(this._isOutOfRange())return null;var t=this._grid.getCellRect(this._col,this._row);return this._toRelativeDrawRect(t)}},{key:"_isOutOfRange",value:function(){var t=this._grid,e=t.colCount,n=t.rowCount;return e<=this._col||n<=this._row}},{key:"toCurrentContext",value:function(){if(0===this._mode)return this;var e=this._grid.getCellRect(this._col,this._row),n=rt(this._grid,e),r=this._isOutOfRange()?null:this._toRelativeDrawRect(e),o=new t(this._col,this._row,this.getContext(),n,r,this.drawing,this._selection,this._drawLayers);return o.toCurrentContext=this.toCurrentContext.bind(this),this._childContexts.push(o),this._cancel&&o.cancel(),o}},{key:"addLayerDraw",value:function(t,e){this._drawLayers.addDraw(t,e)}},{key:"_toRelativeDrawRect",value:function(t){var e=nt(this._grid),n=t.copy();if(!n.intersection(e))return null;var r=this._grid.isFrozenCell(this._col,this._row);if(this._grid.frozenColCount>=0&&(!r||!r.col)){var o=this._grid.getCellRect(this._grid.frozenColCount-1,this._row);n=g.bounds(Math.max(n.left,o.right),n.top,n.right,n.bottom)}if(this._grid.frozenRowCount>=0&&(!r||!r.row)){var i=this._grid.getCellRect(this._col,this._grid.frozenRowCount-1);n=g.bounds(n.left,Math.max(n.top,i.bottom),n.right,n.bottom)}return n.intersection(e)?(n.offsetLeft(-e.left),n.offsetTop(-e.top),n):null}},{key:"_delayMode",value:function(t,e){this._mode=1,this._ctx=null,this._rect=null,this._drawRect=null,this._grid=t,this._onTerminate=e}},{key:"terminate",value:function(){0!==this._mode&&this._onTerminate()}},{key:"drawing",get:function(){return 0!==this._mode||this._drawing}},{key:"row",get:function(){return this._row}},{key:"col",get:function(){return this._col}}]),t}(),dt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.rowCount,o=void 0===r?10:r,i=n.colCount,a=void 0===i?10:i,l=n.frozenColCount,s=void 0===l?0:l,c=n.frozenRowCount,u=void 0===c?0:c,h=n.defaultRowHeight,f=void 0===h?40:h,d=n.defaultColWidth,v=void 0===d?80:d,g=n.font,m=n.underlayBackgroundColor,k=n.parentElement;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))[x]={},C.initDocument(),t[x].element=function(){var t=document.createElement("div");return t.classList.add("cheetah-grid"),t}(),t[x].scrollable=new p,t[x].handler=new _,t[x].selection=new ct(_assertThisInitialized(_assertThisInitialized(t))),t[x].focusControl=new st(_assertThisInitialized(_assertThisInitialized(t)),t[x].scrollable.getElement(),t[x].scrollable),t[x].canvas=b.transform(document.createElement("canvas")),t[x].context=t[x].canvas.getContext("2d",{alpha:!1}),t[x].rowCount=o,t[x].colCount=a,t[x].frozenColCount=s,t[x].frozenRowCount=u,t[x].defaultRowHeight=f,t[x].defaultColWidth=v,t[x].font=g,t[x].underlayBackgroundColor=m,t[x].rowHeightsMap=new y,t[x].colWidthsMap=new y,t[x].colWidthsLimit={},t[x].calcWidthContext={_:t[x],get full(){return this._.canvas.width},get em(){return w(this._.context,this._.font).width}},t[x].columnResizer=new at(_assertThisInitialized(_assertThisInitialized(t))),t[x].cellSelector=new it(_assertThisInitialized(_assertThisInitialized(t))),t[x].drawCells={},t[x].cellTextOverflows={},t[x].element.appendChild(t[x].canvas),t[x].element.appendChild(t[x].scrollable.getElement()),t.updateScroll(),k?(k.appendChild(t[x].element),t.updateSize()):t.updateSize(),tt(_assertThisInitialized(_assertThisInitialized(t))),t}return _inherits(e,v),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return A}}]),_createClass(e,[{key:"getElement",value:function(){return this[x].element}},{key:"focus",value:function(){var t=this[x].selection.select,e=t.col,n=t.row;this.focusCell(e,n)}},{key:"configure",value:function(t,e){var n=this[x].config||(this[x].config={});return o(e)&&(n[t]=e),n[t]}},{key:"updateSize",value:function(){this[x].canvas.style.width="",this[x].canvas.style.height="";var t=Math.floor(this[x].canvas.offsetWidth||this[x].canvas.parentElement.offsetWidth-C.getScrollBarSize()),e=Math.floor(this[x].canvas.offsetHeight||this[x].canvas.parentElement.offsetHeight-C.getScrollBarSize());this[x].canvas.width=t,this[x].canvas.height=e,this[x].canvas.style.width="".concat(t,"px"),this[x].canvas.style.height="".concat(e,"px");var n=this[x].selection.select;this[x].focusControl.setFocusRect(this.getCellRect(n.col,n.row))}},{key:"updateScroll",value:function(){var t=this[x].scrollable,e=Q(this),n=X(this);return(e!==t.scrollHeight||n!==t.scrollWidth)&&(this[x].scrollable.setScrollSize(X(this),Q(this)),this[x].scroll={left:this[x].scrollable.scrollLeft,top:this[x].scrollable.scrollTop},!0)}},{key:"getRowHeight",value:function(t){return $(this,t)}},{key:"setRowHeight",value:function(t,e){!function(t,e,n){t[x].rowHeightsMap.put(e,n)}(this,t,e),this.updateScroll()}},{key:"getColWidth",value:function(t){return G(this,t)}},{key:"setColWidth",value:function(t,e){K(this,t,e),this.updateScroll()}},{key:"getMaxColWidth",value:function(t){var e=this[x].colWidthsLimit[t];return e&&e.max||void 0}},{key:"setMaxColWidth",value:function(t,e){(this[x].colWidthsLimit[t]||(this[x].colWidthsLimit[t]={})).max=e}},{key:"getMinColWidth",value:function(t){var e=this[x].colWidthsLimit[t];return e&&e.min||void 0}},{key:"setMinColWidth",value:function(t,e){(this[x].colWidthsLimit[t]||(this[x].colWidthsLimit[t]={})).min=e}},{key:"getCellRect",value:function(t,e){var n=this.isFrozenCell(t,e),r=Y(this,0,t-1),o=G(this,t);n&&n.col&&(r+=this[x].scroll.left);var i=q(this,0,e-1),a=$(this,e);return n&&n.row&&(i+=this[x].scroll.top),new g(r,i,o,a)}},{key:"getCellRelativeRect",value:function(t,e){return rt(this,this.getCellRect(t,e))}},{key:"getCellsRect",value:function(t,e,n,r){var o=this.isFrozenCell(t,e),i=this.isFrozenCell(n,r),a=Y(this,0,t-1),l=Y(this,t,n);if(o&&o.col){var s=this[x].scroll.left;a+=s,i&&i.col||(l-=s,l=Math.max(l,Y(this,t,this.frozenColCount-1)))}var c=q(this,0,e-1),u=q(this,e,r);if(o&&o.row){var h=this[x].scroll.top;c+=h,i&&i.row||(u-=h,u=Math.max(u,Y(this,e,this.frozenRowCount-1)))}return new g(a,c,l,u)}},{key:"isFrozenCell",value:function(t,e){var n=this[x].frozenRowCount>0&&e<this[x].frozenRowCount,r=this[x].frozenColCount>0&&t<this[x].frozenColCount;return n||r?{row:n,col:r}:null}},{key:"getRowAt",value:function(t){var e=B(this,t);if(e)return e.row;var n=M(this,t);return n?n.row:-1}},{key:"getColAt",value:function(t){var e=D(this,t);if(e)return e.col;var n=P(this,t);return n?n.col:-1}},{key:"getCellAt",value:function(t,e){return{row:this.getRowAt(e),col:this.getColAt(t)}}},{key:"makeVisibleCell",value:function(t,e){var n=this.isFrozenCell(t,e);if(!(n&&n.col&&n.row)){var r=this.getCellRect(t,e),o=function(t){var e=0;t[x].frozenColCount>0&&(e=z(t).width);var n=0;return t[x].frozenRowCount>0&&(n=F(t).height),new g(t[x].scroll.left+e,t[x].scroll.top+n,t[x].canvas.width-e,t[x].canvas.height-n)}(this);o.contains(r)||(n&&n.col||(r.left<o.left?this[x].scrollable.scrollLeft-=o.left-r.left:o.right<r.right&&(this[x].scrollable.scrollLeft-=o.right-r.right)),n&&n.row||(r.top<o.top?this[x].scrollable.scrollTop-=o.top-r.top:o.bottom<r.bottom&&(this[x].scrollable.scrollTop-=o.bottom-r.bottom)))}}},{key:"focusCell",value:function(t,e){this[x].focusControl.editMode&&this[x].focusControl.resetInputStatus(),this[x].focusControl.setFocusRect(this.getCellRect(t,e));var n=this[x].selection.select,r=n.col,o=n.row,i=this.fireListeners(A.EDITABLEINPUT_CELL,{col:r,row:o}),a=l.findIndex(i,function(t){return!!t})>=0;this[x].focusControl.editMode=a,a&&(this[x].focusControl.storeInputStatus(),this[x].focusControl.setDefaultInputStatus(),this.fireListeners(A.MODIFY_STATUS_EDITABLEINPUT_CELL,{col:r,row:o,input:this[x].focusControl.input})),this[x].focusControl.focus()}},{key:"invalidateCell",value:function(t,e){this.invalidateGridRect(t,e)}},{key:"invalidateGridRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=this.getOffsetInvalidateCells();o>0&&(t-=o,e-=o,n+=o,r+=o);var i=nt(this),a=this.getCellsRect(t,e,n,r),l=i.intersection(a);if(l){if(this[x].frozenColCount>0&&n>=this[x].frozenColCount){var s=z(this);s.intersection(l)&&(l.left=Math.min(s.right-1,s.right))}if(this[x].frozenRowCount>0&&r>=this[x].frozenRowCount){var c=F(this);c.intersection(l)&&(l.top=Math.min(c.bottom-1,l.top))}N(this,l)}}},{key:"invalidate",value:function(){N(this,nt(this))}},{key:"getCopyCellValue",value:function(t,e){}},{key:"onDrawCell",value:function(t,e,n){}},{key:"getCellOverflowText",value:function(t,e){var n="".concat(t,":").concat(e);return this[x].cellTextOverflows[n]||null}},{key:"setCellOverflowText",value:function(t,e,n){var r="".concat(t,":").concat(e);n?this[x].cellTextOverflows[r]="string"==typeof n?n.trim():n:delete this[x].cellTextOverflows[r]}},{key:"addDisposable",value:function(t){if(!t||!t.dispose||"function"!=typeof t.dispose)throw new Error("not disposable!");(this[x].disposables=this[x].disposables||[]).push(t)}},{key:"dispose",value:function(){_get(_getPrototypeOf(e.prototype),"dispose",this).call(this),this[x].handler.dispose(),this[x].scrollable.dispose(),this[x].focusControl.dispose(),this[x].columnResizer.dispose(),this[x].cellSelector.dispose(),this[x].disposables&&(this[x].disposables.forEach(function(t){return t.dispose()}),this[x].disposables=null);var t=this[x].element.parentElement;t&&t.removeChild(this[x].element)}},{key:"getAttachCellArea",value:function(t,e){return{element:this.getElement(),rect:rt(this,this.getCellRect(t,e))}}},{key:"bindEventsInternal",value:function(){}},{key:"getTargetRowAtInternal",value:function(t){}},{key:"getRowsHeightInternal",value:function(t,e){}},{key:"getRowHeightInternal",value:function(t){}},{key:"getScrollHeightInternal",value:function(t){}},{key:"getMoveLeftColByKeyDownInternal",value:function(t){var e=t.col;t.row;return e-1}},{key:"getMoveRightColByKeyDownInternal",value:function(t){var e=t.col;t.row;return e+1}},{key:"getMoveUpRowByKeyDownInternal",value:function(t){t.col;return t.row-1}},{key:"getMoveDownRowByKeyDownInternal",value:function(t){t.col;return t.row+1}},{key:"getOffsetInvalidateCells",value:function(){return 0}},{key:"_getInitContext",value:function(){var t=this[x].context;return t.fillStyle="white",t.strokeStyle="black",t.textAlign="left",t.textBaseline="top",t.lineWidth=1,t.font=this.font||"16px sans-serif",t}},{key:"canvas",get:function(){return this[x].canvas}},{key:"selection",get:function(){return this[x].selection}},{key:"rowCount",get:function(){return this[x].rowCount},set:function(t){if(this[x].rowCount=t,this.updateScroll(),this[x].selection._updateGridRange()){var e=this[x].selection.focus,n=e.col,r=e.row;this.makeVisibleCell(n,r),this.focusCell(n,r)}}},{key:"colCount",get:function(){return this[x].colCount},set:function(t){if(this[x].colCount=t,this.updateScroll(),this[x].selection._updateGridRange()){var e=this[x].selection.focus,n=e.col,r=e.row;this.makeVisibleCell(n,r),this.focusCell(n,r)}}},{key:"frozenColCount",get:function(){return this[x].frozenColCount},set:function(t){this[x].frozenColCount=t}},{key:"frozenRowCount",get:function(){return this[x].frozenRowCount},set:function(t){this[x].frozenRowCount=t}},{key:"defaultRowHeight",get:function(){return this[x].rowCount},set:function(t){this[x].defaultRowHeight=t,this.updateScroll()}},{key:"defaultColWidth",get:function(){return this[x].defaultColWidth},set:function(t){this[x].defaultColWidth=t,this.updateScroll()}},{key:"font",get:function(){return this[x].font},set:function(t){this[x].font=t}},{key:"underlayBackgroundColor",get:function(){return this[x].underlayBackgroundColor},set:function(t){this[x].underlayBackgroundColor=t}}]),e}();t.exports=dt},function(t,e,n){var r={};function o(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.offset,a=void 0===i?0:i,l=o.padding,s=(l=void 0===l?{}:l).left,c=void 0===s?0:s,u=l.right,h=void 0===u?0:u,f=l.top,d=void 0===f?0:f,v=l.bottom,g=void 0===v?0:v,p=t.textAlign||"left",_=t.textBaseline||"middle";t.textAlign=p,t.textBaseline=_;var y=e.left+a+c;"right"===p||"end"===p?y=e.right-n-a-h:"center"===p&&(y=e.left+(e.width-n+c-h)/2);var C=e.top+a+d;return"bottom"===_||"alphabetic"===_||"ideographic"===_?C=e.bottom-r-a-g:"middle"===_&&(C=e.top+(e.height-r+d-g)/2),{x:y,y:C}}t.exports={calcBasePosition:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.offset,i=void 0===r?0:r,a=n.padding,l=(a=void 0===a?{}:a).left,s=void 0===l?0:l,c=a.right,u=void 0===c?0:c,h=a.top,f=void 0===h?0:h,d=a.bottom;return o(t,e,0,0,{offset:i,padding:{left:s,right:u,top:f,bottom:void 0===d?0:d}})},calcStartPosition:o,getFontSize:function(t,e){if(r[e])return r[e];var n=t.font;try{t.font=e||t.font;var o=t.measureText("").width;return r[e]={width:o,height:o}}finally{t.font=n}}}},function(t,e,n){var r=n(38),o=n(0),i=o.isPromise,a=o.isDef,l=o.obj.setReadonly,s=n(35),c=n(3),u=n(1).COLUMN_FADEIN_STATE_ID;function h(t){return t[u]||l(t,u,{}),t[u]}function f(t,e,n,r,o,i){return function(a){var l=h(t),s="".concat(e,":").concat(n);1===a?delete l[s]:l[s]={opacity:a},i(),o();var c=l[s];if(c){var u=r.getContext();u.globalAlpha=1-c.opacity;try{i()}finally{u.globalAlpha=1}}}}var d=function(t,e,n,r,o,i){var a=h(t),l=[f(t,e,n,r,o,i)];a.activeFadeins=l,s(500,function(t){l.forEach(function(e){return e(t)}),1===t&&delete a.activeFadeins})},v=function(t,e,n,r,o,i){var a=h(t);a.activeFadeins?a.activeFadeins.push(f(t,e,n,r,o,i)):o()},g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.onDrawCell=this.onDrawCell.bind(this),this._fadeinWhenCallbackInPromise=e.fadeinWhenCallbackInPromise}return _createClass(t,[{key:"onDrawCell",value:function(t,e,n,o){var l=this,s=e.style,c=e.getRecord,h=e.drawCellBase,f=o.getGridCanvasHelper();h();var g,p=c();if(i(p)?g=p.then(function(){return t}):i(t)&&(g=t),g){var _=Date.now();return g.then(function(t){if(n.toCurrentContext().getDrawRect()){var u=Date.now()-_,g=function(){var a=n.toCurrentContext();if(a.getDrawRect()){var u=c();if(!i(u)){var h=r.of(s,u,l.StyleClass);l.drawInternal(l.convertInternal(t),a,h,f,o,e),l.drawMessageInternal(e.getMessage(),n,h,f,o,e)}}};if(function(t,e){return a(t._fadeinWhenCallbackInPromise)?t._fadeinWhenCallbackInPromise:!!e.configure("fadeinWhenCallbackInPromise")}(l,o)){var p=n.col,y=n.row;u<80?v(o,p,y,n,g,h):d(o,p,y,n,g,h)}else g()}})}var y=r.of(s,p,this.StyleClass);this.drawInternal(this.convertInternal(t),n,y,f,o,e),this.drawMessageInternal(e.getMessage(),n,y,f,o,e);var C=n.col,m=n.row,w="".concat(C,":").concat(m),b=o[u]&&o[u][w];if(b){var x=n.getContext();x.globalAlpha=1-b.opacity;try{h()}finally{x.globalAlpha=1}}return null}},{key:"clone",value:function(){return new t(this)}},{key:"convertInternal",value:function(t){return a(t)?t:""}},{key:"drawInternal",value:function(t,e,n,r,o,i){}},{key:"drawMessageInternal",value:function(t,e,n,r,o,i){i.messageHandler.drawCellMessage(t,e,n,r,i)}},{key:"bindGridEvent",value:function(t,e,n){return[]}},{key:"StyleClass",get:function(){return c}}]),t}();t.exports=g},function(t,e,n){(function(e){var r=n(0).isDef;function o(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.classList,i=r.text,a=r.html,l=document.createElement(t);o&&(e(o)?(n=l.classList).add.apply(n,_toConsumableArray(o)):l.classList.add(o));return i?l.textContent=i:a&&(l.innerHTML=a),l}function i(t){return!(!t.nodeType||!t.nodeName)}function a(t){if(i(t))return t;var e=o("div",{html:t});return Array.prototype.slice.call(e.childNodes)}function l(t){if(window.jQuery&&t instanceof window.jQuery)return Array.prototype.map.call(t,function(t){return t});if(e(t))return t.map(a);var n=a(t);return e(n)?n:[a(t)]}function s(t){return r(t.tabIndex)&&t.tabIndex>-1}t.exports={createElement:o,empty:function(t){for(var e;e=t.firstChild;)t.removeChild(e)},isNode:i,toNode:a,toNodeList:l,appendHtml:function(t,e){l(e).forEach(function(e){t.appendChild(e)})},disableFocus:function t(e){e.dataset.disableBeforeTabIndex=e.tabIndex,e.tabIndex=-1,Array.prototype.slice.call(e.children,0).forEach(t)},enableFocus:function t(e){"disableBeforeTabIndex"in e.dataset&&(e.tabIndex=e.dataset.disableBeforeTabIndex),Array.prototype.slice.call(e.children,0).forEach(t)},isFocusable:s,findPrevSiblingFocusable:function(t){for(var e=t.previousSibling;e&&!s(e);)e=e.previousSibling;return e},findNextSiblingFocusable:function(t){for(var e=t.nextSibling;e&&!s(e);)e=e.nextSibling;return e}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(3),o=n(9),i=n(15),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase,s=a.getIcon,c=n.textAlign,u=n.textBaseline,h=n.color,f=n.font,d=n.bgColor,v=n.padding,g=n.textOverflow;d&&l({bgColor:d}),r.testFontLoad(f,t,e),i.loadIcons(s(),e,r,function(e,n){r.text(t,n,{textAlign:c,textBaseline:u,color:h,font:f,padding:v,textOverflow:g,icons:e})})}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=a},function(t,e,n){var r=n(0),o=r.isDef,i=r.str,a=i.genChars,l=i.genWords;function s(t,e){return t.measureText(e).width}function c(t,e,n,r,o){for(var i=[],a=n.next(),l=0;l<r&&null!==a;l++,a=n.next())i.push(a);var c=s(t,i.join(""));if(c>o)for(;i.length;){if((c-=s(t,i.pop()))<=o)break}else if(c<o)for(;null!==a;){var h=s(t,a);if(c+h>o)break;i.push(a),c+=h,a=n.next()}var f=i.join("").replace(/\s+$/,""),d=e.slice(f.length).replace(/^\s+/,"");return{before:f?new u(f):null,after:d?new u(d):null}}var u=function(){function t(e){_classCallCheck(this,t),this._content=o(e)?e:""}return _createClass(t,[{key:"width",value:function(t){return s(t.ctx,this._content)}},{key:"font",value:function(){return null}},{key:"color",value:function(){return null}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;n.fillTextRect(e,this._content,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})}},{key:"canBreak",value:function(){return!!this._content}},{key:"splitIndex",value:function(e){for(var n=this._content,r=a(n),o=[],i=r.next(),l=0;l<e&&null!==i;l++,i=r.next())o.push(i);var s=o.join(""),c=n.slice(s.length);return{before:s?new t(s):null,after:c?new t(c):null}}},{key:"breakWord",value:function(t,e){var n=this._content,r=this.width({ctx:t}),o=Math.floor(this._content.length*e/r);return c(t,n,l(n),o,e)}},{key:"breakAll",value:function(t,e){var n=this._content,r=this.width({ctx:t}),o=Math.floor(this._content.length*e/r);return c(t,n,a(n),o,e)}},{key:"toString",value:function(){return this._content}}]),t}();t.exports=u},function(t,e,n){var r=n(0),o=r.isDef,i=r.obj.each,a=n(1).get(),l=1,s=function(){function t(){_classCallCheck(this,t),this[a]={},this[a].listeners={},this[a].listenerData={}}return _createClass(t,[{key:"listen",value:function(t,e){var n=this,r=this[a].listeners[t]||(this[a].listeners[t]=[]);r.push(e);var o=l++;return this[a].listenerData[o]={type:t,listener:e,remove:function(){delete n[a].listenerData[o];var i=r.indexOf(e);r.splice(i,1),n[a].listeners[t].length||delete n[a].listeners[t]}},o}},{key:"unlisten",value:function(t){this[a].listenerData[t].remove()}},{key:"addEventListener",value:function(t,e){this.listen(t,e)}},{key:"removeEventListener",value:function(t,e){var n=this;i(this[a].listenerData,function(r,o){r.type===t&&r.listener===e&&n.unlisten(o)})}},{key:"hasListeners",value:function(t){return!!this[a].listeners[t]}},{key:"fireListeners",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var l=this[a].listeners[t];return l?l.map(function(t){return t.call.apply(t,[e].concat(r))}).filter(o):[]}},{key:"dispose",value:function(){delete this[a]}}]),t}();t.exports=s},function(t,e,n){var r=n(19),o=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._readOnly=n.readOnly,t}return _inherits(e,r),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"onChangeReadOnlyInternal",value:function(){}},{key:"readOnly",get:function(){return this._readOnly},set:function(t){this._readOnly=!!t,this.onChangeReadOnlyInternal()}}]),e}();t.exports=o},function(t,e,n){var r=n(0).isPromise,o=n(22);t.exports={loadIcons:function(t,e,n,i){var a=this;if(t)if(r(t))t.then(function(t){a.loadIcon(t,e.toCurrentContext(),i)}),t=null;else{var l=o.toNormarizeArray(t);l.forEach(function(t){n.testFontLoad(t.font,t.content,e)}),t=l}i(t,e)}}},function(t,e,n){var r=n(57),o=n(58),i=n(122),a={get BaseStyle(){return r},get Style(){return o},get SortHeaderStyle(){return i},of:function(t,e){return t?t instanceof o?t:"function"==typeof t?a.of(t(),e):new e(t):e.DEFAULT}};t.exports=a},function(t,e,n){var r=function(){function t(e,n,r,o){_classCallCheck(this,t),this._left=e,this._top=n,this._width=r,this._height=o}return _createClass(t,[{key:"offsetLeft",value:function(t){this._left+=t,this._right=void 0}},{key:"offsetTop",value:function(t){this._top+=t,this._bottom=void 0}},{key:"copy",value:function(){return new t(this.left,this.top,this.width,this.height)}},{key:"intersection",value:function(e){var n=Math.max(this.left,e.left),r=Math.min(this.left+this.width,e.left+e.width);if(n<=r){var o=Math.max(this.top,e.top),i=Math.min(this.top+this.height,e.top+e.height);if(o<=i)return t.bounds(n,o,r,i)}return null}},{key:"contains",value:function(t){return this.left<=t.left&&this.left+this.width>=t.left+t.width&&this.top<=t.top&&this.top+this.height>=t.top+t.height}},{key:"inPoint",value:function(t,e){return this.left<=t&&this.left+this.width>=t&&this.top<=e&&this.top+this.height>=e}},{key:"left",get:function(){return this._left},set:function(t){var e=this.right;this._left=t,this.right=e}},{key:"top",get:function(){return this._top},set:function(t){var e=this.bottom;this._top=t,this.bottom=e}},{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._right=void 0}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._bottom=void 0}},{key:"right",get:function(){return void 0!==this._right?this._right:this._right=this.left+this.width},set:function(t){this._right=t,this.width=t-this.left}},{key:"bottom",get:function(){return void 0!==this._bottom?this._bottom:this._bottom=this.top+this.height},set:function(t){this._bottom=t,this.height=t-this.top}}],[{key:"bounds",value:function(e,n,r,o){return new t(e,n,r-e,o-n)}},{key:"max",value:function(e,n){return t.bounds(Math.min(e.left,n.left),Math.min(e.top,n.top),Math.max(e.right,n.right),Math.max(e.bottom,n.bottom))}}]),t}();t.exports=r},function(module,exports,__webpack_require__){function parse(calcStr){function replacer(t,e,n){switch(n){case"%":return"(".concat(e," * this.full / 100)");case"em":return"(".concat(e," * this.em)");case"px":return"(".concat(e,")");default:throw new Error("calc error")}}var script=calcStr.replace(/^calc\((.*)\)$/,"$1").replace(/(\d+)([A-Za-z%]+)/g,replacer).replace(/(\d*\.\d+)([A-Za-z%]+)/g,replacer);return{eval:function _eval(context){function fn(){function calc(t){return t}return eval(script)}return fn.call(context)}}}function _toPx(t,e){return/^calc\(.*\)$/.test(t)?parse(t).eval(e):/^[+-]?\d+\.?\d*%$/.test(t)?e.full*t.substr(0,t.length-1)/100:/^[+-]?\d+\.?\d*px$/.test(t)?t.substr(0,t.length-2)-0:/^[+-]?\d+\.?\d*em$/.test(t)?e.em*(t.substr(0,t.length-2)-0):t-0}module.exports={parse:parse,toPx:function(t,e){return"string"==typeof t?_toPx(t.trim(),e):t-0}}},function(t,e,n){var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this._disabled=e.disabled}return _createClass(t,[{key:"clone",value:function(){return new t(this)}},{key:"bindGridEvent",value:function(t,e,n){return[]}},{key:"onChangeDisabledInternal",value:function(){}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=!!t,this.onChangeDisabledInternal()}}]),t}();t.exports=r},function(t,e,n){var r,o=n(21),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._textAlign=n.textAlign||"left",t._textBaseline=n.textBaseline||"middle",t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"textAlign",get:function(){return this._textAlign},set:function(t){this._textAlign=t,this.doChangeStyle()}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r,o=n(13),i={CHANGE_STYLE:"change_style"},a=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._bgColor=n,t}return _inherits(e,o),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return i}},{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"doChangeStyle",value:function(){this.fireListeners(i.CHANGE_STYLE)}},{key:"clone",value:function(){return new e(this)}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){(function(e){var r=n(0).isDef,o=["content","font","color","className","isLiga","width","src","svg","name","path"];var i={},a={};function l(t,e){var n=a[t]||(a[t]={});if(n[e])return n[e];var r=i[t]||(i[t]=document.createElement(t));r.className=e,document.body.appendChild(r);try{var o=document.defaultView.getComputedStyle(r,"::before"),l=o.getPropertyValue("content");l.length>=3&&('"'===l[0]||"'"===l[0])&&l[0]===l[l.length-1]&&(l=l.substr(1,l.length-2));var s=o.getPropertyValue("font");s||(s="".concat(o.getPropertyValue("font-style")," ").concat(o.getPropertyValue("font-variant")," ").concat(o.getPropertyValue("font-weight")," ").concat(o.getPropertyValue("font-size"),"/").concat(o.getPropertyValue("line-height")," ").concat(function(t){for(var e=[],n=t.split(/,\s*/),r=0;r<n.length;r++){var o=n[r].replace(/['"]/g,"");-1!==o.indexOf(" ")||/^\d/.test(o)?e.push("'".concat(o,"'")):e.push(o)}return e.join(",")}(o.getPropertyValue("font-family"))));var c=o.getPropertyValue("color"),u=r.clientWidth,h=(o.getPropertyValue("font-feature-settings")||"").indexOf("liga")>-1;return n[e]={content:l,font:s,color:c,width:u,isLiga:h}}finally{document.body.removeChild(r)}}function s(t){if(!t)return t;if(e(t))return t;var n={},r=0;o.forEach(function(n){t[n]&&(r=e(t[n])?Math.max(r,t[n].length):Math.max(r,1))}),o.forEach(function(o){n[o]=function(t,n){var r=[];if(e(t)){r.push.apply(r,_toConsumableArray(t));for(var o=t.length;o<n;o++)r.push(null)}else for(var i=0;i<n;i++)r.push(t);return r}(t[o],r)});for(var i=[],a=function(t){var e={};o.forEach(function(r){e[r]=n[r][t]}),i.push(e)},l=0;l<r;l++)a(l);return i}t.exports={toNormarizeArray:function(t){var e=s(t);return e?e.map(function(t){return function(t){var e={};for(var n in t)"className"!==n&&(e[n]=t[n]);if(t.className){var o=l(t.tagName||"i",t.className);for(var i in o)r(t[i])||(e[i]=o[i])}return e}(t)}):e},get iconPropKeys(){return o},getIconProps:l}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(0),o=r.extend,i=r.getIgnoreCase,a=n(96),l=a.Theme,s=n(48),c=new l(n(97)),u=new l(n(98)),h={BASIC:c,MATERIAL_DESIGN:u},f=u,d={get default(){return f},set default(t){f=d.of(t)||f},get MATERIAL_DESIGN(){return u},get BASIC(){return c},theme:a,of:function(t){if(!t)return null;if("string"==typeof t){var e=i(d.choices,t);return e||null}return t instanceof l?t:new l(t)},get choices(){return o(h,s)}};t.exports=d},function(t,e,n){var r=n(0),o=r.array,i=r.isDef,a=r.isPromise,l=r.getOrApply,s=r.applyChainSafe,c=r.emptyFn,u=n(50),h=n(13),f={UPDATE_LENGTH:"update_length",UPDATED_LENGTH:"updated_length",UPDATED_ORDER:"updated_order"};function d(t,e){return t=l(t),a(t)&&(t=t.then(function(t){return a(t)||e(t),d(t,e)}),e(t)),t}function v(t,e){if(!t._sortedIndexMap)return e;var n=t._sortedIndexMap[e];return i(n)?n:e}var g=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._get=n.get&&n.get.bind(n)||void 0,t._length=n.length||0,t._sortedIndexMap=!1,t}return _inherits(e,h),_createClass(e,null,[{key:"ofArray",value:function(t){return new e({get:function(e){return t[e]},length:t.length})}},{key:"EVENT_TYPE",get:function(){return f}}]),_createClass(e,[{key:"get",value:function(t){return this.getOriginal(v(this,t))}},{key:"getField",value:function(t,e){return this.getOriginalField(v(this,t),e)}},{key:"hasField",value:function(t,e){return this.hasOriginalField(v(this,t),e)}},{key:"setField",value:function(t,e,n){return this.setOriginalField(v(this,t),e,n)}},{key:"sort",value:function(t,e){var n=this,r=new Array(this._length),o="desc"!==e?function(t,e){return t===e?0:t>e?1:-1}:function(t,e){return t===e?0:t<e?1:-1};return u.sortPromise(function(t){return i(r[t])?r[t]:r[t]=t},function(t,e){r[t]=e},this._length,o,function(e){return n.getOriginalField(e,t)}).then(function(){n._sortedIndexMap=r,n.fireListeners(f.UPDATED_ORDER)})}},{key:"dispose",value:function(){_get(_getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"getOriginal",value:function(t){var e=this;return d(this._get(t),function(n){e.recordPromiseCallBackInternal(t,n)})}},{key:"getOriginalField",value:function(t,e){var n=this;if(i(e))return function t(e,n,r){if(i(e)){if(a(e))return e.then(function(e){return t(e,n,r)});if(n in e)return d(e[n],r);if("function"==typeof n)return d(n(e),r);var o="".concat(n).split(".");return o.length<=1?d(e[n],r):d(s.apply(void 0,[e,function(e,n){return t(e,n,c)}].concat(_toConsumableArray(o))),r)}}(this.getOriginal(t),e,function(r){n.fieldPromiseCallBackInternal(t,e,r)})}},{key:"hasOriginalField",value:function(t,e){return!!i(e)&&("function"==typeof e||e in this.getOriginal(t))}},{key:"setOriginalField",value:function(t,e,n){if(i(e))return function(t,e,n){if(e in t)t[e]=n;else{if("function"==typeof e)return e(t,n);if("string"==typeof e)for(var r="".concat(e).split("."),o=t,i=r.length,a=0;a<i;a++){var l=r[a];a===i-1?o[l]=n:o=o[l]||(o[l]={})}else t[e]=n}return!0}(this.getOriginal(t),e,n)}},{key:"fieldPromiseCallBackInternal",value:function(t,e,n){}},{key:"recordPromiseCallBackInternal",value:function(t,e){}},{key:"length",get:function(){return this._length},set:function(t){if(this._length!==t){var e=this.fireListeners(f.UPDATE_LENGTH,t);o.findIndex(e,function(t){return!t})>=0||(this._length=t,this.fireListeners(f.UPDATED_LENGTH,this._length))}}}]),e}();g.EMPTY=new g({length:0}),t.exports=g},function(t,e,n){function r(){return window.Path2D||n(109)}t.exports={fill:function(t,e,n,o,i,a){e.save();try{var l=t.width,s=t.height,c=t.ud,u=t.x,h=void 0===u?0:u,f=t.y,d=void 0===f?0:f,v=(i=i||l)/l,g=(a=a||s)/(c?-s:s);n=n||0,o=c?(o||0)+-s*g:o||0,e.translate(n,o),e.scale(v,g),0===h&&0===d||e.translate(h,d);var p=r();t.path2d=t.path2d||new p(t.d),e.fill(t.path2d)}finally{e.restore()}},get Path2D(){return r()}}},function(t,e,n){var r=(0,n(0).extend)(n(7).EVENT_TYPE,{CHANGED_VALUE:"changed_value"});t.exports=r},function(t,e,n){var r=function(){function t(e){_classCallCheck(this,t),this._grid=e}return _createClass(t,[{key:"dispose",value:function(){this.detachMessageElement(),this._messageElement&&this._messageElement.dispose(),this._messageElement=null}},{key:"_getMessageElement",value:function(){return this._messageElement||(this._messageElement=this.createMessageElementInternal())}},{key:"createMessageElementInternal",value:function(){}},{key:"drawCellMessageInternal",value:function(t,e,n,r,o){}},{key:"attachMessageElement",value:function(t,e,n){this._getMessageElement().attach(this._grid,t,e,n)}},{key:"moveMessageElement",value:function(t,e){this._getMessageElement().move(this._grid,t,e)}},{key:"detachMessageElement",value:function(){this._getMessageElement()._detach()}},{key:"drawCellMessage",value:function(t,e,n,r,o){this.drawCellMessageInternal(t,e,n,r,o)}}]),t}();t.exports=r},function(t,e,n){var r=n(4),o=n(10).createElement,i="cheetah-grid__message-element",a="".concat(i,"__message"),l="".concat(i,"--hidden"),s="".concat(i,"--shown");var c=function(){function t(){_classCallCheck(this,t),this._handler=new r;var e=this._rootElement=function(){n(127);var t=o("div",{classList:[i,l]}),e=o("span",{classList:[a]});return t.appendChild(e),t}();this._messageElement=e.querySelector(".".concat(a))}return _createClass(t,[{key:"dispose",value:function(){this.detach(),this._handler.dispose(),this._rootElement=null,this._messageElement=null}},{key:"attach",value:function(t,e,n,r){var o=this._rootElement,i=this._messageElement;o.classList.remove(s),o.classList.add(l),this._attachCell(t,e,n)?(o.classList.add(s),o.classList.remove(l),i.textContent=r.message):this._detach()}},{key:"move",value:function(t,e,n){var r=this._rootElement;this._attachCell(t,e,n)?(r.classList.add(s),r.classList.remove(l)):this._detach()}},{key:"detach",value:function(){this._detach()}},{key:"_detach",value:function(){var t=this._rootElement;t.parentElement&&(t.parentElement.removeChild(t),t.classList.remove(s),t.classList.add(l))}},{key:"_attachCell",value:function(t,e,n){var r=this._rootElement,o=t.getAttachCellArea(e,n),i=o.element,a=o.rect,l=a.bottom,s=a.left,c=a.width,u=t.frozenRowCount,h=t.frozenColCount;if(n>=u&&u>0){if(l<t.getAttachCellArea(e,u-1).rect.bottom)return!1}else if(l<0)return!1;if(e>=h&&h>0){if(s<t.getAttachCellArea(h-1,n).rect.right)return!1}else if(s<0)return!1;var f=i.offsetHeight,d=i.offsetWidth;return!(f<l)&&(!(d<s)&&(r.style.top="".concat(l.toFixed(),"px"),r.style.left="".concat(s.toFixed(),"px"),r.style.width="".concat(c.toFixed(),"px"),r.parentElement!==i&&i.appendChild(r),!0))}}]),t}();t.exports=c},function(t,e,n){var r=n(17);t.exports={drawExclamationMarkBox:function(t,e,n){var o=e.bgColor,i=e.color,a=t.getContext(),l=t.getRect();a.fillStyle=o;var s=l.copy();s.left=s.right-24,a.fillRect(s.left,s.top,s.width,s.height-1);var c=i,u=s.left+(s.width-4)/2,h=s.top+(s.height-20)/2;n.fillRectWithState(new r(u,h,4,12),t,{fillColor:c}),n.fillRectWithState(new r(u,h+16,4,4),t,{fillColor:c})},drawInfomationMarkBox:function(t,e,n){var o=e.bgColor,i=e.color,a=t.getContext(),l=t.getRect();a.fillStyle=o;var s=l.copy();s.left=s.right-24,a.fillRect(s.left,s.top,s.width,s.height-1);var c=i,u=s.left+(s.width-4)/2,h=s.top+(s.height-20)/2;n.fillRectWithState(new r(u,h,4,4),t,{fillColor:c}),n.fillRectWithState(new r(u,h+8,4,12),t,{fillColor:c})}}},function(t,e,n){var r,o=function(){n(63),r=function(){var t=document.createElement("div"),e=t.style;e.position="absolute",e.height="9999px",e.width="calc(100vw - 100%)",e.opacity=0,t.textContent="x",document.body.appendChild(t);var n=document.defaultView.getComputedStyle(t,"").width;return document.body.removeChild(t),parseInt(n,10)}()||10;var t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-name","cheetah-grid"),t.innerHTML="\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ".concat(r,"px;\n\theight: ").concat(r,"px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ").concat(r,"px);\n\twidth: calc(100% - ").concat(r,"px);\n\theight: -webkit-calc(100% - ").concat(r,"px);\n\theight: calc(100% - ").concat(r,"px);\n}\n\t\t"),document.head.appendChild(t)},i={initDocument:function(){i.initDocument=function(){},o()},getScrollBarSize:function(){return r}};t.exports=i},function(t,e,n){var r=n(8),o=r.calcBasePosition,i=r.calcStartPosition,a=r.getFontSize,l=Math.ceil,s=Math.PI;function c(t,e,n,r,o,i){t.beginPath(),t.arc(e+i,n+i,i,-s,-.5*s,!1),t.arc(e+r-i,n+i,i,-.5*s,0,!1),t.arc(e+r-i,n+o-i,i,0,.5*s,!1),t.arc(e+i,n+o-i,i,.5*s,s,!1),t.closePath()}function u(t,e,n,r,o,i){c(t,e,n,r,o,i),t.fill()}function h(t,e,n,r,o,i){c(t,e,n,r,o,i),t.stroke()}function f(t){return{width:a(t,null).width}}var d={roundRect:c,fillRoundRect:u,strokeRoundRect:h,drawCheckbox:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.uncheckBgColor,a=void 0===i?"#FFF":i,s=o.checkBgColor,c=void 0===s?"rgb(76, 73, 72)":s,d=o.borderColor,v=void 0===d?"#000":d,g=o.boxSize,p=void 0===g?f(t).width:g,_="number"==typeof r?r>1?1:r:1;t.save();try{if(t.fillStyle=r?c:a,u(t,l(e)-1,l(n)-1,l(p+1),l(p+1),p/5),t.lineWidth=1,t.strokeStyle=v,h(t,l(e)-.5,l(n)-.5,l(p),l(p),p/5),r){t.lineWidth=l(p/10),t.strokeStyle=a;var y=p/4,C=p/2*.9,m=e+.2*p,w=n+p/2;_<.5&&(y*=2*_),t.beginPath(),t.moveTo(m,w),t.lineTo(m+y,w+y),_>.5&&(_<1&&(C*=2*(_-.5)),t.lineTo(m+y+C,w+y-C)),t.stroke()}}finally{t.restore()}},measureCheckbox:f,fillTextRect:function(t,e,n,r,i,a){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=l.offset,c=void 0===s?2:s,u=l.padding,h={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};t.save();try{t.beginPath(),t.rect(h.left,h.top,h.width,h.height),t.clip();var f=o(t,h,{offset:c,padding:u});t.fillText(e,f.x,f.y)}finally{t.restore()}},drawButton:function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=i.backgroundColor,s=void 0===a?"#FFF":a,c=i.bgColor,h=void 0===c?s:c,f=i.radius,d=void 0===f?4:f,v=i.shadow,g=void 0===v?{}:v;t.save();try{if(t.fillStyle=h,g){var p=g.color,_=void 0===p?"rgba(0, 0, 0, 0.24)":p,y=g.blur,C=void 0===y?1:y,m=g.offsetX,w=void 0===m?0:m,b=g.offsetY,x=void 0===b?2:b,k=g.offset,E=(k=void 0===k?{}:k).x,I=void 0===E?w:E,L=k.y,S=void 0===L?x:L;t.shadowColor=_,t.shadowBlur=C,t.shadowOffsetX=I,t.shadowOffsetY=S}u(t,l(e),l(n),l(r),l(o),d)}finally{t.restore()}},drawInlineImageRect:function(t,e,n,r,o,a,l,s,c,u,h,f){var d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{},v=d.offset,g=void 0===v?2:v,p=d.padding,_={left:c,top:u,width:h,height:f,right:c+h,bottom:u+f};t.save();try{t.beginPath(),t.rect(_.left,_.top,_.width,_.height),t.clip();var y=i(t,_,l,s,{offset:g,padding:p});t.drawImage(e,n,r,o,a,y.x,y.y,l,s)}finally{t.restore()}},strokeColorsRect:function(t,e,n,r,o,i){e[0]===e[1]&&e[0]===e[2]&&e[0]===e[3]?e[0]&&(t.strokeStyle=e[0],t.strokeRect(n,r,o,i)):function(n){for(var r=0;r<e.length;r++){var o=e[r],i=e[r-1];if(o){if(i!==o){i&&(t.strokeStyle=i,t.stroke());var a=n[r];t.beginPath(),t.moveTo(a.x,a.y)}var l=n[r+1];t.lineTo(l.x,l.y)}else i&&(t.strokeStyle=i,t.stroke())}var s=e[e.length-1];s&&(t.strokeStyle=s,t.stroke())}([{x:n,y:r},{x:n+o,y:r},{x:n+o,y:r+i},{x:n,y:r+i},{x:n,y:r}])}};t.exports=d},function(t,e,n){var r=n(69),o=n(84),i=n(38);t.exports={action:r,type:o,style:i}},function(t,e,n){var r=n(34),o=r.bindCellClickAction,i=r.bindCellKeyAction,a=n(19),l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._action=n.action,t}return _inherits(e,a),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"getState",value:function(t){return{}}},{key:"bindGridEvent",value:function(t,e,n){var r=this,a=this.getState(t),l=function(e){if(!r.disabled){var n=t.getRowRecord(e.row);r._action(n)}};return _toConsumableArray(o(t,e,n,{action:l,mouseOver:function(e){return!r.disabled&&(a.mouseActiveCell={col:e.col,row:e.row},t.invalidateCell(e.col,e.row),!0)},mouseOut:function(e){delete a.mouseActiveCell,t.invalidateCell(e.col,e.row)}})).concat(_toConsumableArray(i(t,e,n,{action:l})))}},{key:"action",get:function(){return this._action},set:function(t){this._action=t}}]),e}();t.exports=l},function(t,e,n){var r=n(0),o=r.isPromise,i=r.event.cancel,a=n(7).EVENT_TYPE,l=a.CLICK_CELL,s=a.MOUSEOVER_CELL,c=a.MOUSEOUT_CELL,u=a.KEYDOWN,h=13;t.exports={bindCellClickAction:function(t,e,n,r){var i=r.action,a=r.mouseOver,u=r.mouseOut;return[t.listen(l,function(e){n.isTarget(e.col,e.row)&&(o(t.getRowRecord(e.row))||i({col:e.col,row:e.row}))}),t.listen(s,function(e){n.isTarget(e.col,e.row)&&(o(t.getRowRecord(e.row))||a&&!a({col:e.col,row:e.row})||(t.getElement().style.cursor="pointer"))}),t.listen(c,function(e){n.isTarget(e.col,e.row)&&(u&&u({col:e.col,row:e.row}),t.getElement().style.cursor="")})]},bindCellKeyAction:function(t,e,n,r){var a=r.action,l=r.acceptKeys,s=void 0===l?[]:l;return s=_toConsumableArray(s).concat([h]),[t.listen(u,function(e,r){if(-1!==s.indexOf(e)){var l=t.selection.select;n.isTarget(l.col,l.row)&&(o(t.getRowRecord(l.row))||(a({col:l.col,row:l.row}),i(r)))}})]}}},function(t,e,n){function r(t,e,n,r){var o;return t*=3,e*=3,n*=3,r*=3,function(i){var a,l,s,c,u,h;if(i<0||1<i)throw new Error(i);a=o||i;do{a+=.5*(h=i-(t*(s=(l=1-a)*l)*a+n*l*(c=a*a)+(u=c*a)))}while(1e-4<Math.abs(h));return o=a,e*s*a+r*l*c+u}}var o={linear:function(t){return t},easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1)},i=window.requestAnimationFrame||setTimeout;function a(){return Date.now()}t.exports=function(t,e,n){var r=a();n?"string"==typeof n&&(n=o[n]):n=o.easeInOut;var l=!1,s=function(o,s){return function c(){var u=a()-r;l?s&&s():u>=t?(e(1),o&&o()):(e(n(u/t)),i(c,1))}},c=function(){l=!0};if(window.Promise){var u=new window.Promise(function(t,n){var r=s(t,n);e(0),r()});return u.cancel=c,u}var h=s(function(){},function(){});return e(0),h(),{cancel:c}}},function(t,e,n){var r=n(14),o=n(7).EVENT_TYPE,i=o.INPUT_CELL,a=o.EDITABLEINPUT_CELL,l=o.SELECTED_CELL,s=o.DBLCLICK_CELL,c=o.DBLTAP_CELL,u=o.KEYDOWN,h=o.MODIFY_STATUS_EDITABLEINPUT_CELL,f=o.SCROLL,d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,r),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"onInputCellInternal",value:function(t,e,n){throw new Error}},{key:"onOpenCellInternal",value:function(t,e){throw new Error}},{key:"onChangeSelectCellInternal",value:function(t,e,n){throw new Error}},{key:"onSetInputAttrsInternal",value:function(t,e,n){throw new Error}},{key:"onGridScrollInternal",value:function(t){throw new Error}},{key:"bindGridEvent",value:function(t,e,n){var r=this,o=function(e){r.readOnly||r.disabled||r.onOpenCellInternal(t,e)};return[t.listen(i,function(e){n.isTarget(e.col,e.row)&&function(e,n){r.readOnly||r.disabled||r.onInputCellInternal(t,e,n)}({col:e.col,row:e.row},e.value)}),t.listen(s,function(t){n.isTarget(t.col,t.row)&&o({col:t.col,row:t.row})}),t.listen(c,function(t){n.isTarget(t.col,t.row)&&(o({col:t.col,row:t.row}),t.event.preventDefault(),t.event.stopPropagation())}),t.listen(u,function(e,r){if(113===e||13===e){var i=t.selection.select;n.isTarget(i.col,i.row)&&o({col:i.col,row:i.row})}}),t.listen(l,function(e){r.onChangeSelectCellInternal(t,{col:e.col,row:e.row},e.selected)}),t.listen(f,function(){r.onGridScrollInternal(t)}),t.listen(a,function(t){return!!n.isTarget(t.col,t.row)&&(!r.readOnly&&!r.disabled)}),t.listen(h,function(e){n.isTarget(e.col,e.row)&&(r.readOnly||r.disabled||r.onSetInputAttrsInternal(t,{col:e.col,row:e.row},e.input))})]}}]),e}();t.exports=d},function(t,e,n){(function(e){t.exports={normalize:function t(n){if(!n)return[];if(e(n))return n;if("string"==typeof n)return t(JSON.parse(n));var r=[];for(var o in n)r.push({value:o,caption:n[o]});return r}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(21),o=n(3),i=n(39),a=n(40),l=n(41),s=n(42),c=n(43),u=n(44),h=n(45),f=n(46),d={get EVENT_TYPE(){return r.EVENT_TYPE},get BaseStyle(){return r},get Style(){return o},get NumberStyle(){return i},get CheckStyle(){return a},get ButtonStyle(){return l},get ImageStyle(){return s},get IconStyle(){return c},get PercentCompleteBarStyle(){return u},get MultilineTextStyle(){return h},get MenuStyle(){return f},of:function(t,e,n){return t?t instanceof o?t:"function"==typeof t?d.of(t(e),e,n):e&&t in e?d.of(e[t],e,n):new n(t):n.DEFAULT}};t.exports=d},function(t,e,n){var r,o=n(3);var i=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){var e=t.textAlign,n=void 0===e?"right":e;return t.textAlign=n,t}(t)))}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}}]),e}();t.exports=i},function(t,e,n){var r,o=n(20);var i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t}(n)));var r=n.uncheckBgColor,o=n.checkBgColor,i=n.borderColor;return t._uncheckBgColor=r,t._checkBgColor=o,t._borderColor=i,t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"uncheckBgColor",get:function(){return this._uncheckBgColor},set:function(t){this._uncheckBgColor=t,this.doChangeStyle()}},{key:"checkBgColor",get:function(){return this._checkBgColor},set:function(t){this._checkBgColor=t,this.doChangeStyle()}},{key:"borderColor",get:function(){return this._borderColor},set:function(t){this._borderColor=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r,o=n(3);var i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t}(n)));var r=n.buttonBgColor;return t._buttonBgColor=r,t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"buttonBgColor",get:function(){return this._buttonBgColor},set:function(t){this._buttonBgColor=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r,o=n(20);var i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t}(n))))._imageSizing=n.imageSizing,t._margin=n.margin||4,t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"imageSizing",get:function(){return this._imageSizing},set:function(t){this._imageSizing=t,this.doChangeStyle()}},{key:"margin",get:function(){return this._margin},set:function(t){this._margin=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r,o=n(3);var i=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t}(t)))}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}}]),e}();t.exports=i},function(t,e,n){var r,o=n(3),i=function(t){return t>80?"#20a8d8":t>50?"#4dbd74":t>20?"#ffc107":"#f86c6b"},a=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._barColor=n.barColor||i,t._barBgColor=n.barBgColor||"#f0f3f5",t._barHeight=n.barHeight||3,t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"barColor",get:function(){return this._barColor},set:function(t){this._barColor=t,this.doChangeStyle()}},{key:"barBgColor",get:function(){return this._barBgColor},set:function(t){this._barBgColor=t,this.doChangeStyle()}},{key:"barHeight",get:function(){return this._barHeight},set:function(t){this._barHeight=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r,o=n(3);var i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){var e=t.textBaseline,n=void 0===e?"top":e;return t.textBaseline=n,t}(n))))._lineHeight=n.lineHeight||"1em",t._autoWrapText=n.autoWrapText||!1,t._lineClamp=n.lineClamp,t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight=t,this.doChangeStyle()}},{key:"lineClamp",get:function(){return this._lineClamp},set:function(t){this._lineClamp=t,this.doChangeStyle()}},{key:"autoWrapText",get:function(){return this._autoWrapText},set:function(t){this._autoWrapText=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r,o=n(3),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n));var r=n.appearance;return t._appearance=r,t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"appearance",get:function(){return this._appearance||"menulist-button"},set:function(t){this._appearance=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r=n(0).then,o=n(89),i={};function a(t){if(!window.Promise)return console.error("Promise is not loaded. load Promise before this process."),{then:function(){return this}};var e=new Image,n=new window.Promise(function(t){e.onload=function(){t(e)}});return e.onerror=function(e){var n=t.length>200?"".concat(t.substr(0,200),"..."):t;throw console.warn("cannot load: ".concat(n)),new Error("IMAGE LOAD ERROR: ".concat(n))},e.src=function(t){return-1!==t.search(/^(data:)/)}(t)?t:"".concat(t,"?").concat(Date.now()),n}t.exports={loadImage:a,getCacheOrLoad:function(t,e,n){return function(t,e){return r(e,function(e){var n=t.get(e);if(n)return n;var r=a(e).then(function(n){return t.put(e,n),n});return t.put(e,r),r})}(i[t]||(i[t]=new o(e)),n)}}},function(t,e,n){t.exports={}},function(t,e,n){var r=n(24),o=n(99),i=n(100);t.exports={DataSource:r,CachedDataSource:o,FilterDataSource:i}},function(t,e,n){var r=n(0).isPromise;function o(t){return t.then(function(t){return r(t)?o(t):t})}function i(t,e,n){return new Promise(function(i){for(var a=[],l=new Array(n),s=function(e){var n=t(e),i={v:n,f:n};l[e]=i,r(n)&&a.push(o(n).then(function(t){i.v=t,i.f=t}))},c=0;c<n;c++)s(c);Promise.all(a).then(function(){return function(t,e){if(!e)return Promise.resolve(t);return new Promise(function(n){for(var i=t.length,a=[],l=function(n){var i=t[n];i.f=e(i.v),r(i.f)&&a.push(o(i.f).then(function(t){i.f=t}))},s=0;s<i;s++)l(s);Promise.all(a).then(function(){return n(t)})})}(l,e)}).then(i)})}var a={sort:function(t,e,n,r,o){var i=function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t(r);return n}(t,n);o?i.sort(function(t,e){return r(o(t),o(e))}):i.sort(r);for(var a=0;a<n;a++)e(a,i[a])},sortArray:function(t,e){Array.prototype.sort.call(t,e)},sortPromise:function(t,e,n,r,o){if(window.Promise)return i(t,o,n).then(function(t){t.sort(function(t,e){return r(t.f,e.f)});for(var o=0;o<n;o++)e(o,t[o].v)});a.sort(t,e,n,r,o);var l={then:function(t){return t(),l},catch:function(){return l}};return l}};t.exports=a},function(t,e,n){(function(e){var r=n(8),o=r.calcStartPosition,i=r.getFontSize,a=n(102),l=n(31),s=n(23),c=n(56).colorToRGB,u=n(17),h=n(0),f=h.getChainSafe,d=h.getOrApply,v=h.style.toBoxArray,g=h.isDef,p=n(52),_=n(18),y=a.of("");function C(t,e,n,r,o){return d(t,{col:e,row:n,grid:r,context:o})}function m(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o,i=f.apply(void 0,[t.theme].concat(n));return g(i)?"function"!=typeof i?i:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=i.apply(void 0,e);return g(a)?a:(o=o||f.apply(void 0,[s.default].concat(n)),d.apply(void 0,[o].concat(e)))}:f.apply(void 0,[s.default].concat(n))}function w(t,e,n,r,o,i,a,s,c){function u(e,u,h){if(e.canDraw()){t.save();try{t.fillStyle=C(e.color()||t.fillStyle,a,s,c,t),t.font=e.font()||t.font,e.draw({ctx:t,canvashelper:l,rect:n,offset:r,offsetLeft:u,offsetRight:h,offsetTop:o,offsetBottom:i})}finally{t.restore()}}else e.onReady(function(){return c.invalidateCell(a,s)})}if(1===e.length){u(e[0],0,0)}else{var h=e.map(function(e){return(e.width({ctx:t})||0)-0}),f=h.reduce(function(t,e){return t+e}),d=0;e.forEach(function(t,e){var n=h[e];u(t,d,f-=n),d+=n})}}function b(t,e){return a.buildInlines(t,e)}function x(t){return a.string(t)}function k(t){return E(t)&&"ellipsis"!==t&&1===(t=t.trim()).length?a.of(t[0]):y}function E(t){return t&&"clip"!==t&&"string"==typeof t}function I(t,e,n){for(var r=n-3,o=0,i=0;i<e.length;i++){var a=(e[i].width({ctx:t})||0)-0;if(o+a>r)return{index:i,lineWidth:o,remWidth:r-o};o+=a}return null}function L(t,e,n){var r=I(t,e,n);if(!r)return{beforeInlines:e,overflow:!1,afterInlines:[]};var o=r.index,i=r.remWidth,a=e[o],l=e.slice(0,o),s=[];if(a.canBreak()){var c=a.breakWord(t,i),u=c.before,h=c.after;if(!u&&!l.length){var f=a.breakAll(t,i);u=f.before,h=f.after}if(!u&&!l.length){var d=a.splitIndex(1);u=d.before,h=d.after}u&&l.push(u),h&&s.push(h),s.push.apply(s,_toConsumableArray(e.slice(o+1)))}else l.length||l.push(a),s.push.apply(s,_toConsumableArray(e.slice(l.length)));return{beforeInlines:l,overflow:!0,afterInlines:s}}function S(t,e,n,r){var o=I(t,e,n);if(!o)return{inlines:e,overflow:!1};var i=o.index,a=o.lineWidth,l=e[i],s=k(r),c=n-a-s.width({ctx:t}),u=e.slice(0,i);if(l.canBreak()){var h=l.breakAll(t,c).before;h&&u.push(h)}return u.push(s),{inlines:u,overflow:!0}}function T(t,e,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=a.offset,s=a.color,c=a.textAlign,u=a.textBaseline,h=a.font,f=a.textOverflow,d=a.icons;e.fillStyle=C(s,o,i,t,e),e.textAlign=c,e.textBaseline=u,e.font=h||e.font;var v=b(d,n);if(E(f)&&function(t,e,n){return!!I(t,e,n)}(e,v,r.width)){var g=S(e,v,r.width,f),p=g.inlines,_=g.overflow;v=p,t.setCellOverflowText(o,i,_&&x(n))}else t.setCellOverflowText(o,i,!1);w(e,v,r,l,0,0,o,i,t)}var R=function(){function t(e){_classCallCheck(this,t),this._grid=e}return _createClass(t,[{key:"getThemeColor",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.apply(void 0,[this._grid].concat(e))}},{key:"font",get:function(){return m(this._grid,"font")}},{key:"underlayBackgroundColor",get:function(){return m(this._grid,"underlayBackgroundColor")}},{key:"color",get:function(){return m(this._grid,"color")}},{key:"frozenRowsColor",get:function(){return m(this._grid,"frozenRowsColor")}},{key:"defaultBgColor",get:function(){return m(this._grid,"defaultBgColor")}},{key:"frozenRowsBgColor",get:function(){return m(this._grid,"frozenRowsBgColor")}},{key:"selectionBgColor",get:function(){return m(this._grid,"selectionBgColor")}},{key:"borderColor",get:function(){return m(this._grid,"borderColor")}},{key:"frozenRowsBorderColor",get:function(){return m(this._grid,"frozenRowsBorderColor")}},{key:"highlightBorderColor",get:function(){return m(this._grid,"highlightBorderColor")}},{key:"checkbox",get:function(){var t=this._grid;return this._checkbox||(this._checkbox={get uncheckBgColor(){return m(t,"checkbox","uncheckBgColor")},get checkBgColor(){return m(t,"checkbox","checkBgColor")},get borderColor(){return m(t,"checkbox","borderColor")}})}},{key:"button",get:function(){var t=this._grid;return this._button||(this._button={get color(){return m(t,"button","color")},get bgColor(){return m(t,"button","bgColor")}})}},{key:"header",get:function(){var t=this._grid;return this._header||(this._header={get sortArrowColor(){return m(t,"header","sortArrowColor")}})}}]),t}();function A(t,n,r,o,i,a){if(e(n)){var s=v(n);l.strokeColorsRect(t,s,r,o,i,a)}else n&&(t.strokeStyle=n,t.strokeRect(r,o,i,a))}var O=function(){function t(e){_classCallCheck(this,t),this._grid=e,this._theme=new R(e)}return _createClass(t,[{key:"createCalculator",value:function(t,e){return{calcWidth:function(n){return _.toPx(n,{get full(){return t.getRect().width},get em(){return i(t.getContext(),e).width}})},calcHeight:function(n){return _.toPx(n,{get full(){return t.getRect().height},get em(){return i(t.getContext(),e).height}})}}}},{key:"getColor",value:function(t,e,n,r){return C(t,e,n,this._grid,r)}},{key:"toBoxArray",value:function(t){return v(t)}},{key:"toBoxPixelArray",value:function(t,n,r){if("string"==typeof t||e(t)){var o=this.createCalculator(n,r),i=v(t);return[o.calcHeight(i[0]),o.calcWidth(i[1]),o.calcHeight(i[2]),o.calcWidth(i[3])]}return v(t)}},{key:"drawWithClip",value:function(t,e){var n=t.getDrawRect();if(n){var r=t.getContext();r.save();try{r.beginPath(),r.rect(n.left,n.top,n.width,n.height),r.clip(),e(r)}finally{r.restore()}}}},{key:"drawBorderWithClip",value:function(t,e){var n=t.getDrawRect();if(n){var r=t.getRect(),o=t.getContext();o.save();try{o.beginPath();var i=n.left,a=n.width;n.left===r.left&&(i+=-1,a+=1);var l=n.top,s=n.height;n.top===r.top&&(l+=-1,s+=1),o.rect(i,l,a,s),o.clip(),e(o)}finally{o.restore()}}}},{key:"text",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.padding,i=r.offset,a=void 0===i?2:i,l=r.color,s=r.textAlign,c=void 0===s?"left":s,h=r.textBaseline,f=void 0===h?"middle":h,d=r.font,v=r.textOverflow,g=void 0===v?"clip":v,p=r.icons,_=e.getRect(),y=e.col,C=e.row;if(!l){l=this.theme.color;var m=this._grid.isFrozenCell(y,C);m&&m.row&&(l=this.theme.frozenRowsColor)}this.drawWithClip(e,function(r){if(o){o=n.toBoxPixelArray(o,e,d);var i=_.left+o[3],s=_.top+o[0],h=_.width-o[1]-o[3],v=_.height-o[0]-o[2];_=new u(i,s,h,v)}T(n._grid,r,t,_,y,C,{offset:a,color:l,textAlign:c,textBaseline:f,font:d,textOverflow:g,icons:p})})}},{key:"multilineText",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.padding,a=r.offset,l=void 0===a?2:a,s=r.color,c=r.textAlign,h=void 0===c?"left":c,f=r.textBaseline,d=void 0===f?"middle":f,v=r.font,g=r.lineHeight,p=void 0===g?"1em":g,_=r.autoWrapText,y=void 0!==_&&_,m=r.lineClamp,I=void 0===m?0:m,T=r.textOverflow,R=void 0===T?"clip":T,A=r.icons,O=e.getRect(),M=e.col,P=e.row;if(!s){s=this.theme.color;var B=this._grid.isFrozenCell(M,P);B&&B.row&&(s=this.theme.frozenRowsColor)}this.drawWithClip(e,function(r){if(o){o=n.toBoxPixelArray(o,e,v);var a=O.left+o[3],c=O.top+o[0],f=O.width-o[1]-o[3],g=O.height-o[0]-o[2];O=new u(a,c,f,g)}var _=n.createCalculator(e,v);p=_.calcHeight(p),function(t,e,n,r,o,a){var l,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=s.offset,u=s.color,h=s.textAlign,f=s.textBaseline,d=s.font,v=s.lineHeight,g=s.autoWrapText,p=s.lineClamp,_=s.textOverflow,y=s.icons;if(e.fillStyle=C(u,o,a,t,e),e.textAlign=h,e.textBaseline=f,e.font=d||e.font,"auto"===p){var m=r.height-2*c-2;p=Math.max(Math.floor(m/v),1)}if(g||p>0||E(_)){var I=r.width;l=[];var T=p>0?function(r,i){if(l.length+1>=p){if(0===r.length&&i)l.push([k(_)]),t.setCellOverflowText(o,a,n.map(x).join("\n"));else{var s=S(e,r,I,_),c=s.inlines,u=s.overflow;l.push(i&&!u?c.concat([k(_)]):c),(u||i)&&t.setCellOverflowText(o,a,n.map(x).join("\n"))}return!1}return!0}:function(){return!0},R=g?function(t,n){if(!T(t,n))return!1;for(;t.length;){if(!T(t,n))return!1;var r=L(e,t,I),o=r.beforeInlines,i=r.afterInlines;l.push(o),t=i}return!0}:E(_)?function(r,i){if(!T(r,i))return!1;var s=S(e,r,I,_),c=s.inlines,u=s.overflow;return l.push(c),u&&t.setCellOverflowText(o,a,n.map(x).join("\n")),!0}:function(t,e){return!!T(t,e)&&(l.push(t),!0)};t.setCellOverflowText(o,a,!1);for(var A=0;A<n.length;A++){var O=n[A];if(!R(b(0===A?y:void 0,O),A+1<n.length))break}}else t.setCellOverflowText(o,a,!1),l=n.map(function(t,e){return b(0===e?y:void 0,t)});var M=0,P=v*(l.length-1);if("top"===e.textBaseline||"hanging"===e.textBaseline){var B=i(e,e.font).height,D=(v-B)/2;M+=D,P-=D}else if("bottom"===e.textBaseline||"alphabetic"===e.textBaseline||"ideographic"===e.textBaseline){var F=i(e,e.font).height,z=(v-F)/2;M-=z,P+=z}l.forEach(function(n){w(e,n,r,c,M,P,o,a,t),M+=v,P-=v})}(n._grid,r,t,O,M,P,{offset:l,color:s,textAlign:h,textBaseline:d,font:v,lineHeight:p,autoWrapText:y,lineClamp:I,textOverflow:R,icons:A})})}},{key:"fillText",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.color,a=o.textAlign,l=void 0===a?"left":a,s=o.textBaseline,c=void 0===s?"top":s,u=o.font,h=r.col,f=r.row;if(!i){i=this.theme.color;var d=this._grid.isFrozenCell(h,f);d&&d.row&&(i=this.theme.frozenRowsColor)}var v=r.getContext();v.save();try{v.fillStyle=C(i,h,f,this._grid,v),v.textAlign=l,v.textBaseline=c,v.font=u||v.font,v.fillText(t,e,n)}finally{v.restore()}}},{key:"fillCell",value:function(t){var e=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fillColor,r=void 0===n?this.theme.defaultBgColor:n,o=t.getRect();this.drawWithClip(t,function(n){var i=t.col,a=t.row;n.fillStyle=C(r,i,a,e._grid,n),n.beginPath(),n.rect(o.left,o.top,o.width,o.height),n.fill()})}},{key:"fillCellWithState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.fillColor=this.getFillColorState(t,e),this.fillCell(t,e)}},{key:"fillRect",value:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fillColor,r=void 0===n?this.theme.defaultBgColor:n,o=e.getContext();o.save();try{var i=e.col,a=e.row;o.fillStyle=C(r,i,a,this._grid,o),o.beginPath(),o.rect(t.left,t.top,t.width,t.height),o.fill()}finally{o.restore()}}},{key:"fillRectWithState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.fillColor=this.getFillColorState(e,n),this.fillRect(t,e,n)}},{key:"getFillColorState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getSelectState(),r=t.col,o=t.row;if(!n.selected&&n.selection)return this.theme.selectionBgColor;if(e.fillColor)return e.fillColor;var i=this._grid.isFrozenCell(r,o);return i&&i.row?this.theme.frozenRowsBgColor:this.theme.defaultBgColor}},{key:"border",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.borderColor,o=void 0===r?this.theme.borderColor:r,i=n.lineWidth,a=void 0===i?1:i,l=t.getRect();this.drawBorderWithClip(t,function(n){var r=t.col,i=t.row,s=C(o,r,i,e._grid,n);if(1===a)n.lineWidth=1,A(n,s,l.left-.5,l.top-.5,l.width,l.height);else if(2===a)n.lineWidth=2,A(n,s,l.left,l.top,l.width-1,l.height-1);else{n.lineWidth=a;var c=a/2-1;A(n,s,l.left+c,l.top+c,l.width-a+1,l.height-a+1)}})}},{key:"borderWithState",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getRect(),o=t.getSelectState(),i=t.col,a=t.row;if(o.selected)n.borderColor=this.theme.highlightBorderColor,n.lineWidth=2,this.border(t,n);else{var l=this._grid.isFrozenCell(i,a);l&&l.row&&(n.borderColor=this.theme.frozenRowsBorderColor),n.lineWidth=1,this.border(t,n);var s=this._grid.selection.select;s.col+1===i&&s.row===a?this.drawBorderWithClip(t,function(t){var n=v(C(e.theme.highlightBorderColor,s.col,s.row,e._grid,t));t.lineWidth=1,t.strokeStyle=n[1],t.beginPath(),t.moveTo(r.left-.5,r.top),t.lineTo(r.left-.5,r.bottom),t.stroke()}):s.col===i&&s.row+1===a&&this.drawBorderWithClip(t,function(t){var n=v(C(e.theme.highlightBorderColor,s.col,s.row,e._grid,t));t.lineWidth=1,t.strokeStyle=n[0],t.beginPath(),t.moveTo(r.left,r.top-.5),t.lineTo(r.right,r.top-.5),t.stroke()})}}},{key:"checkbox",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.drawWithClip(e,function(i){var a=e.col,s=e.row;!function(t,e,n,r,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=s.animElapsedTime,h=void 0===u?1:u,f=s.uncheckBgColor,d=void 0===f?a.theme.checkbox.uncheckBgColor:f,v=s.checkBgColor,g=void 0===v?a.theme.checkbox.checkBgColor:v,p=s.borderColor,_=void 0===p?a.theme.checkbox.borderColor:p,y=s.textAlign,C=void 0===y?"center":y,m=s.textBaseline,w=void 0===m?"middle":m,b=l.measureCheckbox(t).width;t.textAlign=C,t.textBaseline=w;var x=o(t,e,b+1,b+1);if(d=a.getColor(d,n,r,t),g=a.getColor(g,n,r,t),_=a.getColor(_,n,r,t),0<h&&h<1){var k=c(d),E=c(g),I=function(t){var e=k[t],n=E[t];if(h>=1)return n;var r=e-n;return Math.ceil(e-r*h)},L=function(t){var e=k[t],n=E[t];if(h>=1)return e;var r=e-n;return Math.ceil(n+r*h)};d=i?d:"rgb(".concat(L("r")," , ").concat(L("g"),", ").concat(L("b"),")"),g="rgb(".concat(I("r")," , ").concat(I("g"),", ").concat(I("b"),")")}l.drawCheckbox(t,x.x,x.y,!!i&&h,{uncheckBgColor:d,checkBgColor:g,borderColor:_})}(i,e.getRect(),a,s,t,n,r)})}},{key:"button",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.bgColor,i=void 0===o?this.theme.button.bgColor:o,a=r.padding,s=r.offset,c=void 0===s?2:s,h=r.color,f=void 0===h?this.theme.button.color:h,d=r.textAlign,v=void 0===d?"center":d,g=r.textBaseline,p=void 0===g?"middle":g,_=r.shadow,y=r.font,C=r.textOverflow,m=void 0===C?"clip":C,w=r.icons,b=e.getRect();this.drawWithClip(e,function(r){var o=e.col,s=e.row;a=n.toBoxPixelArray(a||b.height/8,e,y);var h=b.left+a[3],d=b.top+a[0],g=b.width-a[1]-a[3],C=b.height-a[0]-a[2];l.drawButton(r,h,d,g,C,{bgColor:i,radius:b.height/8,offset:c,shadow:_}),T(n._grid,r,t,new u(h,d,g,C),o,s,{offset:c,color:f,textAlign:v,textBaseline:p,font:y,textOverflow:m,icons:w})})}},{key:"testFontLoad",value:function(t,e,n){return function(t,e,n,r){return!(t&&!p.check(t,e)&&(p.load(t,e,function(){return function(t,e){var n=t.col,r=t.row;e.invalidateCell(n,r)}(n,r)}),1))}(t,e,n,this._grid)}},{key:"theme",get:function(){return this._theme}}]),t}();t.exports=O}).call(this,n(2).Array_isArray)},function(t,e,n){var r={},o=!document.fonts,i=o?function(t,e,o){r["".concat(t," @ ").concat(e)]?o():n(104).load(t,e,function(){r["".concat(t," @ ").concat(e)]=!0,o()},function(){r["".concat(t," @ ").concat(e)]=!0,o()})}:function(t,e,n){r.all||r[t]?n():(document.fonts.ready.then(function(){r.all=!0}),document.fonts.load(t).then(function(){r[t]=!0,n()}))},a=o?function(t,e){return!!r["".concat(t," @ ").concat(e)]||(i(t,e,function(){}),!1)}:function(t,e){return!(!r.all&&!r[t])||(!!document.fonts.check(t)||(i(t,e,function(){}),!1))};t.exports={check:a,load:i}},function(t,e,n){var r=n(12),o=n(47).getCacheOrLoad,i=n(0).isPromise,a=function(t){function e(t){var n,r=t.src,o=t.width,a=t.height,l=t.imageLeft,s=t.imageTop,c=t.imageWidth,u=t.imageHeight;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._src=r,n._width=o,n._height=a,n._imageLeft=l,n._imageTop=s,n._imageWidth=c,n._imageHeight=u,n._onloaded=[],n._loaded=!1,i(r)?r.then(function(t){n._src=t,n._loadImage(t)}):n._loadImage(r),n}return _inherits(e,r),_createClass(e,[{key:"_loadImage",value:function(t){var e=this,n=this._inlineImg=o("InlineImage",50,t);i(n)?n.then(function(t){e._loaded=!0,e._inlineImg=t,e._onloaded.forEach(function(t){return t()})}):this._loaded=!0}},{key:"width",value:function(t){t.ctx;return this._width||(this._loaded?this._inlineImg.width:0)}},{key:"font",value:function(){return null}},{key:"color",value:function(){return null}},{key:"canDraw",value:function(){return this._loaded}},{key:"onReady",value:function(t){(i(this._src)||i(this._inlineImg))&&this._onloaded.push(function(){return t()})}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom,c=this._inlineImg;n.drawInlineImageRect(e,c,this._imageLeft||0,this._imageTop||0,this._imageWidth||c.width,this._imageHeight||c.height,this._width||c.width,this._height||c.height,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),e}();t.exports=a},function(t,e,n){var r=n(0).extend,o=n(55),i={get arrow_upward(){return n(112)},get arrow_downward(){return n(113)},get edit(){return n(114)},get add(){return n(115)},get star(){return n(116)},get star_border(){return n(117)},get star_half(){return n(118)}};t.exports={get:function(){return r(i,o)}}},function(t,e,n){t.exports={}},function(t,e,n){var r={};function o(t){return parseInt(t,16)}function i(t,e,n){return{r:t,g:e,b:n,a:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1}}function a(t){var e=t.r,n=t.g,r=t.b,o=t.a;return 0<=e&&e<=255&&0<=n&&n<=255&&0<=r&&r<=255&&0<=o&&o<=1}function l(t){return Math.ceil(255*t/100)}function s(t){if(t.match(/^#[0-9a-f]{3}$/i))return function(t){var e=t[1],n=t[2],r=t[3];return i(o(e+e),o(n+n),o(r+r))}(t);if(t.match(/^#[0-9a-f]{6}$/i))return function(t){var e=t[1],n=t[2],r=t[3],a=t[4],l=t[5],s=t[6];return i(o(e+n),o(r+a),o(l+s))}(t);var e=t.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(e){var n=i(e[1]-0,e[2]-0,e[3]-0);if(a(n))return n}if(e=t.match(/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d(\.\d)?)\s*\)$/i)){var r=i(e[1]-0,e[2]-0,e[3]-0,e[4]-0);if(a(r))return r}if(e=t.match(/^rgb\(\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*\)$/i)){var s=i(l(e[1]),l(e[3]),l(e[5]));if(a(s))return s}if(e=t.match(/^rgba\(\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d(\.\d)?)\s*\)$/i)){var c=i(l(e[1]),l(e[3]),l(e[5]),e[7]-0);if(a(c))return c}return null}t.exports={colorToRGB:function(t){return"string"!=typeof t?i(0,0,0,0):(t=t.toLowerCase().trim(),r[t]?r[t]:s(t)||(r[t]=function(t){var e=document.createElement("div"),n=e.style;n.color=t,n.position="fixed",n.height="1px",n.width="1px",n.opacity=0,document.body.appendChild(e);var r=document.defaultView.getComputedStyle(e,"").color;return document.body.removeChild(e),s(r)}(t)))}}},function(t,e,n){var r,o=n(13),i={CHANGE_STYLE:"change_style"},a=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._bgColor=n,t}return _inherits(e,o),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return i}},{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"doChangeStyle",value:function(){this.fireListeners(i.CHANGE_STYLE)}},{key:"clone",value:function(){return new e(this)}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r,o=n(121),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._color=n.color,t._font=n.font,t._textOverflow=n.textOverflow||"ellipsis",t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.doChangeStyle()}},{key:"font",get:function(){return this._font},set:function(t){this._font=t,this.doChangeStyle()}},{key:"textOverflow",get:function(){return this._textOverflow},set:function(t){this._textOverflow=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r=n(16),o=n(0).isDef,i=r.Style,a=function(){function t(e){_classCallCheck(this,t),this._headerCell=e,this.onDrawCell=this.onDrawCell.bind(this)}return _createClass(t,[{key:"onDrawCell",value:function(t,e,n,o){var i=e.style,a=e.drawCellBase;delete e.getRecord,delete e.style;var l=o.getGridCanvasHelper();a(),this.drawInternal(this.convertInternal(t),n,r.of(i,this.StyleClass),l,o,e)}},{key:"convertInternal",value:function(t){return o(t)?t:""}},{key:"drawInternal",value:function(t,e,n,r,o,i){}},{key:"bindGridEvent",value:function(t){return[]}},{key:"StyleClass",get:function(){return i}}]),t}();t.exports=a},function(t,e,n){var r=n(61),o=n(68),i=n(32),a=n(23),l=n(49),s=n(101),c=n(51),u=n(54),h=n(142);t.exports={core:r,tools:o,ListGrid:s,columns:i,themes:a,data:l,GridCanvasHelper:c,get icons(){return u.get()},register:h,get _internal(){return console.warn("use internal!!"),{color:n(56),sort:n(50),calc:n(18),symbolManager:n(1),path2DManager:n(25)}}}},function(t,e,n){var r=n(7);t.exports={DrawGrid:r}},function(t,e,n){var r=n(4),o=n(30),i=n(0).browser.heightLimit-1e3;function a(t){var e;if(t._height>i){var n=o.getScrollBarSize(),r=t._scrollable.offsetHeight,a=i-r+n,l=t._height-r+n;t._p=a/l,e=i}else t._p=1,e=t._height;t._endPointElement.style.top="".concat(e.toFixed(),"px"),t._endPointElement.style.left="".concat(t._width.toFixed(),"px")}var l=function(){function t(){_classCallCheck(this,t),this._handler=new r,this._scrollable=document.createElement("div"),this._scrollable.classList.add("grid-scrollable"),this._height=0,this._width=0,this._endPointElement=document.createElement("div"),this._endPointElement.classList.add("grid-scroll-end-point"),a(this),this._scrollable.appendChild(this._endPointElement)}return _createClass(t,[{key:"calcTop",value:function(t){var e=t-this.scrollTop;return this._scrollable.scrollTop+e}},{key:"getElement",value:function(){return this._scrollable}},{key:"setScrollSize",value:function(t,e){this._width=t,this._height=e,a(this)}},{key:"onScroll",value:function(t){this._handler.on(this._scrollable,"scroll",t)}},{key:"dispose",value:function(){this._handler.dispose()}},{key:"scrollWidth",get:function(){return this._width},set:function(t){this._width=t,a(this)}},{key:"scrollHeight",get:function(){return this._height},set:function(t){this._height=t,a(this)}},{key:"scrollLeft",get:function(){return Math.ceil(this._scrollable.scrollLeft)},set:function(t){this._scrollable.scrollLeft=t}},{key:"scrollTop",get:function(){return Math.ceil(this._scrollable.scrollTop/this._p)},set:function(t){this._scrollable.scrollTop=t*this._p}}]),t}();t.exports=l},function(t,e,n){var r=n(64);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,"/**\n * core styles \n */\n.cheetah-grid .grid-scrollable {\n\theight: 100%;\n\twidth: 100%;\n\tposition: absolute;\n\toverflow: scroll;\n}\n.cheetah-grid .grid-scroll-end-point {\n\topacity: 0;\n\tposition: relative;\n}\n.cheetah-grid {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n}\n.cheetah-grid > canvas {\n\tposition: absolute;\n\twidth: 0;\n\theight: 0;\n}\n.cheetah-grid .grid-focus-control {\n\tposition: relative !important;\n\twidth: 1px;\n\theight: 1px;\n\topacity: 0;\n\tpadding: 0;\n\tmargin: 0;\n\tbox-sizing: border-box;\n\tpointer-events: none;\n\tmax-width: 0;\n\tmax-height: 0;\n\tfloat: none !important;\n}\n.cheetah-grid input.grid-focus-control::-ms-clear {\n\tvisibility:hidden;\n}\n.cheetah-grid input.grid-focus-control.composition {\n\topacity: 1;\n\tmax-width: none;\n\tmax-height: none;\n}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r=function(){function t(){_classCallCheck(this,t),this._keys=[],this._vals={},this._sorted=!1}return _createClass(t,[{key:"put",value:function(t,e){t in this._vals||(this._keys.push(t),this._sorted=!1),this._vals[t]=e}},{key:"get",value:function(t){return this._vals[t]}},{key:"eachAll",value:function(t){var e=this;this._keys.forEach(function(n){t(e.get(n),n)})}},{key:"each",value:function(t,e,n){var r=this._keys,o=r.length;this._sorted||(r.sort(function(t,e){return t<e?-1:t>e?1:0}),this._sorted=!0);for(var i=function(t,e){for(var n=0,r=t.length-1;n<=r;){var o=Math.floor((n+r)/2);if(t[o]===e)return o;t[o]>e?r=o-1:n=o+1}return r<0?0:r}(r,t);i<o;i++){var a=r[i];if(t<=a&&a<=e)n(this.get(a),a);else if(e<a)return}}}]),t}();t.exports=r},function(t,e,n){var r,o=new(n(4));function i(){(r=Math.ceil(window.devicePixelRatio||1))>1&&r%2!=0&&(r+=1)}i(),o.on(window,"resize",i),t.exports={transform:function(t){var e=t.getContext("2d"),n=t.getAttribute,o=t.setAttribute;t.getAttribute=function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var a=n.call.apply(n,[this,t].concat(o));return"width"!==t&&"height"!==t||(a/=r),a},t.setAttribute=function(t,n){var i="width"===t||"height"===t;i&&(n*=r);for(var a=arguments.length,l=new Array(a>2?a-2:0),s=2;s<a;s++)l[s-2]=arguments[s];var c=o.call.apply(o,[this,t,n].concat(l));return i&&e.scale(r,r),c},Object.defineProperty(t,"width",{get:function(){return t.getAttribute("width")},set:function(e){t.setAttribute("width",Math.floor(e))},configurable:!0,enumerable:!0}),Object.defineProperty(t,"height",{get:function(){return t.getAttribute("height")},set:function(e){t.setAttribute("height",Math.floor(e))},configurable:!0,enumerable:!0});var i=e.drawImage;return e.drawImage=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];if(e!==t||1===r)return i.call.apply(i,[this,e].concat(o));this.save();try{return this.scale(1/r,1/r),o.length>4?(o[4]*=r,o[5]*=r):(o[0]*=r,o[1]*=r),i.call.apply(i,[this,e].concat(o))}finally{this.restore()}},t}}},function(t,e,n){var r=n(31);t.exports={canvashelper:r}},function(t,e,n){var r=n(19),o=n(33),i=n(14),a=n(70),l=n(71),s=n(72),c=n(76),u=n(80),h=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,a),_createClass(e,[{key:"disabled",get:function(){return this._disabled}},{key:"readOnly",get:function(){return this._readOnly}}]),e}(),f=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,s),_createClass(e,[{key:"disabled",get:function(){return this._disabled}},{key:"readOnly",get:function(){return this._readOnly}}]),e}(),d={ACTIONS:{CHECK:new h,INPUT:new f},get BaseAction(){return r},get Editor(){return i},get Action(){return o},get CheckEditor(){return a},get ButtonAction(){return l},get SmallDialogInputEditor(){return s},get InlineInputEditor(){return console.warn("InlineInputEditor is an experiment stage"),c},get InlineMenuEditor(){return u},of:function(t){return t?"string"==typeof t?d.ACTIONS[t.toUpperCase()]||d.of(null):t:d.ACTIONS.DEFAULT}};t.exports=d},function(t,e,n){var r=n(0),o=r.obj.setReadonly,i=r.isPromise,a=n(34),l=a.bindCellClickAction,s=a.bindCellKeyAction,c=n(35),u=n(14),h=n(1).CHECK_COLUMN_STATE_ID;function f(t){if("number"==typeof t)return 0===t?1:0;if("string"==typeof t){if("false"===t)return"true";if("off"===t)return"on";if(t.match(/^0+$/))return t.replace(/^(0*)0$/,"$11");if("true"===t)return"false";if("on"===t)return"off";if(t.match(/^0*1$/))return t.replace(/^(0*)1$/,"$10")}return!t}var d=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,u),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"bindGridEvent",value:function(t,e,n){var r=this;t[h]||o(t,h,{});var a=t[h],u=function(e){var n="".concat(e.col,":").concat(e.row),o="".concat(n,"::block");if(!(r.readOnly||r.disabled||a[o])){var l=t.doChangeValue(e.col,e.row,f);if(l){var s=function(){c(200,function(r){1===r?delete a[n]:a[n]={elapsed:r},t.invalidateCell(e.col,e.row)})};i(l)?(a[o]=!0,l.then(function(){delete a[o],s()})):s()}}};return _toConsumableArray(l(t,e,n,{action:u,mouseOver:function(e){return!r.disabled&&(a.mouseActiveCell={col:e.col,row:e.row},t.invalidateCell(e.col,e.row),!0)},mouseOut:function(e){delete a.mouseActiveCell,t.invalidateCell(e.col,e.row)}})).concat(_toConsumableArray(s(t,e,n,{action:function(e){for(var r=t.selection.range,o=t.selection.select.col,i=r.start.row;i<=r.end.row;i++)n.isTarget(o,i)&&u({col:o,row:i})},acceptKeys:[13,32]})))}}]),e}();t.exports=d},function(t,e,n){var r=n(0).obj.setReadonly,o=n(33),i=n(1).BUTTON_COLUMN_STATE_ID,a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"getState",value:function(t){return t[i]||r(t,i,{}),t[i]}}]),e}();t.exports=a},function(t,e,n){(function(e){var r=n(0).obj.setReadonly,o=n(73),i=n(1).SMALL_DIALOG_INPUT_EDITOR_STATE_ID,a=null,l=0;function s(t,e,n,s){t[i]||r(t,i,{}),a||(a=new o);var c=t[i];c.element||(c.element=a,l++,t.addDisposable({dispose:function(){--l||(a.dispose(),a=null)}})),a.attach(t,n,e.col,e.row,s)}function c(t){a&&a.detach(t)}var u=n(36),h=function(t){function n(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e)))._helperText=e.helperText,t._inputValidator=e.inputValidator,t._validator=e.validator,t._classList=e.classList,t._type=e.type,t}return _inherits(n,u),_createClass(n,[{key:"dispose",value:function(){this._inputDialogManager.dispose(),this._inputDialogManager=null}},{key:"clone",value:function(){return new n(this)}},{key:"onInputCellInternal",value:function(t,e,n){s(t,e,this,n)}},{key:"onOpenCellInternal",value:function(t,e){var n=this;t.doGetCellValue(e.col,e.row,function(r){s(t,e,n,r)})}},{key:"onChangeSelectCellInternal",value:function(t,e,n){c()}},{key:"onGridScrollInternal",value:function(t){c(!0)}},{key:"onChangeDisabledInternal",value:function(){c(!0)}},{key:"onChangeReadOnlyInternal",value:function(){c(!0)}},{key:"onSetInputAttrsInternal",value:function(t,e,n){o.setInputAttrs(this,t,n)}},{key:"classList",get:function(){return this._classList&&(e(this._classList)?this._classList:[this._classList])},set:function(t){this._classList=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"helperText",get:function(){return this._helperText}},{key:"inputValidator",get:function(){return this._inputValidator}},{key:"validator",get:function(){return this._validator}}]),n}();t.exports=h}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(0),o=r.event,i=o.getKeyCode,a=o.cancel,l=r.then,s=n(4),c=n(10).createElement,u="cheetah-grid__small-dialog-input",h="".concat(u,"__input"),f="".concat(u,"--hidden"),d="".concat(u,"--shown");function v(t,e){e.tryWithOffEvents(t,"blur",function(){!function(){t.focus();var e=t.value.length;try{if(void 0!==t.selectionStart)return t.selectionStart=e,void(t.selectionEnd=e)}catch(t){}if(document.selection){var n=t.createTextRange();n.collapse(),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}()})}function g(t,e,n){var r=t.type;n.type=r||""}var p=function(){function t(){_classCallCheck(this,t),this._handler=new s,this._dialog=function(){n(74);var t=c("div",{classList:[u,f]}),e=c("input",{classList:h});return e.readonly=!0,e.tabIndex=-1,t.appendChild(e),t}(),this._input=this._dialog.querySelector(".".concat(h)),this._bindDialogEvents()}return _createClass(t,null,[{key:"setInputAttrs",value:function(){g.apply(void 0,arguments)}}]),_createClass(t,[{key:"dispose",value:function(){var t=this._dialog;this.detach(),this._handler.dispose(),this._dialog=null,this._input=null,this._beforePropEditor=null,t.parentElement&&t.parentElement.removeChild(t)}},{key:"attach",value:function(t,e,n,r,o){var i=this,a=this._handler,l=this._dialog,s=this._input;this._beforePropEditor&&function(t,e,n,r){var o,i=r.classList;i&&(o=e.classList).remove.apply(o,_toConsumableArray(i)),delete e.dataset.helperText,n.type=""}(0,l,s,this._beforePropEditor),delete l.dataset.errorMessage,l.classList.remove(d),l.classList.add(f),s.readonly=!1,s.tabIndex=0;var c=t.getAttachCellArea(n,r),u=c.element,h=c.rect;l.style.top="".concat(h.top.toFixed(),"px"),l.style.left="".concat(h.left.toFixed(),"px"),l.style.width="".concat(h.width.toFixed(),"px"),s.style.height="".concat(h.height.toFixed(),"px"),u.appendChild(l),s.value=o,s.style.font=t.font||"16px sans-serif";var p={grid:t,col:n,row:r,editor:e};this._onInputValue(s,p),v(s,a),l.classList.add(d),l.classList.remove(f),s.readonly=!0,function(t,e,n,r){var o,i=r.classList,a=r.helperText;i&&(o=e.classList).add.apply(o,_toConsumableArray(i)),a&&"function"!=typeof a&&(e.dataset.helperText=a),g(r,0,n)}(0,l,s,e),this._activeData=p,this._beforePropEditor=e,this._attaching=!0,setTimeout(function(){delete i._attaching})}},{key:"detach",value:function(t){if(this._isActive()){var e=this._dialog,n=this._input;e.classList.remove(d),e.classList.add(f),n.readonly=!1,n.tabIndex=-1;var r=this._activeData,o=r.grid,i=r.col,a=r.row;o.invalidateCell(i,a),t&&o.focus()}this._activeData=null,this._beforeValue=null}},{key:"_doChangeValue",value:function(){var t=this;if(!this._isActive())return!1;var e=this._input,n=e.value;return l(this._validate(n),function(r){if(r&&n===e.value){var o=t._activeData,i=o.grid,a=o.col,l=o.row;return i.doChangeValue(a,l,function(){return n}),!0}return!1})}},{key:"_isActive",value:function(){var t=this._dialog;return!(!t||!t.parentElement)&&!!this._activeData}},{key:"_bindDialogEvents",value:function(){var t=this,e=this._handler,n=this._dialog,r=this._input,o=function(t){return t.stopPropagation()};e.on(n,"click",o),e.on(n,"dblclick",o),e.on(n,"mousedown",o),e.on(n,"touchstart",o),e.on(r,"compositionstart",function(t){r.classList.add("composition")}),e.on(r,"compositionend",function(e){r.classList.remove("composition"),t._onInputValue(r)});var s=function(e){r.classList.contains("composition")||t._onInputValue(r)};e.on(r,"keyup",s),e.on(r,"keypress",s),e.on(r,"keydown",function(e){if(!r.classList.contains("composition")){var n=i(e);if(27===n)t.detach(!0),a(e);else if(13!==n||t._attaching)t._onInputValue(r);else{var o=t._input,s=o.value;l(t._doChangeValue(),function(e){e&&s===o.value&&t.detach(!0)}),a(e)}}})}},{key:"_onInputValue",value:function(t,e){var n=this._beforeValue,r=t.value;n!==r&&this._onInputValueChange(r,n,e),this._beforeValue=r}},{key:"_onInputValueChange",value:function(t,e,n){n=n||this._activeData;var r=this._dialog,o=n,i=o.grid,a=o.col,l=o.row,s=o.editor;if("function"==typeof s.helperText){var c=s.helperText(t,{grid:i,col:a,row:l});c?r.dataset.helperText=c:delete r.dataset.helperText}"errorMessage"in r.dataset&&this._validate(t,!0)}},{key:"_validate",value:function(t,e){var n=this._dialog,r=this._input,o=this._activeData,i=o.grid,a=o.col,s=o.row,c=o.editor,u=null;return c.inputValidator&&(u=c.inputValidator(t,{grid:i,col:a,row:s})),l(u,function(o){return o||!c.validator||e||(o=c.validator(t,{grid:i,col:a,row:s})),l(o,function(e){return e&&t===r.value?n.dataset.errorMessage=e:delete n.dataset.errorMessage,!e})})}}]),t}();t.exports=p},function(t,e,n){var r=n(75);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,"/*ms*/\n.cheetah-grid__small-dialog-input__input::-ms-clear {\n\tvisibility:hidden;\n}\n\n@keyframes cheetah-grid__small-dialog-input--hidden-animation {\n\t0% {\n\t\topacity: 1;\n\t}\n\t99% {\n\t\topacity: 1;\n\t}\n\t100% {\n\t\topacity: 0;\n\t}\n}\n\n.cheetah-grid__small-dialog-input {\n\tposition: absolute;\n\tbox-sizing: content-box;\n\tmargin : -1px auto auto -1px;\n\tborder-radius: 3px;\n\tbackground-color: #fafafa;\n\n\ttransition: padding 150ms ease-out, box-shadow 150ms ease-out;\n}\n.cheetah-grid__small-dialog-input--hidden {\n\tbox-shadow: none;\n\tpadding: 0;\n\n\tpointer-events: none;\n\tanimation: cheetah-grid__small-dialog-input--hidden-animation  150ms ease-out;\n\topacity: 0;\n}\n.cheetah-grid__small-dialog-input--shown {\n\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0px rgba(0, 0, 0, .14), 0 1px 5px 0px rgba(0, 0, 0, .12);\n\tpadding: 8px 24px;\n}\n.cheetah-grid__small-dialog-input__input {\n\twidth: 100%;\n\theight: 100%;\n\tbox-sizing: border-box;\n\tpadding: 3px 2px 0 4px;\n\tborder: none;\n\tborder-bottom: solid 1px rgba(0, 0, 0, .87);\n\toutline: none;\n\tbackground-color: transparent;\n\ttransition: all 300ms ease-out;\n}\n.cheetah-grid__small-dialog-input__input:focus {\n\tborder-bottom: solid 1px #2196f3;\n\tbox-shadow: 0 1px 0 0 #2196f3;\n}\n.cheetah-grid__small-dialog-input::after {\n\tcontent: '';\n\tfont-family: Roboto;\n\tfont-size: 12px;\n\tfont-size: .75rem;\n\tmin-height: 1em;\n\tline-height: 1;\n\tdisplay: block;\n\twidth: 100%;\n\tpadding-top: 8px;\n}\n.cheetah-grid__small-dialog-input.helper-text--right-justified::after {\n\ttext-align: right;\n}\n.cheetah-grid__small-dialog-input[data-helper-text]::after {\n\tcontent: attr(data-helper-text);\n\tcolor: rgba(0, 0, 0, .87);\n}\n.cheetah-grid__small-dialog-input[data-error-message] input {\n\tborder-bottom: solid 1px #ff1744;\n\tbox-shadow: 0 1px 0 0 #ff1744;\n}\n.cheetah-grid__small-dialog-input[data-error-message]::after {\n\tcontent: attr(data-error-message);\n\tcolor: #ff1744;\n\ttext-align: left;\n}",""])},function(t,e,n){(function(e){var r=n(0).obj.setReadonly,o=n(36),i=n(77),a=n(1).INLINE_INPUT_EDITOR_STATE_ID,l=null,s=0;function c(t,e,n,o){t[a]||r(t,a,{}),l||(l=new i);var c=t[a];c.element||(c.element=l,s++,t.addDisposable({dispose:function(){--s||(l.dispose(),l=null)}})),l.attach(t,n,e.col,e.row,o)}function u(t){l&&l.detach(t)}function h(t){l&&l.doChangeValue()}var f=function(t){function n(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e)))._classList=e.classList,t._type=e.type,t}return _inherits(n,o),_createClass(n,[{key:"clone",value:function(){return new n(this)}},{key:"onInputCellInternal",value:function(t,e,n){c(t,e,this,n)}},{key:"onOpenCellInternal",value:function(t,e){var n=this;t.doGetCellValue(e.col,e.row,function(r){c(t,e,n,r)})}},{key:"onChangeSelectCellInternal",value:function(t,e,n){h(),u()}},{key:"onGridScrollInternal",value:function(t){h(),u(!0)}},{key:"onChangeDisabledInternal",value:function(){u(!0)}},{key:"onChangeReadOnlyInternal",value:function(){u(!0)}},{key:"onSetInputAttrsInternal",value:function(t,e,n){i.setInputAttrs(this,t,n)}},{key:"classList",get:function(){return this._classList&&(e(this._classList)?this._classList:[this._classList])},set:function(t){this._classList=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}}]),n}();t.exports=f}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(0).event,o=r.getKeyCode,i=r.cancel,a=n(4),l=n(10).createElement,s="cheetah-grid__inline-input";function c(t,e,n){var r,o=t.classList,i=t.type;o&&(r=n.classList).add.apply(r,_toConsumableArray(o));n.type=i||""}var u=function(){function t(){_classCallCheck(this,t),this._handler=new a,this._input=(n(78),l("input",{classList:s})),this._bindInputEvents()}return _createClass(t,null,[{key:"setInputAttrs",value:function(){c.apply(void 0,arguments)}}]),_createClass(t,[{key:"dispose",value:function(){this.detach(),this._handler.dispose(),this._input=null,this._beforePropEditor=null}},{key:"attach",value:function(t,e,n,r,o){var i=this,a=this._input,l=this._handler;if(this._beforePropEditor){var s,u=this._beforePropEditor.classList;if(u)(s=a.classList).remove.apply(s,_toConsumableArray(u))}a.style.font=t.font||"16px sans-serif";var h=t.getAttachCellArea(n,r),f=h.element,d=h.rect;a.style.top="".concat(d.top.toFixed(),"px"),a.style.left="".concat(d.left.toFixed(),"px"),a.style.width="".concat(d.width.toFixed(),"px"),a.style.height="".concat(d.height.toFixed(),"px"),f.appendChild(a),c(e,0,a),a.value=o,this._activeData={grid:t,col:n,row:r,editor:e},this._beforePropEditor=e;l.tryWithOffEvents(a,"blur",function(){!function(){a.focus();var t=a.value.length;try{if(void 0!==a.selectionStart)return a.selectionStart=t,void(a.selectionEnd=t)}catch(t){}if(document.selection){var e=a.createTextRange();e.collapse(),e.moveEnd("character",t),e.moveStart("character",t),e.select()}}()}),this._attaching=!0,setTimeout(function(){delete i._attaching})}},{key:"detach",value:function(t){if(this._isActive()){var e=this._activeData,n=e.grid,r=e.col,o=e.row,i=this._input;this._handler.tryWithOffEvents(i,"blur",function(){i.parentElement.removeChild(i)}),n.invalidateCell(r,o),t&&n.focus()}this._activeData=null}},{key:"doChangeValue",value:function(){if(this._isActive()){var t=this._input.value,e=this._activeData,n=e.grid,r=e.col,o=e.row;n.doChangeValue(r,o,function(){return t})}}},{key:"_isActive",value:function(){var t=this._input;return!(!t||!t.parentElement)&&!!this._activeData}},{key:"_bindInputEvents",value:function(){var t=this,e=this._handler,n=this._input,r=function(t){return t.stopPropagation()};e.on(n,"click",r),e.on(n,"mousedown",r),e.on(n,"touchstart",r),e.on(n,"dblclick",r),e.on(n,"compositionstart",function(t){n.classList.add("composition")}),e.on(n,"compositionend",function(t){n.classList.remove("composition")}),e.on(n,"keydown",function(e){if(!n.classList.contains("composition")&&13===o(e)){if(!t._isActive()||t._attaching)return;var r=t._activeData.grid;t.doChangeValue(),r&&r.focus(),t.detach(),i(e)}}),e.on(n,"blur",function(e){t.doChangeValue(),t.detach()})}}]),t}();t.exports=u},function(t,e,n){var r=n(79);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,"/*ms*/\n.cheetah-grid__inline-input::-ms-clear {\n\tvisibility:hidden;\n}\n\n\n.cheetah-grid__inline-input {\n\tposition: absolute;\n\tbox-sizing: border-box;\n}\n",""])},function(t,e,n){(function(e){var r=n(0).obj.setReadonly,o=n(37).normalize,i=n(14),a=n(7).EVENT_TYPE,l=a.SELECTED_CELL,s=a.CLICK_CELL,c=a.KEYDOWN,u=a.SCROLL,h=a.MOUSEOVER_CELL,f=a.MOUSEOUT_CELL,d=a.MOUSEMOVE_CELL,v=n(81),g=n(1).INLINE_MENU_EDITOR_STATE_ID,p=null,_=0;function y(t){p&&p.detach(t)}var C=function(t){function n(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e)))._classList=e.classList,t._options=o(e.options),t}return _inherits(n,i),_createClass(n,[{key:"dispose",value:function(){}},{key:"clone",value:function(){return new n(this)}},{key:"onChangeDisabledInternal",value:function(){y(!0)}},{key:"onChangeReadOnlyInternal",value:function(){y(!0)}},{key:"bindGridEvent",value:function(t,e,n){var o=this,i=function(e){o.readOnly||o.disabled||t.doGetCellValue(e.col,e.row,function(n){!function(t,e,n,o){t[g]||r(t,g,{}),p||(p=new v);var i=t[g];i.element||(i.element=p,_++,t.addDisposable({dispose:function(){--_||(p.dispose(),p=null)}})),p.attach(t,n,e.col,e.row,o)}(t,e,o,n)})};return[t.listen(s,function(t){n.isTarget(t.col,t.row)&&i({col:t.col,row:t.row})}),t.listen(c,function(e,r){if(113===e||13===e){var o=t.selection.select;n.isTarget(o.col,o.row)&&i({col:o.col,row:o.row})}}),t.listen(l,function(t){y()}),t.listen(u,function(){y(!0)}),t.listen(h,function(e){o.readOnly||o.disabled||n.isTarget(e.col,e.row)&&(t.getElement().style.cursor="pointer")}),t.listen(d,function(e){o.readOnly||o.disabled||n.isTarget(e.col,e.row)&&(t.getElement().style.cursor||(t.getElement().style.cursor="pointer"))}),t.listen(f,function(e){n.isTarget(e.col,e.row)&&(t.getElement().style.cursor="")})]}},{key:"classList",get:function(){return this._classList&&(e(this._classList)?this._classList:[this._classList])},set:function(t){this._classList=t}},{key:"options",get:function(){return this._options},set:function(t){this._options=o(t)}}]),n}();t.exports=C}).call(this,n(2).Array_isArray)},function(t,e,n){(function(e){var r=n(0),o=r.isDef,i=r.event,a=i.getKeyCode,l=i.cancel,s=n(4),c=n(10),u=c.createElement,h=c.appendHtml,f=c.empty,d=c.disableFocus,v=c.isFocusable,g=c.findPrevSiblingFocusable,p=c.findNextSiblingFocusable,_="cheetah-grid__inline-menu",y="".concat(_,"__menu-item"),C="".concat(_,"--hidden"),m="".concat(_,"--shown"),w="".concat(y,"--empty");function b(t){for(var e=t;!e.classList.contains(y);)if(!(e=e.parentElement)||e.classList.contains(_))return;return e}function x(t,e,n){n.style.top="".concat(e.top.toFixed(),"px"),n.style.left="".concat(e.left.toFixed(),"px"),n.style.width="".concat(e.width.toFixed(),"px"),n.style["line-height"]="".concat(e.height.toFixed(),"px"),t.appendChild(n)}function k(t,n,r,i,a,l){var s=n.options,c=n.classList;l.classList.remove(m),l.classList.add(C),f(l),l.style.font=t.font||"16px sans-serif";var d=null,v=null;s.forEach(function(t,n){var r=function(t,n){var r,i=t.classList,a=t.caption,l=t.value,s=t.html,c=u("li",{classList:y});if(c.tabIndex=0,c.dataset.valueindex=n,i&&(r=c.classList).add.apply(r,_toConsumableArray(e(i)?i:[i])),a){var f=u("span",{text:a});c.appendChild(f)}else s&&h(c,s);return""!==l&&o(l)||c.classList.add(w),c}(t,n);l.appendChild(r),t.value===a&&(v=r,r.dataset.select=!0),r.classList.contains(w)&&(d=r)});var g,p=v||d||l.children[0];c&&(g=l.classList).add.apply(g,_toConsumableArray(c));var _=Array.prototype.slice.call(l.children,0),b=_.indexOf(p),k=t.getAttachCellArea(r,i),E=k.element,I=k.rect;I.width++,x(E,I,l);for(var L=0,S=0,T=0;T<_.length;T++){var R=_[T].offsetHeight;T<b&&(L+=R),S+=R}I.offsetTop(-L),l.style["transform-origin"]="center ".concat(L+Math.ceil(_[b].offsetHeight/2),"px 0px"),x(E,I,l);var A=l.getBoundingClientRect(),O=(S-A.height)/2,M=A.top-O,P=M,B=P+S,D=window.innerHeight;B>D-20&&(P-=B-D+20);P<20&&(P=20),P!==M&&(I.offsetTop(-(M-P)),x(E,I,l)),p&&p.focus(),l.classList.remove(C),l.classList.add(m)}var E=function(){function t(){_classCallCheck(this,t),this._handler=new s,this._menu=(n(82),u("ul",{classList:_})),this._bindMenuEvents()}return _createClass(t,[{key:"dispose",value:function(){var t=this._menu;this.detach(),this._handler.dispose(),this._menu=null,this._beforePropEditor=null,t.parentElement&&t.parentElement.removeChild(t)}},{key:"attach",value:function(t,e,n,r,o){var i=this._menu;if(this._beforePropEditor){var a,l=this._beforePropEditor.classList;if(l)(a=i.classList).remove.apply(a,_toConsumableArray(l))}k(t,e,n,r,o,i),this._activeData={grid:t,col:n,row:r,editor:e},this._beforePropEditor=e}},{key:"detach",value:function(t){if(this._isActive()){var e=this._activeData,n=e.grid,r=e.col,o=e.row;!function(t,e,n,r){r.classList.remove(m),r.classList.add(C),d(r)}(0,0,0,this._menu),n.invalidateCell(r,o),t&&n.focus()}this._activeData=null}},{key:"_doChangeValue",value:function(t){if(this._isActive()){var e=this._activeData,n=e.grid,r=e.col,o=e.row,i=e.editor.options[t].value;n.doChangeValue(r,o,function(){return i})}}},{key:"_isActive",value:function(){var t=this._menu;return!(!t||!t.parentElement)&&!!this._activeData}},{key:"_bindMenuEvents",value:function(){var t=this,e=this._handler,n=this._menu,r=function(t){return t.stopPropagation()};e.on(n,"mousedown",r),e.on(n,"touchstart",r),e.on(n,"dblclick",r),e.on(n,"click",function(e){e.stopPropagation();var n=b(e.target);if(n){var r=n.dataset.valueindex;t._doChangeValue(r),t.detach(!0)}}),e.on(n,"keydown",function(e){var r=b(e.target);if(r){var o=a(e);if(13===o){var i=r.dataset.valueindex;t._doChangeValue(i),t.detach(!0),l(e)}else if(27===o)t.detach(!0),l(e);else if(38===o){var s=g(r);s&&(s.focus(),l(e))}else if(40===o){var c=p(r);c&&(c.focus(),l(e))}else if(9===o)if(e.shiftKey){if(!g(r)){var u=n.querySelectorAll(".".concat(y)),h=u[u.length-1];v(h)||(h=g(h)),h&&(h.focus(),l(e))}}else if(!p(r)){var f=n.querySelector(".".concat(y));v(f)||(f=p(f)),f&&(f.focus(),l(e))}}})}}]),t}();t.exports=E}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(83);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,'.cheetah-grid__inline-menu {\n\tposition: absolute;\n\tcolor: rgba(0, 0, 0, .87);\n\tbox-sizing: content-box;\n\tmargin: -1px auto auto -1px;\n\tpadding: 8px 0;\n\tbackground-color: #fafafa;\n\tlist-style-type: none;\n\tborder-radius: 2px;\n\tmax-height: calc(100vh - 40px);\n\toverflow-y: auto;\n\n}\n.cheetah-grid__inline-menu--hidden {\n\ttransform: scale(.9);\n\tbox-shadow: none;\n\topacity: 0;\n\n\tpointer-events: none;\n\n\ttransition: all 50ms ease-out;\n}\n.cheetah-grid__inline-menu--hidden * {\n\tpointer-events: none;\n}\n.cheetah-grid__inline-menu--shown {\n\ttransform: translateY(-7px);\n\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0px rgba(0, 0, 0, 0.14), 0 1px 5px 0px rgba(0, 0, 0, 0.12);\n\topacity: 1;\n\n\ttransition: all 150ms ease-out;\n}\n\n.cheetah-grid__inline-menu__menu-item {\n\theight: 100%;\n\tbox-sizing: border-box;\n\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-start;\n\n\toutline: none;\n\tcursor: pointer;\n\n\tposition: relative;\n\toverflow: hidden;\n\n\tpadding: 0 16px;\n}\n.cheetah-grid__inline-menu__menu-item--empty {\n\tcolor: rgba(0, 0, 0, .38);\n}\n\n.cheetah-grid__inline-menu__menu-item::before {\n\tcontent: "";\n\tposition: absolute;\n\ttop: -50%;\n\tleft: -50%;\n\twidth: 200%;\n\theight: 200%;\n\tbackground-color: #000;\n\topacity: 0;\n\tpointer-events: none;\n\ttransition: opacity 15ms linear;\n}\n.cheetah-grid__inline-menu__menu-item:hover::before {\n\topacity: .04;\n}\n.cheetah-grid__inline-menu__menu-item[data-select]::before {\n\topacity: .04;\n}\n.cheetah-grid__inline-menu__menu-item:focus::before {\n\topacity: .12;\n}',""])},function(t,e,n){var r=n(11),o=n(85),i=n(86),a=n(87),l=n(88),s=n(90),c=n(91),u=n(92),h=n(94),f=n(95),d={TYPES:{DEFAULT:new r,NUMBER:new o,CHECK:new i,BUTTON:new a,IMAGE:new l,MULTILINETEXT:new f},get Column(){return r},get NumberColumn(){return o},get CheckColumn(){return i},get ButtonColumn(){return a},get ImageColumn(){return l},get PercentCompleteBarColumn(){return s},get IconColumn(){return c},get BranchGraphColumn(){return u},get MenuColumn(){return h},get MultilineTextColumn(){return f},of:function(t){return t?"string"==typeof t?d.TYPES[t.toUpperCase()]||d.of(null):t:d.TYPES.DEFAULT}};t.exports=d},function(t,e,n){var r,o=n(11),i=n(39),a=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._format=n.format,t}return _inherits(e,o),_createClass(e,null,[{key:"defaultFotmat",get:function(){return r||(r=new Intl.NumberFormat)},set:function(t){r=t}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"withFormat",value:function(t){var e=this.clone();return e._format=t,e}},{key:"convertInternal",value:function(t){return isNaN(t-0)?t:(this._format||e.defaultFotmat).format(t-0)}},{key:"StyleClass",get:function(){return i}},{key:"format",get:function(){return this._format}}]),e}();t.exports=a},function(t,e,n){var r=n(9),o=n(40),i=n(1).CHECK_COLUMN_STATE_ID;var a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,r),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"convertInternal",value:function(t){return function(t){if("string"==typeof t){if("false"===t)return!1;if("off"===t)return!1;if(t.match(/^0+$/))return!1}return t}(t)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase,s=n.textAlign,c=n.textBaseline,u=n.borderColor,h=n.checkBgColor,f=n.uncheckBgColor,d=n.bgColor;d&&l({bgColor:d});var v=e.col,g=e.row,p="".concat(v,":").concat(g),_=o[i]&&o[i][p],y={textAlign:s,textBaseline:c,borderColor:u,checkBgColor:h,uncheckBgColor:f};_&&(y.animElapsedTime=_.elapsed),r.checkbox(t,e,y)}},{key:"bindGridEvent",value:function(t,e,n){return[]}},{key:"StyleClass",get:function(){return o}}]),e}();t.exports=a},function(t,e,n){var r=n(11),o=n(41),i=n(1).BUTTON_COLUMN_STATE_ID,a=n(15),l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._caption=n.caption,t}return _inherits(e,r),_createClass(e,[{key:"withCaption",value:function(t){var e=this.clone();return e._caption=t,e}},{key:"clone",value:function(){return new e(this)}},{key:"convertInternal",value:function(t){return this._caption||t}},{key:"drawInternal",value:function(t,e,n,r,o,l){var s=l.drawCellBase,c=l.getIcon,u=n.textAlign,h=n.textBaseline,f=n.bgColor,d=n.color,v=n.buttonBgColor,g=n.font,p=n.padding,_=n.textOverflow;f&&s({bgColor:f}),r.testFontLoad(g,t,e);var y=e.col,C=e.row,m=!1,w=o[i];w&&(w.mouseActiveCell&&w.mouseActiveCell.col===y&&w.mouseActiveCell.row===C?m=!0:e.getSelectState().selected&&(m=!0)),a.loadIcons(c(),e,r,function(e,n){r.button(t,n,{textAlign:u,textBaseline:h,bgColor:v,color:d,font:g,padding:p,shadow:!m||{color:"rgba(0, 0, 0, 0.48)",blur:6,offsetY:3},textOverflow:_,icons:e})})}},{key:"StyleClass",get:function(){return o}},{key:"caption",get:function(){return this._caption}}]),e}();t.exports=l},function(t,e,n){var r=n(42),o=n(47).getCacheOrLoad,i=n(8).calcStartPosition,a=n(9),l=50;var s=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,a),_createClass(e,[{key:"onDrawCell",value:function(t,n,r,i){return _get(_getPrototypeOf(e.prototype),"onDrawCell",this).call(this,function(t){return o("ImageColumn",l,t)}(t),n,r,i)}},{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase;if(t){var s=n.textAlign,c=n.textBaseline,u=n.margin,h=n.bgColor;h&&l({bgColor:h}),r.drawWithClip(e,function(r){r.textAlign=s,r.textBaseline=c;var o=e.getRect();if("keep-aspect-ratio"===n.imageSizing){var a=function(t,e,n,r){var o=t,i=e;return o>n&&(i=(o=n)*e/t),i>r&&(o=(i=r)*t/e),{width:o,height:i}}(t.width,t.height,o.width-2*u,o.height-2*u),l=a.width,h=a.height,f=i(r,o,l,h,{offset:u});r.drawImage(t,0,0,t.width,t.height,f.x,f.y,l,h)}else r.drawImage(t,0,0,t.width,t.height,o.left+u,o.top+u,o.width-2*u,o.height-2*u)})}}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=s},function(t,e,n){var r=function(){function t(e){_classCallCheck(this,t),this._list=[],this._map={},this._cacheSize=e||50}return _createClass(t,[{key:"get",value:function(t){var e=this._map[t];if(e){var n=this._list.indexOf(t);this._list.splice(n,1),this._list.push(t)}return e}},{key:"put",value:function(t,e){if(this._map[t]){var n=this._list.indexOf(t);this._list.splice(n,1)}if(this._map[t]=e,this._list.push(t),this._list.length>this._cacheSize){var r=this._list.shift();delete this._map[r]}}}]),t}();t.exports=r},function(t,e,n){var r=n(44),o=n(0),i=o.getOrApply,a=o.str,l=n(11),s=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._min=n.min||0,t._max=n.max||t._min+100,t._formatter=n.formatter||function(t){return t},t}return _inherits(e,l),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,n,r,o,l,s){_get(_getPrototypeOf(e.prototype),"drawInternal",this).call(this,this._formatter(t),n,r,o,l,s);var c=r.barColor,u=r.barBgColor,h=r.barHeight,f="".concat(t);a.endsWith(f,"%")&&(f=f.substr(0,f.length-1));var d=f-0,v=d<this._min?0:d>this._max?1:(d-this._min)/(this._max-this._min);o.drawWithClip(n,function(t){var e=n.getRect(),r=e.width-4-1,o=e.bottom-2-h-1,a=e.left+2;t.fillStyle=i(u,100*v)||"#f0f3f5",t.beginPath(),t.rect(a,o,r,h),t.fill();var l=Math.min(r*v,r);t.fillStyle=i(c,100*v)||"#20a8d8",t.beginPath(),t.rect(a,o,l,h),t.fill()})}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=s},function(t,e,n){var r=n(43),o=n(11),i=n(22);var a=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._tagName=n.tagName||"i",t._className=n.className,t._content=n.content,t._name=n.name,t._iconWidth=n.iconWidth,t}return _inherits(e,o),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,n,r,o,a,l){var s=t-0;if(isNaN(s))l.getIcon=function(){return null};else{var c={};i.iconPropKeys.forEach(function(t){c[t]=r[t]}),c.className=this._className,c.tagName=this._tagName,c.content=this._content,c.name=this._name,this._iconWidth&&(c.width=this._iconWidth),l.getIcon=function(){return function(t,e){e===1/0&&(e=0);for(var n=[],r=0;r<e;r++)n.push(t);return n}(c,s)}}_get(_getPrototypeOf(e.prototype),"drawInternal",this).call(this,"",n,r,o,a,l)}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=a},function(t,e,n){(function(e){var r=n(0),o=r.isDef,i=r.getOrApply,a=r.isPromise,l=r.obj.isObject,s=n(93),c=n(9),u=n(1).BRANCH_GRAPH_COLUMN_STATE_ID;var h=function t(e){var n=e.fromIndex,r=e.toIndex,o=e.colorIndex,i=e.point;_classCallCheck(this,t),this.fromIndex=n,this.toIndex=r,this.colorIndex=o,this.point=i},f=function(){function t(e){var n=e.index,r=e.commit,o=void 0!==r&&r,i=e.lines,a=void 0===i?[]:i,l=e.tag;_classCallCheck(this,t),this.index=n,this.commit=o,this.lines=a,this.tag=l}return _createClass(t,null,[{key:"mergeLines",value:function(t){var e=t.filter(function(t){return o(t.fromIndex)&&o(t.toIndex)}),n=t.filter(function(t){return o(t.fromIndex)&&!o(t.toIndex)}),r=t.filter(function(t){return!o(t.fromIndex)&&o(t.toIndex)});return n.forEach(function(t){for(var n=0;n<r.length;n++){var o=r[n];if(!o.point&&t.colorIndex===o.colorIndex){t.toIndex=o.toIndex,r.splice(n,1);break}}e.push(t)}),e.concat(r)}},{key:"merge",value:function(e,n){return e?new t({index:e.index,commit:e.commit||n.commit,lines:t.mergeLines(e.lines.concat(n.lines)),tag:e.tag||n.tag}):n}}]),t}();function d(t,e){for(var n=_toConsumableArray(t).reverse(),r=0;r<n.length;r++){var o=n[r][e];if(o){o.lines=f.mergeLines(o.lines.concat([new h({toIndex:e,colorIndex:e})]));for(var i=0;i<r;i++){n[i][e]=new f({index:e,lines:[new h({fromIndex:e,toIndex:e,colorIndex:e})]})}return!0}}return!1}function v(t,n){var r=t.timeline,o=[];(e(n)?n:[n]).forEach(function(e){if(e){var n;if("branch"===e.command){var r=l(e.branch)?e.branch.from:null,i=l(e.branch)?e.branch.to:e.branch;n=function(t,e,n){var r=t.timeline,o=t.branches,i=o.indexOf(e),a=o.indexOf(n);if(a<0&&(a=o.length,o.push(n)),i<0)return new f({index:a});var l=function(){for(var t=r.length-1;t>=0;t--){var e=r[t][i];if(e&&e.commit)return t}return-1}();if(-1===l)return null;var s,c,u=l+1,d=new f({index:a,lines:[new h({fromIndex:i,colorIndex:a})]});if(u<r.length){var v=r[u];s=v[a]=f.merge(v[a],d)}else s=d,c=d;var g=r[l][i];return g.lines=f.mergeLines(g.lines.concat([new h({toIndex:a,colorIndex:a,point:s})])),c}(t,r,i)}else if("commit"===e.command){var a=e.branch;n=function(t,e){var n=t.timeline,r=t.branches.indexOf(e);if(r<0)return null;var o=new f({index:r,commit:!0});return d(n,r)&&(o.lines=f.mergeLines(o.lines.concat([new h({fromIndex:r,colorIndex:r})]))),o}(t,a)}else if("merge"===e.command){var s=e.branch,c=s.from,u=s.to;n=function(t,e,n){var r=t.timeline,o=t.branches,i=o.indexOf(e),a=o.indexOf(n);if(a<0||i<0)return new f({index:a,commit:!0});var l=new f({index:a,commit:!0,lines:[new h({fromIndex:i,colorIndex:i}),new h({fromIndex:a,colorIndex:a})]}),s=_toConsumableArray(r),c=s.pop();return c&&(c[i]=f.merge(c[i],new f({index:a,lines:[new h({toIndex:a,colorIndex:i})]}))),d(s,i)&&c&&(c[i].lines=f.mergeLines(c[i].lines.concat([new h({fromIndex:i,colorIndex:i})]))),d(r,a),l}(t,c,u)}else if("tag"===e.command){var v=e.branch,g=e.tag;n=function(t,e,n){t.timeline;var r=t.branches,o=r.indexOf(e);return o<0&&(o=r.length,r.push(e)),new f({index:o,tag:n})}(t,v,g)}n&&n.index>-1&&(o[n.index]=f.merge(o[n.index],n))}}),r.push(o)}function g(t,e,n){var r={branches:[],timeline:[]};return function(t,e,n){var r=t.dataSource,o=t.getField(e);l(o)&&o.get&&o.set&&(o=o.get);for(var i,s=[],c=function(t){var e=r.getField(t,o);if(a(e)){var n=s.length;s.push(e),i=i?i.then(function(){return e}).then(function(t){s[n]=t}):e.then(function(t){s[n]=t})}else s.push(e)},u=0;u<r.length;u++)c(u);i?i.then(function(){return n(s)}):n(s)}(e,n,function(e){"top"!==t&&(e=_toConsumableArray(e).reverse()),e.forEach(function(t){v(r,t)})}),r}var p=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._start=n.start||"bottom",t._cache=!!o(n.cache)&&n.cache,t}return _inherits(e,c),_createClass(e,[{key:"clearCache",value:function(t){delete t[u]}},{key:"onDrawCell",value:function(t,n,r,o){if(this._cache){var i=o[u]||(o[u]={}),a=r.col;i[a]||(i[a]=g(this._start,o,a))}return _get(_getPrototypeOf(e.prototype),"onDrawCell",this).call(this,t,n,r,o)}},{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,a,l){var s=l.drawCellBase,c=e.col,h=e.row,f=this._cache&&a[u]?a[u][c]:g(this._start,a,c),d=f.timeline,v=f.branches,p="top"!==this._start?{upLineIndexKey:"toIndex",downLineIndexKey:"fromIndex"}:{upLineIndexKey:"fromIndex",downLineIndexKey:"toIndex"},_=p.upLineIndexKey,y=p.downLineIndexKey,C="top"!==this._start?d[d.length-(h-a.frozenRowCount)-1]:d[h-a.frozenRowCount],m=n.branchColors,w=n.branchLineWidth,b=n.circleSize,x=n.mergeStyle,k=n.margin,E=n.bgColor;E&&s({bgColor:E});var I=e.getRect(),L=b/2,S=I.width-2*k;r.drawWithClip(e,function(t){t.textAlign="left",t.textBaseline="middle";var e=function(t,e,n,r,o,i){var a=Math.max(n/o.length+1,5);i.forEach(function(e){e.forEach(function(e,o){if(!(o<=0)&&e.tag){var i=t.measureText(e.tag).width;a*o+2*r+4+i>n&&(a=Math.max((n-2*r-4-i)/o,5))}})});var l=[],s=e;return o.forEach(function(){l.push(Math.ceil(s+r)),s+=a}),l}(t,I.left+k,S,L,v,d),n=I.top+I.height/2;C.map(function(t,e){return t?t.lines.map(function(t){return{colorIndex:t.colorIndex,upLineIndex:t[_],downLineIndex:t[y],pointIndex:e}}):[]}).reduce(function(t,e){return t.concat(e)},[]).sort(function(t,e){return e.colorIndex-t.colorIndex}).forEach(function(r){var l=e[r.pointIndex];!function(t,e,n,r,a,l,s,c,u){var h=c.branchXPoints,f=(c.margin,c.branchColors),d=c.branchLineWidth,v=c.mergeStyle,g=(u.width,u.col),p=u.row,_=u.branches;if(o(a)||o(l)){if(e.strokeStyle=i(f,_[s],s),e.lineWidth=d,e.lineCap="round",e.beginPath(),o(a)){var y=h[a],C=t.getCellRelativeRect(g,p-1),m=C.top+C.height/2;e.moveTo(y,m),"bezier"===v?e.bezierCurveTo(y,(r+m)/2,n,(r+m)/2,n,r):e.lineTo(n,r)}else e.moveTo(n,r);if(o(l)){var w=h[l],b=t.getCellRelativeRect(g,p+1),x=b.top+b.height/2;"bezier"===v?e.bezierCurveTo(n,(r+x)/2,w,(r+x)/2,w,x):e.lineTo(w,x)}e.stroke()}}(a,t,l,n,r.upLineIndex,r.downLineIndex,r.colorIndex,{margin:k,branchXPoints:e,branchLineWidth:w,branchColors:m,mergeStyle:x},{width:S,col:c,row:h,branches:v})}),C.forEach(function(r,o){if(r&&r.commit){var a=e[o];t.fillStyle=i(m,v[o],o),t.beginPath(),t.arc(a,n,L,0,2*Math.PI,!0),t.fill(),t.closePath()}}),C.forEach(function(r,o){r&&r.tag&&(t.fillStyle=i(m,v[o],o),t.fillText(r.tag,e[o]+L+4,n))})})}},{key:"StyleClass",get:function(){return s}}]),e}();t.exports=p}).call(this,n(2).Array_isArray)},function(t,e,n){var r,o=n(21);var i=function(t,e){switch(e%3){case 0:return"#979797";case 1:return"#008fb5";case 2:return"#f1c109"}return"#979797"},a=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t}(n))))._branchColors=n.branchColors||i,t._margin=n.margin||4,t._circleSize=n.circleSize||16,t._branchLineWidth=n.branchLineWidth||4,t._mergeStyle="straight"===n.mergeStyle?"straight":"bezier",t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"branchColors",get:function(){return this._branchColors},set:function(t){this._branchColors=t,this.doChangeStyle()}},{key:"margin",get:function(){return this._margin},set:function(t){this._margin=t,this.doChangeStyle()}},{key:"circleSize",get:function(){return this._circleSize},set:function(t){this._circleSize=t,this.doChangeStyle()}},{key:"branchLineWidth",get:function(){return this._branchLineWidth},set:function(t){this._branchLineWidth=t,this.doChangeStyle()}},{key:"mergeStyle",get:function(){return this._mergeStyle},set:function(t){this._mergeStyle=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=n(37).normalize,o=n(0).isDef,i=n(9),a=n(46),l=n(15),s=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._options=r(n.options),t}return _inherits(e,i),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"withOptions",value:function(t){var e=this.clone();return e._options=r(t),e}},{key:"drawInternal",value:function(t,e,n,r,i,a){var s=a.drawCellBase,c=a.getIcon,u=n.textAlign,h=n.textBaseline,f=n.font,d=n.bgColor,v=n.padding,g=n.textOverflow,p=n.appearance,_=n.color;d&&s({bgColor:d});var y=this._convertInternal(t);r.testFontLoad(f,y,e),l.loadIcons(c(),e,r,function(e,n){var i=r.toBoxPixelArray(v||0,n,f),a=i.slice(0);a[1]+=26;var l=i.slice(0);l[1]+=8,o(_)||o(t)&&""!==t||(_="rgba(0, 0, 0, .38)"),r.text(y,n,{textAlign:u,textBaseline:h,color:_,font:f,padding:a,textOverflow:g,icons:e}),"menulist-button"===p?r.text("",n,{textAlign:"right",textBaseline:h,color:_,font:f,icons:[{path:"M0 2 5 7 10 2z",width:10,color:"rgba(0, 0, 0, .54)"}],padding:l}):"none"!==p&&console.warn("unsupported appearance:".concat(p))})}},{key:"convertInternal",value:function(t){return t}},{key:"_convertInternal",value:function(t){for(var n=this._options,r=0;r<n.length;r++){var o=n[r];if(o.value===t){t=o.caption;break}}return _get(_getPrototypeOf(e.prototype),"convertInternal",this).call(this,t)}},{key:"StyleClass",get:function(){return a}},{key:"options",get:function(){return this._options}}]),e}();t.exports=s},function(t,e,n){var r=n(45),o=n(9),i=n(15),a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,o),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase,s=a.getIcon,c=n.textAlign,u=n.textBaseline,h=n.color,f=n.font,d=n.bgColor,v=n.padding,g=n.lineHeight,p=n.autoWrapText,_=n.lineClamp,y=n.textOverflow;d&&l({bgColor:d});var C=t.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");r.testFontLoad(f,t,e),i.loadIcons(s(),e,r,function(t,e){r.multilineText(C,e,{textAlign:c,textBaseline:u,color:h,font:f,padding:v,lineHeight:g,autoWrapText:p,lineClamp:_,textOverflow:y,icons:t})})}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=a},function(t,e,n){var r=n(0).getChainSafe,o=n(1).get();function i(t,e,n,o){return r.apply(void 0,[t].concat(_toConsumableArray(n)))||r.apply(void 0,[e].concat(_toConsumableArray(n)))||o&&r.apply(void 0,[t].concat(_toConsumableArray(o)))||o&&r.apply(void 0,[e].concat(_toConsumableArray(o)))}var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),e.hiliteBorderColor&&!e.highlightBorderColor&&(console.warn("Please use highlightBorderColor instead of hiliteBorderColor. cheetah-grid@>=0.7"),e.highlightBorderColor=e.hiliteBorderColor),this[o]={obj:e,superTheme:n}}return _createClass(t,[{key:"extends",value:function(e){return new t(e,this)}},{key:"font",get:function(){var t=this[o];return i(t.obj,t.superTheme,["font"])}},{key:"underlayBackgroundColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["underlayBackgroundColor"])}},{key:"color",get:function(){var t=this[o];return i(t.obj,t.superTheme,["color"])}},{key:"frozenRowsColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["frozenRowsColor"],["color"])}},{key:"defaultBgColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["defaultBgColor"])}},{key:"frozenRowsBgColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["frozenRowsBgColor"],["defaultBgColor"])}},{key:"selectionBgColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["selectionBgColor"],["defaultBgColor"])}},{key:"borderColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["borderColor"])}},{key:"frozenRowsBorderColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["frozenRowsBorderColor"],["borderColor"])}},{key:"highlightBorderColor",get:function(){var t=this[o];return i(t.obj,t.superTheme,["highlightBorderColor"],["borderColor"])}},{key:"checkbox",get:function(){var t=this[o],e=t.obj,n=t.superTheme;return this._checkbox||(this._checkbox={get uncheckBgColor(){return i(e,n,["checkbox","uncheckBgColor"],["defaultBgColor"])},get checkBgColor(){return i(e,n,["checkbox","checkBgColor"],["defaultBgColor"])},get borderColor(){return i(e,n,["checkbox","borderColor"],["borderColor"])}})}},{key:"button",get:function(){var t=this[o],e=t.obj,n=t.superTheme;return this._button||(this._button={get color(){return i(e,n,["button","color"],["color"])},get bgColor(){return i(e,n,["button","bgColor"],["defaultBgColor"])}})}},{key:"header",get:function(){var t=this[o],e=t.obj,n=t.superTheme;return this._header||(this._header={get sortArrowColor(){return i(e,n,["header","sortArrowColor"],["color"])}})}}]),t}();t.exports={Theme:a}},function(t,e,n){var r={};t.exports={color:"#000",defaultBgColor:function(t){return t.row-t.grid.frozenRowCount&1?"#F6F6F6":"#FFF"},frozenRowsBgColor:function(t){var e=t.col,n=t.grid,o=t.grid.frozenRowCount,i=t.context,a=n.getCellRelativeRect(e,0),l=a.left;return function(t,e,n,o,i,a){var l,s=[];for(l in a)s.push("".concat(l,"@").concat(a[l]));var c="".concat(e,"/").concat(n,"/").concat(o,"/").concat(i,"/").concat(s.join(",")),u=r[c];if(u)return u;var h=t.createLinearGradient(e,n,e,i);for(l in a)h.addColorStop(l,a[l]);return r[c]=h}(i,l,a.top,l,n.getCellRelativeRect(e,o-1).bottom,{0:"#FFF",1:"#D3D3D3"})},selectionBgColor:"#CCE0FF",borderColor:"#000",highlightBorderColor:"#5E9ED6",checkbox:{uncheckBgColor:"#FFF",checkBgColor:"rgb(76, 73, 72)"},button:{color:"#FFF",bgColor:"#2196F3"},header:{sortArrowColor:"rgba(0, 0, 0, 0.38)"},underlayBackgroundColor:"#F6F6F6"}},function(t,e,n){t.exports={color:"rgba(0, 0, 0, 0.87)",frozenRowsColor:"rgba(0, 0, 0, 0.54)",defaultBgColor:"#FFF",selectionBgColor:"#CCE0FF",borderColor:function(t){var e=t.col,n=t.grid,r=n.colCount;return n.frozenColCount-1===e?["#ccc7c7","#f2f2f2","#ccc7c7",null]:r-1===e?["#ccc7c7","#f2f2f2","#ccc7c7",null]:["#ccc7c7",null]},frozenRowsBorderColor:function(t){var e=t.row;return t.grid.frozenRowCount-1===e?["#f2f2f2","#f2f2f2","#ccc7c7","#f2f2f2"]:["#f2f2f2"]},highlightBorderColor:"#5E9ED6",checkbox:{checkBgColor:"rgb(76, 73, 72)",borderColor:"rgba(0, 0, 0, 0.26)"},button:{color:"#FFF",bgColor:"#2196F3"},header:{sortArrowColor:"rgba(0, 0, 0, 0.38)"},underlayBackgroundColor:"#FFF"}},function(t,e,n){var r=n(0).getChainSafe,o=n(24);var i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._rCache={},t._fCache={},t}return _inherits(e,o),_createClass(e,null,[{key:"ofArray",value:function(t){return new e({get:function(e){return t[e]},length:t.length})}},{key:"EVENT_TYPE",get:function(){return o.EVENT_TYPE}}]),_createClass(e,[{key:"getOriginal",value:function(t){return this._rCache&&this._rCache[t]?this._rCache[t]:_get(_getPrototypeOf(e.prototype),"getOriginal",this).call(this,t)}},{key:"getOriginalField",value:function(t,n){var o=r(this._fCache,t,n);return o||_get(_getPrototypeOf(e.prototype),"getOriginalField",this).call(this,t,n)}},{key:"setOriginalField",value:function(t,n,r){var o=this._fCache;return o&&o[t]&&delete o[t],_get(_getPrototypeOf(e.prototype),"setOriginalField",this).call(this,t,n,r)}},{key:"clearCache",value:function(){this._rCache&&(this._rCache={}),this._fCache&&(this._fCache={})}},{key:"fieldPromiseCallBackInternal",value:function(t,e,n){!function(t,e,n,r){var o=t._fCache;(o[e]||(o[e]={}))[n]=r}(this,t,e,n)}},{key:"recordPromiseCallBackInternal",value:function(t,e){this._rCache[t]=e}},{key:"dispose",value:function(){_get(_getPrototypeOf(e.prototype),"dispose",this).call(this)}}]),e}();t.exports=i},function(t,e,n){var r=n(0).isPromise,o=n(24),i=function(){function t(e){_classCallCheck(this,t),this._dataSource=e,this._curIndex=-1,this._data=[]}return _createClass(t,[{key:"hasNext",value:function(){var t=this._curIndex+1;return this._dataSource.length>t}},{key:"next",value:function(){var t=this._curIndex+1,e=this._getIndexData(t);return this._curIndex=t,e}},{key:"movePrev",value:function(){this._curIndex--}},{key:"_getIndexData",value:function(t,e){var n=this._dataSource,o=this._data;if(t<o.length)return o[t];if(!(n.length<=t)){var i=this._dataSource.get(t);if(o[t]=i,r(i)&&(i.then(function(e){o[t]=e}),!e))for(var a=1;a<=100;a++)this._getIndexData(t+a,!0);return i}}}]),t}(),a=function(){function t(e,n,r){_classCallCheck(this,t),this._owner=e,this._dataSourceItr=new i(n),this._filter=r,this._filterdList=[],this._queues=[]}return _createClass(t,[{key:"get",value:function(t){if(!this._cancel){var e=this._filterdList;if(t<e.length)return e[t];var n=this._queues;return n[t]?n[t]:n[t]||this._findIndex(t)}}},{key:"cancel",value:function(){this._cancel=!0}},{key:"_findIndex",value:function(t){if(window.Promise){var e=Date.now()+100,n=0;return this._findIndexWithTimeout(t,function(){return++n>=100&&(n=0,e<Date.now())})}return this._findIndexWithTimeout(t,function(){return!1})}},{key:"_findIndexWithTimeout",value:function(t,e){for(var n=this,o=this._filterdList,i=this._filter,a=this._dataSourceItr,l=this._queues;a.hasNext();){if(this._cancel)return;var s=a.next();if(r(s))return a.movePrev(),l[t]=s.then(function(e){return l[t]=null,n.get(t)});if(i(s)&&(o.push(s),t<o.length))return o[t];if(e()){var c=new Promise(function(t){setTimeout(function(){t()},300)});return l[t]=c.then(function(){return l[t]=null,n.get(t)}),l[t]}}this._owner.length=o.length}}]),t}(),l=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t)))._dataSource=t,r.filter=n,r}return _inherits(e,o),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return o.EVENT_TYPE}}]),_createClass(e,[{key:"getOriginal",value:function(t){return this._filterData?this._filterData.get(t):_get(_getPrototypeOf(e.prototype),"getOriginal",this).call(this,t)}},{key:"filter",get:function(){return this._filterData&&this._filterData._filter||void 0},set:function(t){this._filterData&&this._filterData.cancel(),this._filterData=t?new a(this,this._dataSource,t):void 0,this.length=this._dataSource.length}}]),e}();t.exports=l},function(t,e,n){(function(e){var r=n(0),o=r.isDef,i=r.isPromise,a=r.then,l=r.obj.isObject,s=n(51),c=n(32),u=c.style.BaseStyle,h=n(119),f=n(16).BaseStyle,d=n(7),v=n(49),g=v.DataSource,p=v.CachedDataSource,_=n(23),y=n(22),C=n(124),m=n(136),w=n(26),b=n(1).PROTECTED_SYMBOL,x=0;function k(t,e,n){return t[b].headerMap.getHeaderCellRange(e,n)}function E(t,e,n){if(n<t[b].headerMap.rowCount)return t[b].headerMap.getCell(e,n).caption;var r=t[b].headerMap.columns[e].field;return l(r)&&r.get&&r.set&&(r=r.get),S(t,r,n)}function I(t,e,n){if(n<t[b].headerMap.rowCount)return null;var r=t[b].headerMap.columns[e].message;return r?S(t,r,n):null}function L(t,n,r){if(!o(n))return null;if(e(n))return n.map(function(e){return L(t,e,r)});if(!l(n))return S(t,n,r);var i={};return y.iconPropKeys.forEach(function(e){if(n[e]){var a=S(t,n[e],r);o(a)?i[e]=a:function(t,e,n){if(!o(e))return!1;if(n<t[b].headerMap.rowCount)return!1;var r=B(t,n);return t[b].dataSource.hasField(r,e)}(t,n[e],r)||(i[e]=n[e])}}),i}function S(t,e,n){if(!o(e))return null;if(n<t[b].headerMap.rowCount)return null;var r=B(t,n);return t[b].dataSource.getField(r,e)}function T(t,e,n,r,o,i){var a=r.col,l=r.row,s=t[b].gridCanvasHelper,c=function(){var t={fillColor:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor};s.fillCellWithState(n,t)},u=function(){if(n.col===t.frozenColCount-1){var e=n.getRect();s.drawWithClip(n,function(r){var o=n.row>=t.frozenRowCount?s.theme.borderColor:s.theme.frozenRowsBorderColor,i=s.toBoxArray(s.getColor(o,n.col,n.row,r));i[1]&&(r.lineWidth=1,r.strokeStyle=i[1],r.beginPath(),r.moveTo(e.right-2.5,e.top),r.lineTo(e.right-2.5,e.bottom),r.stroke())})}n.row<t[b].headerMap.rowCount?function(t,e,n){var r=n.col,o=n.row,i=t.selection.select;if(i.row>=t[b].headerMap.rowCount)return void e.borderWithState(n);var a=t[b].headerMap.getCell(r,o).id,l=n.getRect(),s={},c=t[b].headerMap.getCell(i.col,i.row).id;if(c===a)s.borderColor=e.theme.highlightBorderColor,s.lineWidth=2,e.border(n,s);else{s.lineWidth=1;var u=t.isFrozenCell(r,o);u&&u.row&&(s.borderColor=e.theme.frozenRowsBorderColor),e.border(n,s),r>0&&t[b].headerMap.getCell(r-1,o).id===c?e.drawBorderWithClip(n,function(t){var n=e.toBoxArray(e.getColor(e.theme.highlightBorderColor,i.col,i.row,t));n[1]&&(t.lineWidth=1,t.strokeStyle=n[1],t.beginPath(),t.moveTo(l.left-.5,l.top),t.lineTo(l.left-.5,l.bottom),t.stroke())}):o>0&&t[b].headerMap.getCell(r,o-1).id===c&&e.drawBorderWithClip(n,function(t){var n=e.toBoxArray(e.getColor(e.theme.highlightBorderColor,i.col,i.row,t));n[0]&&(t.lineWidth=1,t.strokeStyle=n[0],t.beginPath(),t.moveTo(l.left,l.top-.5),t.lineTo(l.right,l.top-.5),t.stroke())})}}(t,s,n):s.borderWithState(n)};return i(e,{getRecord:function(){return t.getRowRecord(l)},getIcon:function(){return function(t,e,n){return L(t,t[b].headerMap.columns[e].icon,n)}(t,a,l)},getMessage:function(){return I(t,a,l)},messageHandler:t[b].messageHandler,style:o,drawCellBase:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor;c({bgColor:t}),u()},drawCellBg:c,drawCellBorder:u},n,t)}function R(t){t[b].headerEvents&&t[b].headerEvents.forEach(function(e){return t.unlisten(e)}),t[b].headerMap=new D(t[b].header),t[b].headerEvents=[],t[b].headerMap.headerObjects.forEach(function(e){var n,r=e.headerType.bindGridEvent(t);if((n=t[b].headerEvents).push.apply(n,_toConsumableArray(r)),e.style&&e.style instanceof f){var o=e.style.listen(f.EVENT_TYPE.CHANGE_STYLE,function(){t.invalidate()});t[b].headerEvents.push(o)}}),t[b].headerMap.columns.forEach(function(e,n){if(e.action){var r,o=e.action.bindGridEvent(t,n,{isTarget:function(e,r){return n===e&&t.frozenRowCount<=r}});(r=t[b].headerEvents).push.apply(r,_toConsumableArray(o))}if(e.columnType){var i,a=e.columnType.bindGridEvent(t,n,{isTarget:function(e,r){return n===e&&t.frozenRowCount<=r}});(i=t[b].headerEvents).push.apply(i,_toConsumableArray(a))}if(e.style&&e.style instanceof u){var l=e.style.listen(c.style.EVENT_TYPE.CHANGE_STYLE,function(){t.invalidate()});t[b].headerEvents.push(l)}}),t.colCount=t[b].headerMap.columns.length,A(t),t.frozenRowCount=t[b].headerMap.rowCount;for(var n=0;n<t[b].headerMap.columns.length;n++){var r=t[b].headerMap.columns[n],o=r.width,i=r.minWidth,a=r.maxWidth;o&&(o>0||"string"==typeof o)&&t.setColWidth(n,o),i&&(i>0||"string"==typeof i)&&t.setMinColWidth(n,i),a&&(a>0||"string"==typeof a)&&t.setMaxColWidth(n,a)}for(var l=e(t[b].headerRowHeight),s=0;s<t[b].headerMap.rowCount;s++){var h=l?t[b].headerRowHeight[s]:t[b].headerRowHeight;h&&h>0&&t.setRowHeight(s,h)}}function A(t){t.rowCount=t[b].dataSource.length+t[b].headerMap.rowCount}function O(t,e){t[b].dataSourceEventIds&&t[b].dataSourceEventIds.forEach(function(e){return t[b].handler.off(e)}),e(t),t[b].dataSourceEventIds=[t[b].handler.on(t[b].dataSource,g.EVENT_TYPE.UPDATED_LENGTH,function(){A(t),t.invalidate()}),t[b].handler.on(t[b].dataSource,g.EVENT_TYPE.UPDATED_ORDER,function(){t.invalidate()})]}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];O(t,function(){t[b].records=e,t[b].dataSource=p.ofArray(t[b].records)})}function P(t,e){O(t,function(){t[b].dataSource=e?e instanceof g?e:new p(e):g.EMPTY,t[b].records=null})}function B(t,e){return e<t[b].headerMap.rowCount?void 0:e-t[b].headerMap.rowCount}var D=function(){function t(e){_classCallCheck(this,t),this._columns=[],this._headerCells=[],this._headerObjects=[],this._addHeaders(0,e,[]),this._setupHeaderType()}return _createClass(t,[{key:"getCell",value:function(t,e){return this._headerCells[e][t]}},{key:"getHeaderCellRangeById",value:function(t){for(var e=0;e<this.rowCount;e++)for(var n=0;n<this.columns.length;n++)if(t===this.getCell(n,e).id)return this.getHeaderCellRange(n,e)}},{key:"getHeaderCellRange",value:function(t,e){for(var n={startCol:t,startRow:e,endCol:t,endRow:e,isCellInRange:function(t,e){return this.startCol<=t&&t<=this.endCol&&this.startRow<=e&&e<=this.endRow}},r=this.getCell(t,e).id,o=t-1;o>=0&&r===this.getCell(o,e).id;o--)n.startCol=o;for(var i=t+1;i<this.columns.length&&r===this.getCell(i,e).id;i++)n.endCol=i;for(var a=e-1;a>=0&&r===this.getCell(t,a).id;a--)n.startRow=a;for(var l=e+1;l<this.rowCount&&r===this.getCell(t,l).id;l++)n.endRow=l;return n}},{key:"_addHeaders",value:function(t,e,n){var r=this,o=this._headerCells[t]||this._newRow(t);e.forEach(function(e){var i=r._columns.length,a={id:x++,caption:e.caption,style:e.headerStyle,sort:e.sort};r._headerObjects.push(a),o[i]=a;for(var l=t-1;l>=0;l--)r._headerCells[l][i]=n[l];if(e.columns)r._addHeaders(t+1,e.columns,_toConsumableArray(n).concat([a]));else{r._columns.push({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,field:e.field,icon:e.icon,message:e.message,columnType:c.type.of(e.columnType),action:c.action.of(e.action),style:e.style,define:e});for(var s=t+1;s<r._headerCells.length;s++)r._headerCells[s][i]=a}})}},{key:"_setupHeaderType",value:function(){var t=this;this._headerObjects.forEach(function(e){e.range=t.getHeaderCellRangeById(e.id),e.headerType=h.create(e)})}},{key:"_newRow",value:function(t){var e=this._headerCells[t]=[];if(!this._columns.length)return e;for(var n=this._headerCells[t-1],r=0;r<n.length;r++)e[r]=n[r];return e}},{key:"columns",get:function(){return this._columns}},{key:"rowCount",get:function(){return this._headerCells.length}},{key:"headerObjects",get:function(){return this._headerObjects}}]),t}();var F=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,function(t){return t&&(delete t.frozenRowCount,delete t.colCount,delete t.rowCount),t}(n))))[b].header=n.header||[],t[b].headerRowHeight=n.headerRowHeight||[],n.dataSource?P(_assertThisInitialized(_assertThisInitialized(t)),n.dataSource):M(_assertThisInitialized(_assertThisInitialized(t)),n.records),R(_assertThisInitialized(_assertThisInitialized(t))),t[b].sortState={col:-1,order:void 0},t[b].gridCanvasHelper=new s(_assertThisInitialized(_assertThisInitialized(t))),t[b].theme=_.of(n.theme),t[b].messageHandler=new C(_assertThisInitialized(_assertThisInitialized(t)),function(e,n){return I(_assertThisInitialized(_assertThisInitialized(t)),e,n)}),t[b].tooltipHandler=new m(_assertThisInitialized(_assertThisInitialized(t))),t.invalidate(),t[b].handler.on(window,"resize",function(){t.updateSize(),t.updateScroll(),t.invalidate()}),t}return _inherits(e,d),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return w}}]),_createClass(e,[{key:"dispose",value:function(){this[b].messageHandler.dispose(),this[b].tooltipHandler.dispose(),_get(_getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"getField",value:function(t){return this[b].headerMap.columns[t].field}},{key:"getRowRecord",value:function(t){return t<this[b].headerMap.rowCount?void 0:this[b].dataSource.get(B(this,t))}},{key:"getColumnIndexByField",value:function(t){for(var e in this[b].headerMap.columns)if(this[b].headerMap.columns[e].field===t)return e-0;return null}},{key:"focusGridCell",value:function(t,e){var n=this.selection.range,r=n.start,o=r.col,i=r.row,a=n.end,l=a.col,s=a.row,c=this.getColumnIndexByField(t),u=e+this[b].headerMap.rowCount;this.focusCell(c,u),this.selection.select={col:c,row:u},this.invalidateGridRect(o,i,l,s),this.invalidateCell(c,u)}},{key:"makeVisibleGridCell",value:function(t,e){this.makeVisibleCell(this.getColumnIndexByField(t),e+this[b].headerMap.rowCount)}},{key:"getGridCanvasHelper",value:function(){return this[b].gridCanvasHelper}},{key:"getCopyCellValue",value:function(t,e){if(e<this[b].headerMap.rowCount){var n=k(this,t,e),r=n.startCol,o=n.startRow;if(r!==t||o!==e)return""}return E(this,t,e)}},{key:"onDrawCell",value:function(t,e,n){var r,o,i=this[b].headerMap.columns[t];if(e<this[b].headerMap.rowCount){var a=this[b].headerMap.getCell(t,e);r=a.headerType.onDrawCell,o=a.style,function(t,e,n,r){for(var o=r.getRect(),i=k(t,e,n),a=i.startCol,l=i.endCol,s=i.startRow,c=i.endRow,u=e-1;u>=a;u--)o.left-=t.getColWidth(u);for(var h=e+1;h<=l;h++)o.right+=t.getColWidth(h);for(var f=n-1;f>=s;f--)o.top-=t.getRowHeight(f);for(var d=n+1;d<=c;d++)o.bottom+=t.getRowHeight(d);r.setRect(o)}(this,t,e,n)}else r=i.columnType.onDrawCell,o=i.style;return T(this,E(this,t,e),n,{col:t,row:e},o,r)}},{key:"doGetCellValue",value:function(t,e,n){if(e<this[b].headerMap.rowCount)return!1;var r=E(this,t,e);return!i(r)&&(n(r),!0)}},{key:"doChangeValue",value:function(t,e,n){var r=this;if(e<this[b].headerMap.rowCount)return!1;var o=E(this,t,e);if(i(o))return!1;var s=n(o);return void 0!==s&&a(function(t,e,n,r){if(n<t[b].headerMap.rowCount)return!1;var o=t[b].headerMap.columns[e].field;l(o)&&o.get&&o.set&&(o=o.set);var a=B(t,n),s=t[b].dataSource.setField(a,o,r);return!i(s)||s}(this,t,e,s),function(n){if(n){var o=r[b].headerMap.columns[t].field,i=r;r.fireListeners(w.CHANGED_VALUE,{col:t,row:e,get record(){return i.getRowRecord(e)},field:o,value:s})}return n})}},{key:"bindEventsInternal",value:function(){var t=this;this.listen(w.SELECTED_CELL,function(e){if(e.row<t[b].headerMap.rowCount){var n=k(t,e.col,e.row),r=n.startCol,o=n.endCol,i=n.startRow,a=n.endRow;r===o&&i===a||t.invalidateGridRect(r,i,o,a)}})}},{key:"getMoveLeftColByKeyDownInternal",value:function(t){var n=t.col,r=t.row;r<this[b].headerMap.rowCount&&(n=k(this,n,r).startCol);return _get(_getPrototypeOf(e.prototype),"getMoveLeftColByKeyDownInternal",this).call(this,{col:n,row:r})}},{key:"getMoveRightColByKeyDownInternal",value:function(t){var n=t.col,r=t.row;r<this[b].headerMap.rowCount&&(n=k(this,n,r).endCol);return _get(_getPrototypeOf(e.prototype),"getMoveRightColByKeyDownInternal",this).call(this,{col:n,row:r})}},{key:"getMoveUpRowByKeyDownInternal",value:function(t){var n=t.col,r=t.row;r<this[b].headerMap.rowCount&&(r=k(this,n,r).startRow);return _get(_getPrototypeOf(e.prototype),"getMoveUpRowByKeyDownInternal",this).call(this,{col:n,row:r})}},{key:"getMoveDownRowByKeyDownInternal",value:function(t){var n=t.col,r=t.row;r<this[b].headerMap.rowCount&&(r=k(this,n,r).endRow);return _get(_getPrototypeOf(e.prototype),"getMoveDownRowByKeyDownInternal",this).call(this,{col:n,row:r})}},{key:"getOffsetInvalidateCells",value:function(){return 1}},{key:"header",get:function(){return this[b].header},set:function(t){this[b].header=t,R(this)}},{key:"records",get:function(){return this[b].records},set:function(t){M(this,t),A(this),this.invalidate()}},{key:"dataSource",get:function(){return this[b].dataSource},set:function(t){P(this,t),A(this),this.invalidate()}},{key:"theme",get:function(){return this[b].theme},set:function(t){this[b].theme=_.of(t),this.invalidate()}},{key:"font",get:function(){return _get(_getPrototypeOf(e.prototype),"font",this)||this[b].gridCanvasHelper.theme.font},set:function(t){_set(_getPrototypeOf(e.prototype),"font",t,this,!0)}},{key:"underlayBackgroundColor",get:function(){return _get(_getPrototypeOf(e.prototype),"underlayBackgroundColor",this)||this[b].gridCanvasHelper.theme.underlayBackgroundColor},set:function(t){_set(_getPrototypeOf(e.prototype),"underlayBackgroundColor",t,this,!0)}},{key:"sortState",get:function(){return this[b].sortState},set:function(t){this[b].sortState=o(t)?t:{col:-1,order:void 0}}}]),e}();t.exports=F}).call(this,n(2).Array_isArray)},function(t,e,n){(function(e){var r=n(12),o=n(103),i=n(53),a=n(106),l=n(107),s=n(108),c=n(0).isDef,u=n(8).calcStartPosition,h=n(54),f=n(25);t.exports={iconOf:function(t){if(t instanceof r)return t;if(!t)return null;if(t.font&&t.content)return new o(t);if(t.src)return new i({src:t.src,width:t.width,height:t.width});if(t.svg)return new a({svg:t.svg,width:t.width,height:t.width});if(t.path)return new s({path:t.path,width:t.width,height:t.width,color:t.color});var e=h.get();if(t.name&&e[t.name]){var n=e[t.name],c=t.width||Math.max(n.width,n.height);return new l({draw:function(t){var e=t.ctx,r=(t.canvashelper,t.rect),o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;!function(t,e,n,r,o,i,a,l){var s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=s.offset,h=void 0===c?2:c,d=s.padding,v={left:o,top:i,width:a,height:l,right:o+a,bottom:i+l};t.save();try{t.beginPath(),t.rect(v.left,v.top,v.width,v.height),t.clip();var g=u(t,v,n,r,{offset:h,padding:d});f.fill(e,t,g.x,g.y,n,r)}finally{t.restore()}}(e,n,c,c,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})},width:c,height:c,color:t.color})}return new o(t)},of:function(t){return c(t)?t instanceof r?t:new r(t):null},buildInlines:function(t,n){var o=this,i=[];if(t&&i.push.apply(i,_toConsumableArray(t.map(function(t){return o.iconOf(t)}).filter(function(t){return!!t}))),e(n)&&n.filter(function(t){return t instanceof r}).length)i.push.apply(i,_toConsumableArray(n.map(function(t){return o.of(t)}).filter(function(t){return!!t})));else{var a=this.of(n);a&&i.push(a)}return i},string:function(t){return this.buildInlines(void 0,t).join("")}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(12),o=n(52),i=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._icon=t||{},n}return _inherits(e,r),_createClass(e,[{key:"width",value:function(t){var e=t.ctx,n=this._icon;if(n.width)return n.width;if(n.font&&o.check(n.font,n.content)){e.save();try{return e.font=n.font||e.font,e.measureText(n.content).width}finally{e.restore()}}return null}},{key:"font",value:function(){return this._icon.font}},{key:"color",value:function(){return this._icon.color}},{key:"canDraw",value:function(){var t=this._icon;return!t.font||o.check(t.font,t.content)}},{key:"onReady",value:function(t){var e=this._icon;e.font&&!o.check(e.font,e.content)&&o.load(e.font,e.content,t)}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom,c=this._icon;c.content&&n.fillTextRect(e,c.content,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),e}();t.exports=i},function(t,e,n){var r=n(105),o={SERIF:"serif",SANS_SERIF:"sans-serif"},i={},a=function(){function t(e,n){_classCallCheck(this,t),this.activeCallbacks=[],this.inactiveCallbacks=[],this.status=null,this.lastResortWidths_={},this.fontRulerA_=new r("".concat(e,",").concat(o.SERIF),n),this.fontRulerB_=new r("".concat(e,",").concat(o.SANS_SERIF),n);var i=new r("4px ".concat(o.SERIF),n),a=new r("4px ".concat(o.SANS_SERIF),n);this.lastResortWidths_[o.SERIF]=i.getWidth(),this.lastResortWidths_[o.SANS_SERIF]=a.getWidth(),i.remove(),a.remove(),this.started_=Date.now(),this.check_()}return _createClass(t,null,[{key:"load",value:function(e,n,r,o){var a=i[e]||(i[e]={});(a[n+=""]?a[n]:a[n]=new t(e,n)).then(r,o)}}]),_createClass(t,[{key:"then",value:function(t,e){this.status?"ng"!==this.status?t():e():(this.activeCallbacks.push(t),this.inactiveCallbacks.push(e))}},{key:"check_",value:function(){var t=this,e=this.fontRulerA_.getWidth(),n=this.fontRulerB_.getWidth();this.isFallbackFont_(e,n)||this.isLastResortFont_(e,n)?Date.now()-this.started_>=3e3?this.isLastResortFont_(e,n)?(this.finish_(this.activeCallbacks),this.status="ok"):(this.finish_(this.inactiveCallbacks),this.status="ng"):setTimeout(function(){t.check_()},50):(this.finish_(this.activeCallbacks),this.status="ok")}},{key:"isFallbackFont_",value:function(t,e){return this.widthMatches_(t,o.SERIF)&&this.widthMatches_(e,o.SANS_SERIF)}},{key:"widthsMatchLastResortWidths_",value:function(t,e){for(var n in o)if(o.hasOwnProperty(n)&&this.widthMatches_(t,o[n])&&this.widthMatches_(e,o[n]))return!0;return!1}},{key:"widthMatches_",value:function(t,e){return t===this.lastResortWidths_[e]}},{key:"isLastResortFont_",value:function(t,e){return function(){if(null===l){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return l}()&&this.widthsMatchLastResortWidths_(t,e)}},{key:"finish_",value:function(t){var e=this;setTimeout(function(){e.fontRulerA_.remove(),e.fontRulerB_.remove(),t.forEach(function(t){return t()})},0)}}]),t}(),l=null;t.exports=a},function(t,e,n){var r=function(){function t(e,n){_classCallCheck(this,t);var r=document.createElement("span");r.setAttribute("aria-hidden","true"),r.textContent=n||"BESbswy",function(t){return[{display:"block",position:"absolute",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0","white-space":"nowrap",font:t},{"font-variant":"normal","font-size":"300px","font-style":"normal","font-weight":"400","line-height":"normal"}]}(e).forEach(function(t){for(var e in t)r.style[e]=t[e]}),document.body.appendChild(r),this.el_=r}return _createClass(t,[{key:"getWidth",value:function(){return this.el_.offsetWidth}},{key:"remove",value:function(){document.body.removeChild(this.el_)}}]),t}();t.exports=r},function(t,e,n){var r=n(53),o=n(0).then;function i(t){var e="string"==typeof t?t:(new XMLSerializer).serializeToString(t);return"data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(e))}function a(t){return"string"==typeof t?(new DOMParser).parseFromString(t,"image/svg+xml"):t}var l=function(t){function e(t){var n=t.svg,r=t.width,l=t.height;t.imageLeft,t.imageTop,t.imageWidth,t.imageHeight;_classCallCheck(this,e);var s=o(n,a),c=s.getAttribute?s.getAttribute("width"):null,u=s.getAttribute?s.getAttribute("height"):null;return _possibleConstructorReturn(this,_getPrototypeOf(e).call(this,{src:o(n,i),width:r||c,height:l||u,imageWidth:c,imageHeight:u}))}return _inherits(e,r),_createClass(e,[{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),e}();t.exports=l},function(t,e,n){var r=n(12),o=function(t){function e(t){var n,r=t.draw,o=t.width,i=t.height,a=t.color;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._draw=r,n._width=o,n._height=i,n._color=a,n}return _inherits(e,r),_createClass(e,[{key:"width",value:function(t){t.ctx;return this._width}},{key:"font",value:function(){return null}},{key:"color",value:function(){return this._color}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;this._draw({ctx:e,canvashelper:n,rect:r,offset:o,offsetLeft:i,offsetRight:a,offsetTop:l,offsetBottom:s})}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),e}();t.exports=o},function(t,e,n){var r=n(12),o=n(8).calcStartPosition,i=n(25),a=function(t){function e(t){var n,r=t.path,o=t.width,a=t.height,l=t.color;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._path=new i.Path2D(r),n._width=o,n._height=a,n._color=l,n}return _inherits(e,r),_createClass(e,[{key:"width",value:function(t){t.ctx;return this._width}},{key:"font",value:function(){return null}},{key:"color",value:function(){return this._color}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,n=(t.canvashelper,t.rect),r=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;r++;var c={left:i,right:a,top:l,bottom:s};e.save();try{e.beginPath(),e.rect(n.left,n.top,n.width,n.height),e.clip();var u=o(e,n,this._width,this._height,{offset:r,padding:c});e.translate(u.x,u.y),e.fill(this._path)}finally{e.restore()}}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),e}();t.exports=a},function(t,e,n){var r=new(n(110)),o=function t(e){var n=this;if(_classCallCheck(this,t),this._ops=[],["closePath","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","arc","rect"].forEach(function(t){n[t]=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];n._ops.push({op:t,args:r})}}),void 0!==e)if("string"==typeof e)try{this._ops=r.parse(e)}catch(t){throw t}else{if(!e.hasOwnProperty("_ops"))throw new Error("Error: ".concat(_typeof(e)," is not a valid argument to Path"));this._ops=_toConsumableArray(this._ops)}},i=window.CanvasRenderingContext2D,a=i.prototype.fill;i.prototype.fill=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n[0]instanceof o){var i=n[0];this.beginPath(),i._ops.forEach(function(e){t[e.op].apply(t,_toConsumableArray(e.args))}),a.apply(this,Array.prototype.slice.call(n,1))}else a.apply(this,n)},t.exports=o},function(t,e,n){var r=n(111);function o(t,e,n){return"M"===e.toUpperCase()||"L"===e.toUpperCase()||"T"===e.toUpperCase()?(t.command(e,n.next(),n.next()),"M"===e?"L":"m"===e?"l":e):"H"===e.toUpperCase()||"V"===e.toUpperCase()?(t.command(e,n.next()),e):"Z"===e.toUpperCase()?(t.command(e),e):"C"===e.toUpperCase()?(t.command(e,n.next(),n.next(),n.next(),n.next(),n.next(),n.next()),e):"S"===e.toUpperCase()||"Q"===e.toUpperCase()?(t.command(e,n.next(),n.next(),n.next(),n.next()),e):"A"===e.toUpperCase()?(t.command(e,n.next(),n.next(),n.next(),n.next(),n.next(),n.next(),n.next()),e):(console.warn("unsupported:".concat(e)),null)}var i=window.CanvasRenderingContext2D?Object.keys(window.CanvasRenderingContext2D.prototype):["save","restore","beginPath","closePath","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","arc","arcTo","ellipse","rect","translate","rotate","scale"],a=function(){function t(){var e=this;_classCallCheck(this,t),this._commands=new r(this),i.forEach(function(t){e[t]=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e._ops.push({op:t,args:r})}})}return _createClass(t,[{key:"command",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r=r||[];for(var i=0;i<r.length;i++)r[i]-=0;(e=this._commands)[t].apply(e,_toConsumableArray(r))}},{key:"parse",value:function(t){var e=this,n=this._ops=[],r=function(t){var e=0;return{next:function(){for(var n="";t.length>e;){var r=t[e];if(e++," ,\n\r\t".indexOf(r)>-1){if(n)return n}else{if("str"==(".+-1234567890".indexOf(r)>-1?"num":"str"))return n?(e--,n):r;if("-+".indexOf(r)>-1&&n)return e--,n;if("."===r&&n.indexOf(".")>-1)return e--,n;n+=r}}return n||null}}}(t);try{!function(){for(var t,n;t=r.next();)isNaN(t-0)?n=o(e,t,r):function(){var i=!0;n=o(e,n,{next:function(){return i?(i=!1,t):r.next()}})}()}()}catch(e){throw console.log("Error: ".concat(t)),e}return n}}]),t}();t.exports=a},function(t,e,n){function r(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function o(t,e){var n=1;return t[0]*e[1]-t[1]*e[0]<0&&(n=-1),n*Math.acos(function(t,e,n){return Math.min(Math.max(t,e),n)}(function(t,e){return function(t,e){return t[0]*e[0]+t[1]*e[1]}(t,e)/(r(t)*r(e))}(t,e)),-1,1)}function i(t,e,n,r,i,a,l,s,c,u){if(0!==r&&0!==i){a*=Math.PI/180,r=Math.abs(r),i=Math.abs(i);var h=function(t,e){var n=Math.cos(e),r=Math.sin(e);return[n*t[0]+r*t[1],-1*r*t[0]+n*t[1]]}(function(t,e){return[(t[0]-e[0])/2,(t[1]-e[1])/2]}(e,c),a),f=function(t,e){return[t[0]*e[0],t[1]*e[1]]}(h,h),d=Math.pow(r,2),v=Math.pow(i,2),g=Math.sqrt(f[0]/d+f[1]/v);g>1&&(r*=g,i*=g,d=Math.pow(r,2),v=Math.pow(i,2));var p=Math.sqrt(Math.abs(d*v-d*f[1]-v*f[0])/(d*f[1]+v*f[0]));l===s&&(p*=-1);var _=function(t,e){return[t*e[0],t*e[1]]}(p,[r*h[1]/i,-i*h[0]/r]),y=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(function(t,e){var n=Math.cos(e),r=Math.sin(e);return[n*t[0]-r*t[1],r*t[0]+n*t[1]]}(_,a),function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e,c)),C=[(h[0]-_[0])/r,(h[1]-_[1])/i],m=[(-1*h[0]-_[0])/r,(-1*h[1]-_[1])/i],w=o([1,0],C),b=w,x=w+o(C,m);t.save(),t.translate(y[0],y[1]),t.rotate(a),t.scale(r,i),t.arc(0,0,1,b,x,1-s),t.restore()}else t.lineTo(c,e)}t.exports=function t(e){var n,r,o=this;_classCallCheck(this,t);var a,l=0,s=0,c="";function u(){return"CcSsQqTt".indexOf(c)<0?{x:l,y:s}:a}this.M=function(t,i){return e.moveTo(t,i),n=t,r=i,l=t,s=i,c="M",o},this.m=function(t,e){return o.M(t+l,e+s)},this.L=function(t,n){return e.lineTo(t,n),l=t,s=n,c="L",o},this.l=function(t,e){return o.L(t+l,e+s)},this.H=function(t){return o.L(t,s)},this.h=function(t){return o.H(t+l)},this.V=function(t){return o.L(l,t)},this.v=function(t){return o.V(t+s)},this.Z=function(){return e.closePath(),l=n,s=r,c="Z",o},this.z=function(){return o.Z()},this.C=function(t,n,r,i,u,h){return e.bezierCurveTo(t,n,r,i,u,h),l=u,s=h,a={x:2*u-r,y:2*h-i},c="C",o},this.c=function(t,e,n,r,i,a){return o.C(t+l,e+s,n+l,r+s,i+l,a+s)},this.S=function(t,e,n,r){var i=u(),a=i.x,l=i.y;return o.C(a,l,t,e,n,r)},this.s=function(t,e,n,r){return o.S(t+l,e+s,n+l,r+s)},this.Q=function(t,n,r,i){return e.quadraticCurveTo(t,n,r,i),l=r,s=i,a={x:2*r-t,y:2*i-n},c="Q",o},this.q=function(t,e,n,r){return o.Q(t+l,e+s,n+l,r+s)},this.T=function(t,e){var n=u(),r=n.x,i=n.y;return o.Q(r,i,t,e)},this.t=function(t,e){return o.T(t+l,e+s)},this.A=function(t,n,r,a,u,h,f){return i(e,l,0,t,n,r,a,u,h),l=h,s=f,c="A",o},this.a=function(t,e,n,r,i,a,c){return o.A(t,e,n,r,i,a+l,c+s)}}},function(t,e){t.exports={d:"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z",width:48,height:48}},function(t,e){t.exports={d:"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z",width:48,height:48}},function(t,e){t.exports={d:"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z",width:48,height:48}},function(t,e){t.exports={d:"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z",width:48,height:48}},function(t,e){t.exports={d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",width:24,height:24}},function(t,e){t.exports={d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},function(t,e){t.exports={d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},function(t,e,n){var r=n(120),o=n(123),i={create:function(t){return t.sort?new o(t):new r(t)}};t.exports=i},function(t,e,n){var r=n(16).Style,o=n(59),i=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"drawInternal",value:function(t,e,n,r,o,i){var a=i.drawCellBase,l=n.textAlign,s=n.textBaseline,c=n.color,u=n.font,h=n.bgColor,f=n.textOverflow;h&&a({bgColor:h}),r.text(t,e,{textAlign:l,textBaseline:s,color:c,font:u,textOverflow:f})}},{key:"bindGridEvent",value:function(t){return[]}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=i},function(t,e,n){var r,o=n(57),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._textAlign=n.textAlign||"left",t._textBaseline=n.textBaseline||"middle",t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"textAlign",get:function(){return this._textAlign},set:function(t){this._textAlign=t,this.doChangeStyle()}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r,o=n(58),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n)))._sortArrowColor=n.sortArrowColor,t}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return r||(r=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"sortArrowColor",get:function(){return this._sortArrowColor},set:function(t){this._sortArrowColor=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r=n(16).SortHeaderStyle,o=n(59),i=n(0).isDef,a=n(8).getFontSize,l=n(7).EVENT_TYPE,s=l.CLICK_CELL,c=l.MOUSEOVER_CELL,u=l.MOUSEOUT_CELL,h=l.MOUSEMOVE_CELL,f=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t)))._sort=t.sort,n._range=t.range,n}return _inherits(e,o),_createClass(e,[{key:"drawInternal",value:function(t,e,n,r,o,l){var s=l.drawCellBase,c=n.textAlign,u=n.textBaseline,h=void 0===u?"middle":u,f=n.color,d=n.bgColor,v=n.font,g=n.textOverflow,p=n.sortArrowColor;d&&s({bgColor:d});var _=o.sortState,y=void 0;this._range.isCellInRange(_.col,this._range.startRow)&&(y=_.order);var C=e.getContext(),m=e.col,w=e.row,b=1.2*a(C,v).width;r.text(t,e,{textAlign:c,textBaseline:h,color:f,font:v,textOverflow:g,icons:[{name:i(y)?"asc"===y?"arrow_downward":"arrow_upward":null,width:b,color:r.getColor(p||r.theme.header.sortArrowColor,m,w,C)||"rgba(0, 0, 0, 0.38)"}]})}},{key:"_executeSort",value:function(t,e){"function"==typeof this._sort?this._sort(t.order,t.col,e):e.dataSource.sort(e.getField(t.col),t.order)}},{key:"bindGridEvent",value:function(t){var e=this;return[t.listen(s,function(n){if(e._range.isCellInRange(n.col,n.row)){var r,o=t.sortState;r=e._range.isCellInRange(o.col,n.row)?{col:e._range.startCol,order:"asc"===o.order?"desc":"asc"}:{col:e._range.startCol,order:"asc"},t.sortState=r,e._executeSort(r,t),t.invalidateGridRect(0,0,t.colCount-1,t.rowCount-1)}}),t.listen(c,function(n){e._range.isCellInRange(n.col,n.row)&&(t.getElement().style.cursor="pointer")}),t.listen(h,function(n){e._range.isCellInRange(n.col,n.row)&&(t.getElement().style.cursor||(t.getElement().style.cursor="pointer"))}),t.listen(u,function(n){e._range.isCellInRange(n.col,n.row)&&(t.getElement().style.cursor="")})]}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=f},function(t,e,n){var r=n(0).isPromise,o=n(26),i=o.SELECTED_CELL,a=o.SCROLL,l=o.CHANGED_VALUE,s=n(125),c=n(131),u=n(135),h={type:"error",message:void 0},f={error:function(t){return new s(t)},info:function(t){return new u(t)},warning:function(t){return new c(t)}};function d(t){if(!t||r(t))return h;if("string"==typeof t)return{type:"error",message:t,original:t};var e=t.type||"error";return e&&e in f?{type:e.toLowerCase(),message:"".concat(t.message),original:t}:{type:"error",message:"".concat(t),original:t}}function v(t){return!!d(t).message}var g=function(){function t(e,n){_classCallCheck(this,t),this._grid=e,this._messageInstances={},this._bindGridEvent(e,n)}return _createClass(t,[{key:"dispose",value:function(){var t=this._messageInstances;for(var e in t)t[e].dispose();this._messageInstances=null}},{key:"drawCellMessage",value:function(t,e,n,r,o){v(t)&&this._getMessageInstanceOfMessage(t).drawCellMessage(t,e,n,r,o)}},{key:"_attach",value:function(t,e,n){var r=this._attachInfo,o=this._getMessageInstanceOfMessage(n);r&&r.instance!==o&&r.instance.detachMessageElement(),o.attachMessageElement(t,e,d(n)),this._attachInfo={col:t,row:e,instance:o}}},{key:"_move",value:function(t,e){var n=this._attachInfo;n&&n.col===t&&n.row===e&&n.instance.moveMessageElement(t,e)}},{key:"_detach",value:function(){var t=this._attachInfo;t&&(t.instance.detachMessageElement(),this._attachInfo=null)}},{key:"_bindGridEvent",value:function(t,e){var n=this,r=function(t){var r=e(t.col,t.row);v(r)?n._attach(t.col,t.row,r):n._detach()};t.listen(i,function(t){t.selected&&(t.before.col===t.col&&t.before.row===t.row||r(t))}),t.listen(a,function(){var e=t.selection.select;n._move(e.col,e.row)}),t.listen(l,function(e){var n=t.selection.select;n.col===e.col&&n.row===e.row&&r(e)})}},{key:"_getMessageInstanceOfMessage",value:function(t){var e=this._messageInstances,n=d(t).type;return e[n]||(e[n]=f[n](this._grid))}}]),t}();t.exports=g},function(t,e,n){var r=n(27),o=n(126),i=n(29),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,r),_createClass(e,[{key:"createMessageElementInternal",value:function(){return new o}},{key:"drawCellMessageInternal",value:function(t,e,n,r,o){var a=n.bgColor,l=e.getSelectState().selected;r.drawBorderWithClip(e,function(t){l||i.drawExclamationMarkBox(e,{bgColor:"#ff8a80",color:a},r)})}}]),e}();t.exports=a},function(t,e,n){var r=n(28),o="cheetah-grid__error-message-element",i="".concat(o,"__message"),a=function(t){function e(){var t;return _classCallCheck(this,e),t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),n(129),t._rootElement.classList.add(o),t._messageElement.classList.add(i),t}return _inherits(e,r),e}();t.exports=a},function(t,e,n){var r=n(128);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".cheetah-grid__message-element {\n\tposition: absolute;\n\tmargin-top: -2px;\n\tbox-sizing: border-box;\n\tborder-radius: 0 0 3px 3px;\n\tbackground-color: rgba(250, 250, 250, 0.85);\n\tpadding: 8px 2px;\n\n\tpointer-events: none;\n\tuser-select: none;\n}\n.cheetah-grid__message-element--hidden {\n\tdisplay: none;\n}\n.cheetah-grid__message-element--shown {\n\tdisplay: block;\n}\n.cheetah-grid__message-element__message {\n\tfont-family: Roboto;\n\tfont-size: 12px;\n\tfont-size: .75rem;\n\tmin-height: 1em;\n\tline-height: 1;\n\tdisplay: block;\n\twidth: 100%;\n}\n.cheetah-grid__message-element {\n\tborder-top: solid 1px rgba(0, 0, 0, .87);\n\tcolor: rgba(0, 0, 0, .87);\n}\n",""])},function(t,e,n){var r=n(130);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".cheetah-grid__error-message-element {\n\tborder-top: solid 1px #FF1744;\n\tcolor: #ff1744;\n}",""])},function(t,e,n){var r=n(27),o=n(132),i=n(29),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,r),_createClass(e,[{key:"createMessageElementInternal",value:function(){return new o}},{key:"drawCellMessageInternal",value:function(t,e,n,r,o){var a=n.bgColor,l=e.getSelectState().selected;r.drawBorderWithClip(e,function(t){l||i.drawExclamationMarkBox(e,{bgColor:"#ff9e80",color:a},r)})}}]),e}();t.exports=a},function(t,e,n){var r=n(28),o="cheetah-grid__warning-message-element",i="".concat(o,"__message"),a=function(t){function e(){var t;return _classCallCheck(this,e),t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),n(133),t._rootElement.classList.add(o),t._messageElement.classList.add(i),t}return _inherits(e,r),e}();t.exports=a},function(t,e,n){var r=n(134);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".cheetah-grid__warning-message-element {\n\tborder-top: solid 1px #dd2c00;\n\tcolor: #dd2c00;\n}",""])},function(t,e,n){var r=n(27),o=n(28),i=n(29),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,r),_createClass(e,[{key:"createMessageElementInternal",value:function(){return new o}},{key:"drawCellMessageInternal",value:function(t,e,n,r,o){var a=n.bgColor,l=e.getSelectState().selected;r.drawBorderWithClip(e,function(t){l||i.drawInfomationMarkBox(e,{bgColor:"#e0e0e0",color:a},r)})}}]),e}();t.exports=a},function(t,e,n){var r=n(26),o=r.SELECTED_CELL,i=r.SCROLL,a=r.CHANGED_VALUE,l=r.MOUSEOVER_CELL,s=r.MOUSEOUT_CELL,c=n(137),u={"overflow-text":function(t){return new c(t)}};var h=function(){function t(e){_classCallCheck(this,t),this._grid=e,this._tooltipInstances={},this._bindGridEvent(e)}return _createClass(t,[{key:"dispose",value:function(){var t=this._tooltipInstances;for(var e in t)t[e].dispose();this._tooltipInstances=null}},{key:"_attach",value:function(t,e){var n=this._attachInfo,r=this._getTooltipInstanceInfo(t,e);if(!n||r&&n.instance===r.instance||(n.instance.detachTooltipElement(),this._attachInfo=null),r){var o=r.instance;o.attachTooltipElement(t,e,r.content),this._attachInfo={col:t,row:e,instance:o}}}},{key:"_move",value:function(t,e){var n=this._attachInfo;n&&n.col===t&&n.row===e&&n.instance.moveTooltipElement(t,e)}},{key:"_detach",value:function(){var t=this._attachInfo;t&&(t.instance.detachTooltipElement(),this._attachInfo=null)}},{key:"_isAttachCell",value:function(t,e){var n=this._attachInfo;return!!n&&(n.col===t&&n.row===e)}},{key:"_bindGridEvent",value:function(t){var e=this;t.listen(l,function(t){e._attach(t.col,t.row)}),t.listen(s,function(t){e._detach()}),t.listen(o,function(t){e._isAttachCell(t.col,t.row)&&e._detach(t)}),t.listen(i,function(){var t=e._attachInfo;t&&e._move(t.col,t.row)}),t.listen(a,function(t){e._isAttachCell(t.col,t.row)&&(e._detach(),e._attach(t.col,t.row))})}},{key:"_getTooltipInstanceInfo",value:function(t,e){var n=this._grid,r=this._tooltipInstances,o=function(t,e,n){var r=t.getCellOverflowText(e,n);return r?{type:"overflow-text",content:r}:null}(n,t,e);if(!o)return null;var i=o.type;return{instance:r[i]||(r[i]=u[i](n)),type:i,content:o.content}}}]),t}();t.exports=h},function(t,e,n){var r=n(138),o=n(139),i=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,r),_createClass(e,[{key:"createTooltipElementInternal",value:function(){return new o}}]),e}();t.exports=i},function(t,e,n){var r=function(){function t(e){_classCallCheck(this,t),this._grid=e}return _createClass(t,[{key:"dispose",value:function(){this.detachTooltipElement(),this._tooltipElement&&this._tooltipElement.dispose(),this._tooltipElement=null}},{key:"_getTooltipElement",value:function(){return this._tooltipElement||(this._tooltipElement=this.createTooltipElementInternal())}},{key:"createTooltipElementInternal",value:function(){}},{key:"attachTooltipElement",value:function(t,e,n){this._getTooltipElement().attach(this._grid,t,e,n)}},{key:"moveTooltipElement",value:function(t,e){this._getTooltipElement().move(this._grid,t,e)}},{key:"detachTooltipElement",value:function(){this._getTooltipElement()._detach()}}]),t}();t.exports=r},function(t,e,n){var r=n(4),o=n(10).createElement,i="cheetah-grid__tooltip-element",a="".concat(i,"__content"),l="".concat(i,"--hidden"),s="".concat(i,"--shown");var c=function(){function t(){_classCallCheck(this,t),this._handler=new r;var e=this._rootElement=function(){n(140);var t=o("div",{classList:[i,l]}),e=o("pre",{classList:[a]});return t.appendChild(e),t}();this._messageElement=e.querySelector(".".concat(a))}return _createClass(t,[{key:"dispose",value:function(){this.detach();var t=this._rootElement;t.parentElement&&t.parentElement.removeChild(t),this._handler.dispose(),this._rootElement=null,this._messageElement=null}},{key:"attach",value:function(t,e,n,r){var o=this._rootElement,i=this._messageElement;o.classList.remove(s),o.classList.add(l),this._attachCell(t,e,n)?(o.classList.add(s),o.classList.remove(l),i.textContent=r):this._detach()}},{key:"move",value:function(t,e,n){var r=this._rootElement;this._attachCell(t,e,n)?(r.classList.add(s),r.classList.remove(l)):this._detach()}},{key:"detach",value:function(){this._detach()}},{key:"_detach",value:function(){var t=this._rootElement;t.parentElement&&(t.classList.remove(s),t.classList.add(l))}},{key:"_attachCell",value:function(t,e,n){var r=this._rootElement,o=t.getAttachCellArea(e,n),i=o.element,a=o.rect,l=a.bottom,s=a.left,c=a.width,u=t.frozenRowCount,h=t.frozenColCount;if(n>=u&&u>0){if(l<t.getAttachCellArea(e,u-1).rect.bottom)return!1}else if(l<0)return!1;if(e>=h&&h>0){if(s<t.getAttachCellArea(h-1,n).rect.right)return!1}else if(s<0)return!1;var f=i.offsetHeight,d=i.offsetWidth;return!(f<l)&&(!(d<s)&&(r.style.top="".concat(l.toFixed(),"px"),r.style.left="".concat((s+c/2).toFixed(),"px"),r.style["min-width"]="".concat(c.toFixed(),"px"),r.parentElement!==i&&i.appendChild(r),!0))}}]),t}();t.exports=c},function(t,e,n){var r=n(141);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,"@keyframes cheetah-grid__tooltip-element--shown-animation {\n\t0% {\n\t\topacity: 0;\n\t\ttransform: scale(.8) translateX(-60%);\n\t}\n\t100% {\n\t\topacity: 1;\n\t\ttransform: scale(1) translateX(-50%);\n\t}\n}\n\n.cheetah-grid__tooltip-element {\n\tposition: absolute;\n\tbox-sizing: border-box;\n\tborder-radius: 3px;\n\tbackground-color: #232F34;\n\tpadding: 8px;\n\n\tpointer-events: none;\n\tuser-select: none;\n}\n.cheetah-grid__tooltip-element--hidden {\n\topacity: 0;\n\ttransform: translateX(-50%);\n\ttransition: opacity 75ms linear;\n}\n.cheetah-grid__tooltip-element--shown {\n\topacity: 1;\n\ttransform: translateX(-50%);\n\tanimation: cheetah-grid__tooltip-element--shown-animation 150ms ease-out;\n}\n.cheetah-grid__tooltip-element__content {\n\tfont-family: Roboto;\n\tfont-size: 12px;\n\tfont-size: .75rem;\n\tmin-height: 1em;\n\tline-height: 1;\n\twidth: 100%;\n\tdisplay: block;\n\twhite-space: pre-wrap;\n\tmargin: 0;\n}\n.cheetah-grid__tooltip-element {\n\tcolor: #FFFFFF;\n}\n",""])},function(t,e,n){var r=n(48),o=n(55);function i(t,e,n){if(n){var r=t[e];return t[e]=n,r}return t[e]}t.exports={theme:function(t,e){return i(r,t,e)},icon:function(t,e){return i(o,t,e)},icons:function(t){!function(t,e){for(var n in e)t[n]=e[n]}(o,t)}}}])})}).call("undefined"!=typeof global?global:window)}();
//# sourceMappingURL=cheetahGrid.es5.min.js.map